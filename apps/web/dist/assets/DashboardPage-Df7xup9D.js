import{c as Me,s as ce,u as Re,a as $e,b as Ee,r,R,j as e,m as j,Z as Fe,W as Te,M as se,U as Le,L as ae,A as J,d as ze,E as ne}from"./index-DBWvns2S.js";import{P as Ae}from"./PremiumLoader-CAof6PuZ.js";import{C as ie,R as Ie,A as Oe,a as He,X as Ge,Y as Pe,T as Be,b as We}from"./Analytics-4mVPZY58.js";import{D as _e}from"./dollar-sign-CAwsWbM7.js";import{T as Z}from"./trending-up-D8agHWFO.js";import{C as le}from"./chevron-down-XnxRQv6s.js";import{C as re}from"./chevron-up-DyVGLPOT.js";/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ke=[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]],Ye=Me("trending-down",Ke);async function Ue(){try{const{data:m,error:s}=await ce.rpc("get_user_gamification");if(s||!m||m.length===0)return console.error("Error fetching gamification data:",s),oe();const p=m[0];return{streak:p.streak??0,dailyGoal:parseFloat(p.daily_goal)||5,goalReached:p.goal_reached??!1,yesterdayRevenue:parseFloat(p.yesterday_revenue)||0,comparisonPercent:null}}catch(m){return console.error("getUserGamification error:",m),oe()}}function oe(){return{streak:0,dailyGoal:5,goalReached:!1,yesterdayRevenue:0,comparisonPercent:null}}function Ve(m,s){if(s===0)return m>0?100:null;const p=(m-s)/s*100;return Math.round(p)}async function Xe(){try{const{error:m}=await ce.rpc("mark_goal_reached");return!m}catch{return!1}}function qe(m,s,p){return m>=s&&!p}function W(m,s=1200,p=!1){const[E,P]=r.useState(p?m:0);return r.useEffect(()=>{if(p){P(m);return}let u,F;const v=S=>{u||(u=S);const y=Math.min((S-u)/s,1),T=y===1?1:1-Math.pow(2,-10*y);P(m*T),y<1&&(F=requestAnimationFrame(v))};return F=requestAnimationFrame(v),()=>cancelAnimationFrame(F)},[m,s,p]),E}function lt(){const m=Re(),{data:s,links:p,loading:E}=$e(),{balance:P}=Ee(),[u,F]=r.useState("all"),[v,S]=r.useState(!1),[y,T]=r.useState(!1),Q=3,_=R.useRef(null),de=R.useRef(null),pe=R.useRef(null),ue=R.useRef(null),me=R.useRef(null),[he,fe]=r.useState(!1),K=r.useMemo(()=>s!==null&&!he,[]);r.useEffect(()=>{!E&&s&&fe(!0)},[E,s]);const[c,xe]=r.useState(null),[Y,ee]=r.useState(!1);r.useEffect(()=>{Ue().then(t=>{t&&xe(t)})},[]);const $=r.useMemo(()=>{const t=(s==null?void 0:s.timeline)||[],d=new Date().toISOString().split("T")[0];return t.filter(x=>{const f=x.date||x.day;return f?(typeof f=="string"?f.split("T")[0]:new Date(f).toISOString().split("T")[0])===d:!1}).reduce((x,f)=>x+(f.earnings||0),0)},[s==null?void 0:s.timeline]),H=r.useMemo(()=>c?Ve($,c.yesterdayRevenue):null,[$,c==null?void 0:c.yesterdayRevenue]);r.useEffect(()=>{c&&qe($,c.dailyGoal,c.goalReached)&&(ee(!0),Xe(),setTimeout(()=>ee(!1),3e3))},[$,c]),r.useEffect(()=>{const t=i=>{var x;const d=i.target;v&&_.current&&!_.current.contains(d)&&!((x=d.closest)!=null&&x.call(d,".lp-d2-dropdown-time"))&&S(!1)};return v&&(document.addEventListener("mousedown",t),document.addEventListener("touchstart",t)),()=>{document.removeEventListener("mousedown",t),document.removeEventListener("touchstart",t)}},[v]),r.useEffect(()=>{const t=i=>{i.key==="Escape"&&(v&&S(!1),y&&T(!1))};if(v||y)return document.addEventListener("keydown",t),()=>document.removeEventListener("keydown",t)},[v,y]);const L=r.useMemo(()=>({totalRevenue:(s==null?void 0:s.totalRevenue)??0,totalClicks:(s==null?void 0:s.totalClicks)??0,linkClicks:(s==null?void 0:s.linkClicks)??0,bioClicks:(s==null?void 0:s.bioClicks)??0}),[s]),ge=r.useMemo(()=>L.totalClicks===0?0:L.totalRevenue/L.totalClicks*1e3,[L.totalRevenue,L.totalClicks]),U=r.useMemo(()=>!p||p.length===0?null:[...p].sort((t,i)=>(i.earnings||0)-(t.earnings||0))[0],[p]),V=r.useMemo(()=>!p||p.length===0?[]:[...p].sort((t,i)=>(i.views||0)-(t.views||0)),[p]),te=r.useMemo(()=>V.slice(0,Q),[V,Q]),D=R.useRef(null),k=R.useRef(null),z=R.useRef(null);r.useEffect(()=>{if(y&&z.current&&D.current&&k.current){const t=()=>{!z.current||!D.current||!k.current||requestAnimationFrame(()=>{requestAnimationFrame(()=>{if(!z.current||!D.current||!k.current)return;const x=z.current.scrollHeight||z.current.offsetHeight,f=130;D.current.style.paddingBottom=`${x+f}px`,k.current.style.overflowY="auto",k.current.style.overflowX="hidden"})})};t();const i=setTimeout(t,350),d=setTimeout(t,500);return()=>{clearTimeout(i),clearTimeout(d),D.current&&(D.current.style.paddingBottom=""),k.current&&(k.current.style.overflowY="",k.current.style.overflowX="")}}else D.current&&(D.current.style.paddingBottom=""),k.current&&(k.current.style.overflowY="auto",k.current.style.overflowX="hidden")},[y]);const ye=r.useCallback(t=>t>=1e3?`‚Ç¨${(t/1e3).toFixed(1)}k`:t>=1?`‚Ç¨${t.toFixed(2)}`:`‚Ç¨${t.toFixed(4)}`,[]),je=r.useCallback(t=>t>=1e6?`${(t/1e6).toFixed(1)}M`:t>=1e4?`${(t/1e3).toFixed(0)}k`:t>=1e3?`${(t/1e3).toFixed(1)}k`:t.toFixed(0),[]),X=r.useCallback(()=>{T(!1),setTimeout(()=>{k.current&&k.current.scrollTo({top:0,behavior:"smooth"})},100)},[]),ve=W(P,1200,K),ke=W(L.totalClicks,1200,K),Ne=W(ge,1200,K),{filteredRevenue:we,chartData:q,yDomain:be}=r.useMemo(()=>{const t=(s==null?void 0:s.timeline)||[],i=new Date,d=a=>{if(a.isoDate)return new Date(a.isoDate+"T00:00:00");if(a.date){if(a.date.includes("-")&&a.date.length>=10){const o=new Date(a.date);if(!isNaN(o.getTime()))return o}const n=a.date.trim().split(" ");if(n.length===2){const o=parseInt(n[0]),w={ene:0,feb:1,mar:2,abr:3,may:4,jun:5,jul:6,ago:7,sep:8,oct:9,nov:10,dic:11}[n[1].toLowerCase()];if(w!==void 0&&!isNaN(o)&&o>=1&&o<=31){let h=i.getFullYear();const g=new Date(h,w,o),b=new Date(i);return b.setDate(b.getDate()+1),g>b&&(h=h-1),new Date(h,w,o)}}}return a.created_at?new Date(a.created_at):new Date},f=(a=>{if(u==="all")return[...a].sort((h,g)=>{const b=d(h),O=d(g);return b.getTime()-O.getTime()});const n=i.toISOString().slice(0,10);if(u==="today")return a.filter(g=>g.isoDate?g.isoDate===n:d(g).toISOString().slice(0,10)===n);const o=new Date(i);u==="week"?o.setDate(i.getDate()-6):u==="month"&&o.setDate(i.getDate()-29),o.setHours(0,0,0,0);const l=o.toISOString().slice(0,10);return a.filter(h=>{if(h.isoDate)return h.isoDate>=l&&h.isoDate<=n;const b=d(h).toISOString().slice(0,10);return b>=l&&b<=n}).sort((h,g)=>{const b=h.isoDate||d(h).toISOString().slice(0,10),O=g.isoDate||d(g).toISOString().slice(0,10);return b.localeCompare(O)})})(t);u==="all"?s==null||s.totalRevenue:f.reduce((a,n)=>a+(n.earnings||0),0);const C=["Dom","Lun","Mar","Mi√©","Jue","Vie","S√°b"],M=["Ene","Feb","Mar","Abr","May","Jun","Jul","Ago","Sep","Oct","Nov","Dic"],A=new Map;t.forEach(a=>{const o=d(a).toISOString().slice(0,10);A.set(o,(A.get(o)||0)+(a.earnings||0))});let N=[];if(u==="today"){const a=new Date(i);a.setHours(0,0,0,0);const n=a.toISOString().slice(0,10),o=A.get(n)||0;for(let l=0;l<24;l++){const w=new Date(a);w.setHours(l);const h=l%4===0||l===23?`${l}h`:"",g=l===i.getHours()?o:0;N.push({date:w,value:g,label:h,fullDate:`Hoy a las ${l.toString().padStart(2,"0")}:00`})}}else if(u==="week")for(let a=6;a>=0;a--){const n=new Date(i);n.setDate(i.getDate()-a),n.setHours(0,0,0,0);const o=n.toISOString().slice(0,10),l=A.get(o)||0,w=a===0?"Hoy":C[n.getDay()];N.push({date:n,value:l,label:w,fullDate:`${C[n.getDay()]} ${n.getDate()} ${M[n.getMonth()]}`})}else if(u==="month"){const a=i.getFullYear(),n=i.getMonth(),o=new Date(a,n+1,0).getDate();for(let l=1;l<=o;l++){const w=new Date(a,n,l),h=w.toISOString().slice(0,10),g=A.get(h)||0,O=l===i.getDate()?"Hoy":l.toString();N.push({date:w,value:g,label:O,fullDate:`${l} ${M[n]} ${a}`})}}else if(f.length===0)for(let a=6;a>=0;a--){const n=new Date(i);n.setDate(i.getDate()-a),n.setHours(0,0,0,0),N.push({date:n,value:0,label:a===0?"Hoy":`${n.getDate()} ${M[n.getMonth()]}`,fullDate:`${n.getDate()} ${M[n.getMonth()]} ${n.getFullYear()}`})}else{const a=Math.max(1,Math.floor(f.length/8));f.forEach((n,o)=>{const l=d(n),w=n.earnings||0,g=o===0||o===f.length-1||o%a===0?`${l.getDate()} ${M[l.getMonth()]}`:"";N.push({date:l,value:w,label:g,fullDate:`${l.getDate()} ${M[l.getMonth()]} ${l.getFullYear()}`})})}const I=N.map(a=>a.value).filter(a=>a>0),B=I.length>0?Math.max(...I):0;let Ce=B>0?B*1.15:.01;return{filteredRevenue:u==="all"?(s==null?void 0:s.totalRevenue)??0:N.reduce((a,n)=>a+n.value,0),chartData:N,yDomain:[0,Ce]}},[s==null?void 0:s.timeline,s==null?void 0:s.totalRevenue,u]),Se=W(we,800,!1),De=r.useCallback(({active:t,payload:i,label:d})=>{if(!t||!i||!i.length)return null;const x=i[0].payload,f=i[0].value;let C=x.fullDate||d;return!C&&x.date&&(C=x.date.toLocaleDateString("es-ES",{year:"numeric",month:"short",day:"numeric",...u==="today"?{hour:"2-digit",minute:"2-digit"}:{}})),e.jsxs("div",{style:{background:"linear-gradient(135deg, rgba(15, 23, 42, 0.99) 0%, rgba(30, 41, 59, 0.97) 100%)",border:"1px solid rgba(74, 222, 128, 0.5)",borderRadius:"14px",padding:"14px 18px",boxShadow:"0 12px 48px rgba(0, 0, 0, 0.7), 0 0 0 1px rgba(255, 255, 255, 0.08) inset, 0 0 40px rgba(34, 197, 94, 0.25), 0 4px 16px rgba(34, 197, 94, 0.15)",backdropFilter:"blur(24px) saturate(1.3)",WebkitBackdropFilter:"blur(24px) saturate(1.3)",pointerEvents:"none",transform:"translateZ(0)",zIndex:1e3,position:"relative",overflow:"hidden"},children:[e.jsx("div",{style:{position:"absolute",top:0,left:0,right:0,height:"2px",background:"linear-gradient(90deg, transparent, rgba(74, 222, 128, 0.6), transparent)",opacity:.8}}),e.jsx("div",{style:{color:"#94a3b8",fontSize:"11px",marginBottom:"10px",fontWeight:500,letterSpacing:"0.03em",textTransform:"uppercase"},children:C||"Fecha no disponible"}),e.jsxs("div",{style:{color:"#4ade80",fontWeight:900,fontSize:"20px",display:"flex",alignItems:"baseline",gap:"10px",lineHeight:1,letterSpacing:"-0.02em"},children:[e.jsxs("span",{style:{textShadow:"0 0 24px rgba(74, 222, 128, 0.5), 0 2px 8px rgba(0, 0, 0, 0.3)",fontFeatureSettings:'"tnum"',background:"linear-gradient(135deg, #4ade80 0%, #22c55e 100%)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text"},children:["‚Ç¨",f.toFixed(4)]}),e.jsx("span",{style:{color:"#64748b",fontSize:"10px",fontWeight:700,textTransform:"uppercase",letterSpacing:"0.08em",opacity:.9},children:"Ingresos"})]})]})},[u]),G={today:"Hoy",week:"Semana",month:"Mes",all:"Total"};return E?e.jsx(Ae,{size:"medium",text:"LINKPAY",subtext:"Cargando dashboard..."}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"lp-bg",children:[e.jsx("div",{className:"lp-bg-gradient"}),e.jsx("div",{className:"lp-bg-glow"})]}),e.jsx("div",{className:"lp-dashboard-shell",ref:k,children:e.jsxs("div",{className:"lp-dashboard-2",ref:D,children:[e.jsxs(j.div,{className:`lp-d2-streak-header ${Y?"celebrating":""}`,initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{delay:.05},children:[e.jsx(Fe,{size:20,className:"lp-d2-streak-icon"}),e.jsxs("span",{className:"lp-d2-streak-text",children:[(c==null?void 0:c.streak)??0," D√çAS EN RACHA"]}),e.jsx("span",{className:"lp-d2-streak-sub",children:((c==null?void 0:c.streak)??0)>0?"¬°Sigue as√≠!":"¬°Empieza hoy!"})]}),e.jsxs("div",{className:"lp-d2-row-top",children:[e.jsxs(j.div,{className:"lp-d2-card lp-d2-earnings",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.1},children:[e.jsxs("div",{className:"lp-d2-card-header",children:[e.jsx(_e,{size:18,className:"lp-d2-icon green"}),e.jsx("span",{className:"lp-d2-label",children:"INGRESOS"})]}),e.jsx("div",{className:"lp-d2-value green",children:Se.toFixed(4)}),e.jsxs("div",{className:"lp-d2-comparison",children:[e.jsx("span",{className:"lp-d2-hint",children:G[u]}),H!==null&&e.jsxs("span",{className:`lp-d2-comparison-badge ${H>=0?"positive":"negative"}`,children:[H>=0?e.jsx(Z,{size:10}):e.jsx(Ye,{size:10}),H>=0?"+":"",H,"%"]})]})]}),e.jsxs(j.div,{className:"lp-d2-card lp-d2-balance",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.15},onClick:()=>m("/app/finance"),children:[e.jsxs("div",{className:"lp-d2-card-header",children:[e.jsx(Te,{size:18,className:"lp-d2-icon blue"}),e.jsx("span",{className:"lp-d2-label",children:"BALANCE"})]}),e.jsx("div",{className:"lp-d2-value blue",children:ve.toFixed(2)}),e.jsx("span",{className:"lp-d2-hint",children:"Disponible"})]})]}),e.jsxs(j.div,{className:"lp-d2-stats-row",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.15},children:[e.jsxs("div",{className:"lp-d2-stat purple",children:[e.jsx(se,{size:20}),e.jsx("span",{className:"lp-d2-stat-value",children:je(ke)}),e.jsx("span",{className:"lp-d2-stat-label",children:"CLICKS"})]}),e.jsxs("div",{className:"lp-d2-stat orange",children:[e.jsx(ie,{size:20}),e.jsx("span",{className:"lp-d2-stat-value",children:Ne.toFixed(2)}),e.jsx("span",{className:"lp-d2-stat-label",children:"RPM"})]}),e.jsxs("div",{className:"lp-d2-stat cyan",children:[e.jsx(Le,{size:20}),e.jsx("span",{className:"lp-d2-stat-value",children:"0"}),e.jsx("span",{className:"lp-d2-stat-label",children:"REFERIDOS"})]}),e.jsxs("div",{className:"lp-d2-stat indigo",onClick:()=>U&&m("/app/links"),children:[e.jsx(ae,{size:20}),e.jsx("span",{className:"lp-d2-stat-value",children:U?`/${U.slug}`:"-"}),e.jsx("span",{className:"lp-d2-stat-label",children:"TOP LINK"})]})]}),e.jsxs(j.div,{className:`lp-d2-goal-card ${Y?"celebrating":""}`,initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.18},children:[e.jsxs("div",{className:"lp-d2-goal-header",children:[e.jsx("span",{className:"lp-d2-goal-label",children:"‚≠ï Meta diaria"}),e.jsxs("span",{className:"lp-d2-goal-target",children:["‚Ç¨",((c==null?void 0:c.dailyGoal)??5).toFixed(2)]})]}),e.jsx("div",{className:"lp-d2-goal-bar",children:e.jsx(j.div,{className:"lp-d2-goal-fill",initial:{width:0},animate:{width:`${Math.min($/((c==null?void 0:c.dailyGoal)??5)*100,100)}%`},transition:{duration:1,delay:.3,ease:"easeOut"}})}),e.jsxs("div",{className:"lp-d2-goal-info",children:[e.jsxs("span",{className:"lp-d2-goal-current",children:["‚Ç¨",$.toFixed(4)]}),e.jsxs("span",{className:"lp-d2-goal-percent",children:[Math.min(Math.round($/((c==null?void 0:c.dailyGoal)??5)*100),100),"%"]})]}),Y&&e.jsx("div",{className:"lp-d2-confetti-container",children:[...Array(20)].map((t,i)=>e.jsx("div",{className:"lp-d2-confetti",style:{left:`${Math.random()*100}%`,animationDelay:`${Math.random()*.5}s`}},i))})]}),e.jsxs(j.div,{className:"lp-d2-chart-card",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.2},children:[e.jsxs("div",{className:"lp-d2-chart-header",ref:de,children:[e.jsxs("div",{className:"lp-d2-chart-title",children:[e.jsx(Z,{size:16,className:"lp-d2-icon green"}),e.jsx("span",{children:"Ingresos"})]}),e.jsxs("div",{className:"lp-d2-time-dropdown-wrapper",children:[e.jsxs(j.button,{ref:_,className:"lp-d2-dropdown-btn",onClick:()=>S(!v),onKeyDown:t=>{(t.key==="Enter"||t.key===" ")&&(t.preventDefault(),S(!v))},"aria-expanded":v,"aria-haspopup":"true","aria-label":`Per√≠odo seleccionado: ${G[u]}`,whileHover:{y:-1},whileTap:{scale:.98},transition:{duration:.2},children:[G[u],e.jsx(le,{size:14,className:v?"rotated":""})]}),e.jsx(J,{children:v&&e.jsx(j.div,{className:"lp-d2-dropdown lp-d2-dropdown-time",initial:{opacity:0,y:-5,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-5,scale:.95},transition:{duration:.2},role:"menu","aria-label":"Seleccionar per√≠odo",children:["today","week","month","all"].map(t=>e.jsx(j.button,{className:`lp-d2-dropdown-item ${u===t?"active":""}`,onClick:()=>{F(t),S(!1)},onKeyDown:i=>{(i.key==="Enter"||i.key===" ")&&(i.preventDefault(),F(t),S(!1))},role:"menuitem","aria-label":G[t],whileHover:{x:2},whileTap:{scale:.98},transition:{duration:.15},children:G[t]},t))})})]})]}),e.jsx(J,{mode:"wait",children:e.jsx(j.div,{className:`lp-d2-chart ${E?"loading":""}`,initial:{opacity:0,scale:.96,y:4},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.96,y:-4},transition:{duration:.45,ease:[.4,0,.2,1],opacity:{duration:.35}},children:q.length===0?e.jsxs(j.div,{className:"lp-d2-chart-empty",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.1},children:[e.jsx(ie,{size:32}),e.jsx("span",{children:"No hay datos disponibles para este per√≠odo"})]}):e.jsx(Ie,{width:"100%",height:180,children:e.jsxs(Oe,{data:q,margin:{top:12,right:10,left:2,bottom:10},children:[e.jsxs("defs",{children:[e.jsxs("linearGradient",{id:"chartGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"0%",stopColor:"#22c55e",stopOpacity:.65}),e.jsx("stop",{offset:"30%",stopColor:"#22c55e",stopOpacity:.4}),e.jsx("stop",{offset:"60%",stopColor:"#22c55e",stopOpacity:.2}),e.jsx("stop",{offset:"100%",stopColor:"#22c55e",stopOpacity:.05})]}),e.jsxs("filter",{id:"chartGlow",x:"-50%",y:"-50%",width:"200%",height:"200%",children:[e.jsx("feGaussianBlur",{stdDeviation:"2.5",result:"coloredBlur"}),e.jsxs("feMerge",{children:[e.jsx("feMergeNode",{in:"coloredBlur"}),e.jsx("feMergeNode",{in:"SourceGraphic"})]})]}),e.jsxs("filter",{id:"chartShadow",x:"-50%",y:"-50%",width:"200%",height:"200%",children:[e.jsx("feGaussianBlur",{in:"SourceAlpha",stdDeviation:"1"}),e.jsx("feOffset",{dx:"0",dy:"1",result:"offsetblur"}),e.jsx("feComponentTransfer",{children:e.jsx("feFuncA",{type:"linear",slope:"0.3"})}),e.jsxs("feMerge",{children:[e.jsx("feMergeNode",{}),e.jsx("feMergeNode",{in:"SourceGraphic"})]})]})]}),e.jsx(He,{strokeDasharray:"4 4",stroke:"rgba(148, 163, 184, 0.18)",vertical:!1,horizontal:!0,strokeWidth:1,strokeOpacity:.6}),e.jsx(Ge,{dataKey:"label",axisLine:!1,tickLine:!1,tick:{fill:"#94a3b8",fontSize:11,fontWeight:600,fontFamily:"Inter, -apple-system, sans-serif"},interval:"preserveStartEnd",minTickGap:12,height:34,style:{userSelect:"none"}}),e.jsx(Pe,{axisLine:!1,tickLine:!1,tick:{fill:"#94a3b8",fontSize:11,fontWeight:600,fontFamily:"Inter, -apple-system, sans-serif"},tickFormatter:t=>t===0?"‚Ç¨0":t<.01?`‚Ç¨${t.toFixed(4)}`:t<1?`‚Ç¨${t.toFixed(2)}`:`‚Ç¨${t.toFixed(2)}`,width:60,domain:be,style:{userSelect:"none"}}),e.jsx(Be,{content:De,cursor:{stroke:"#22c55e",strokeWidth:2.5,strokeDasharray:"8 5",opacity:.75,strokeLinecap:"round",strokeLinejoin:"round"},animationDuration:300,animationEasing:"ease-out",allowEscapeViewBox:{x:!1,y:!1}}),e.jsx(We,{type:"monotone",dataKey:"value",stroke:"#22c55e",strokeWidth:3.5,fill:"url(#chartGradient)",dot:!1,activeDot:{r:5,fill:"#22c55e",stroke:"#fff",strokeWidth:2,style:{filter:"drop-shadow(0 0 6px rgba(34, 197, 94, 0.8))",transition:"none"}},isAnimationActive:!0,animationDuration:800,animationEasing:"ease-out",connectNulls:!1,strokeLinecap:"round",strokeLinejoin:"round"})]})})},`chart-${u}-${q.length}`)})]},u),e.jsxs("div",{ref:z,className:"lp-d2-links-wrapper",children:[e.jsxs("button",{className:"lp-d2-links-toggle",onClick:()=>y?X():T(!0),onKeyDown:t=>{(t.key==="Enter"||t.key===" ")&&(t.preventDefault(),y?X():T(!0))},"aria-expanded":y,"aria-controls":"links-dropdown","aria-label":`${y?"Cerrar":"Abrir"} lista de enlaces`,children:[e.jsx(ae,{size:18}),e.jsx("span",{children:"Mis Enlaces"}),e.jsx("span",{className:"lp-d2-links-count",children:p.length}),y?e.jsx(re,{size:18}):e.jsx(le,{size:18})]}),e.jsx(J,{children:y&&e.jsxs(j.div,{ref:pe,id:"links-dropdown",className:"lp-d2-links-section",initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.3,ease:[.4,0,.2,1],opacity:{duration:.2}},role:"region","aria-label":"Lista de enlaces",children:[e.jsx("div",{ref:me,className:"lp-d2-links-content",children:e.jsx("div",{ref:ue,className:"lp-d2-links-scroll",children:te.length===0?e.jsxs("div",{className:"lpa-empty-links",children:[e.jsx(ze,{size:40,className:"lpa-empty-icon lpa-3d-icon"}),e.jsx("div",{className:"lpa-empty-title",children:"Sin enlaces todav√≠a"}),e.jsx("div",{className:"lpa-empty-sub",children:"Crea tu primer enlace para empezar"})]}):e.jsx("div",{className:"lpa-link-cards",children:te.map((t,i)=>{const d=t.views||0,x=t.earnings||0,f=V.reduce((I,B)=>Math.max(I,B.earnings||0),1),C=f>0?x/f*100:0,M=d>0?x/d:0,N=[{emoji:"ü•á",name:"gold",color:"#fbbf24"},{emoji:"ü•à",name:"silver",color:"#94a3b8"},{emoji:"ü•â",name:"bronze",color:"#f97316"}][i];return e.jsxs("div",{className:`lpa-link-card medal-${N.name}`,onClick:()=>{const I=`${window.location.origin}/${t.slug}`;navigator.clipboard.writeText(I)},children:[e.jsx("div",{className:`lpa-medal-3d medal-${N.name}`,children:e.jsx("span",{className:"lpa-medal-emoji",children:N.emoji})}),e.jsxs("div",{className:"lpa-link-card-content",children:[e.jsxs("div",{className:"lpa-link-card-header",children:[e.jsx("span",{className:"lpa-link-card-title",children:t.title||t.slug}),e.jsx("span",{className:"lpa-link-card-earnings",children:ye(x)})]}),e.jsx("div",{className:"lpa-link-card-progress",children:e.jsx("div",{className:"lpa-link-card-progress-fill",style:{width:`${C}%`,background:`linear-gradient(90deg, ${N.color}, ${N.color}88)`,transition:"width 0.5s ease-out"}})}),e.jsxs("div",{className:"lpa-link-card-stats",children:[e.jsxs("div",{className:"lpa-link-card-stat",children:[e.jsx(se,{size:12}),e.jsxs("span",{children:[d," clicks"]})]}),d>0&&e.jsxs("div",{className:"lpa-link-card-stat epc",children:[e.jsx(Z,{size:12}),e.jsxs("span",{children:["‚Ç¨",M.toFixed(4)]})]}),e.jsxs("div",{className:"lpa-link-card-stat slug",children:[e.jsx(ne,{size:12}),e.jsxs("span",{children:["/",t.slug]})]})]})]})]},t.id)})})})}),e.jsxs("div",{className:"lp-d2-links-actions",children:[e.jsxs(j.button,{className:"lp-d2-collapse-btn",onClick:X,whileHover:{scale:1.02},whileTap:{scale:.98},"aria-label":"Recoger lista de enlaces",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.2},children:[e.jsx(re,{size:18}),e.jsx("span",{children:"Recoger"})]}),p.length>0&&e.jsxs(j.button,{className:"lp-d2-view-all",onClick:()=>m("/app/links"),whileHover:{scale:1.02},whileTap:{scale:.98},"aria-label":"Ver todos los enlaces en la p√°gina de enlaces",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.3},children:["Ver todos en Enlaces ",e.jsx(ne,{size:14})]})]})]})})]})]})})]})}export{lt as DashboardPage};
