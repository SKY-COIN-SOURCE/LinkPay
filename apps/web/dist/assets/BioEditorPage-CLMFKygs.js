import{d as ne,j as r,I as Fn,c as Re,U as Bn,M as et,t as Un,r as c,R as O,e as Oe,v as qn,J as Vn,s as Xn,K as ee,b as mt,Z as tt,x as Hn,G as on,i as Yn,B as Wn,N as Gn,O as Kn,P as Qn,Q as Jn,V as Zn,Y as er,_ as tr,$ as nr,a0 as rr,k as sr}from"./index-On-fZ_mX.js";import{P as ln,E as xt,a as ht,C as ir}from"./plus-1Cq4d2BI.js";import{S as cn}from"./share-2-DXCDC0zz.js";import{D as Dt}from"./dollar-sign-Sox69eKA.js";import{C as yt}from"./chevron-down-ByDV1WgV.js";import{T as Ht}from"./trash-2-BQLV0sVO.js";/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ar=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],or=ne("award",ar);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lr=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],cr=ne("chevron-up",lr);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dr=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],ur=ne("circle",dr);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hr=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],pr=ne("file-text",hr);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fr=[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]],gr=ne("grip-vertical",fr);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vr=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],Rt=ne("image",vr);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const br=[["path",{d:"M5 12h14",key:"1ays0h"}]],dn=ne("minus",br);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mr=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M9 21V9",key:"1oto5p"}]],xr=ne("panels-top-left",mr);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yr=[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]],wr=ne("qr-code",yr);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jr=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],Nr=ne("sparkles",jr);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cr=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],wt=ne("star",Cr);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kr=[["path",{d:"M12 4v16",key:"1654pz"}],["path",{d:"M4 7V5a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v2",key:"e0r10z"}],["path",{d:"M9 20h6",key:"s66wpe"}]],un=ne("type",kr);function Sr({url:e,username:t,accentColor:n="#6366f1"}){const s=(n||"#6366f1").replace("#",""),i=`https://api.qrserver.com/v1/create-qr-code/?size=200x200&data=${encodeURIComponent(e)}&color=${s}&bgcolor=FFFFFF&margin=10`,a=(()=>{try{const o=new URL(e);return`${o.host}${o.pathname}`}catch{return e}})(),l=async()=>{try{const d=await(await fetch(i)).blob(),p=URL.createObjectURL(d),h=document.createElement("a");h.download=`linkpay-${t}-qr.png`,h.href=p,h.click(),URL.revokeObjectURL(p)}catch(o){console.error("Error downloading QR:",o)}};return r.jsxs("div",{className:"lp-qr-container",children:[r.jsx("div",{className:"lp-qr-preview",children:r.jsx("img",{src:i,alt:`QR Code for ${t}`,style:{width:150,height:150,borderRadius:8}})}),r.jsxs("div",{className:"lp-qr-info",children:[r.jsx("p",{className:"lp-qr-url",children:a}),r.jsxs("button",{className:"lp-btn-basic lp-btn-secondary",onClick:l,children:[r.jsx(Fn,{size:14}),"Descargar PNG"]})]})]})}const pt=[{id:"first_link",icon:Re,label:"Primer Enlace",description:"Añade tu primer enlace",color:"#3b82f6",check:e=>{var t;return(((t=e.links)==null?void 0:t.length)||0)>=1}},{id:"link_collector",icon:Re,label:"Coleccionista",description:"Añade 5 enlaces",color:"#8b5cf6",check:e=>{var t;return(((t=e.links)==null?void 0:t.length)||0)>=5}},{id:"profile_pic",icon:Rt,label:"Con Cara",description:"Sube tu foto de perfil",color:"#f59e0b",check:e=>!!e.avatar_url},{id:"bio_writer",icon:pr,label:"Escritor",description:"Añade una bio de +10 caracteres",color:"#10b981",check:e=>{var t;return(((t=e.description)==null?void 0:t.length)||0)>=10}},{id:"theme_changer",icon:ln,label:"Diseñador",description:"Personaliza tu tema",color:"#ec4899",check:e=>e.theme&&e.theme!=="light"},{id:"first_view",icon:xt,label:"Primera Visita",description:"Recibe tu primera visita",color:"#6366f1",check:e=>(e.views||0)>=1},{id:"popular",icon:Bn,label:"Popular",description:"Alcanza 100 visitas",color:"#14b8a6",check:e=>(e.views||0)>=100},{id:"first_click",icon:et,label:"Primer Click",description:"Alguien hizo click en tu enlace",color:"#22c55e",check:e=>{var n;return(((n=e.links)==null?void 0:n.reduce((s,i)=>s+(i.clicks||0),0))||0)>=1}},{id:"viral",icon:cn,label:"Viral",description:"Consigue 100 clicks",color:"#eab308",check:e=>{var n;return(((n=e.links)==null?void 0:n.reduce((s,i)=>s+(i.clicks||0),0))||0)>=100}},{id:"money_maker",icon:Dt,label:"Monetizado",description:"Activa la monetización",color:"#22c55e",check:e=>e.monetization_mode&&e.monetization_mode!=="none"}];function Dr({profile:e}){var i;const t=[{key:"avatar",label:"Avatar",done:!!e.avatar_url},{key:"name",label:"Nombre",done:!!e.display_name&&e.display_name.length>2},{key:"bio",label:"Bio",done:!!e.description&&e.description.length>10},{key:"links",label:"3+ Enlaces",done:(((i=e.links)==null?void 0:i.length)||0)>=3},{key:"theme",label:"Tema",done:e.theme!=="light"}],n=t.filter(a=>a.done).length,s=Math.round(n/t.length*100);return s===100?null:r.jsxs("div",{className:"lp-completion-card",children:[r.jsxs("div",{className:"lp-completion-header",children:[r.jsx(wt,{size:18}),r.jsx("span",{children:"Completa tu perfil"}),r.jsxs("span",{className:"lp-completion-pct",children:[s,"%"]})]}),r.jsx("div",{className:"lp-completion-bar",children:r.jsx("div",{className:"lp-completion-fill",style:{width:`${s}%`}})}),r.jsx("div",{className:"lp-completion-steps",children:t.map(a=>r.jsxs("div",{className:`lp-completion-step ${a.done?"done":""}`,children:[a.done?"✓":"○"," ",a.label]},a.key))})]})}function Rr({profile:e}){const t=pt.filter(n=>n.check(e)).length;return r.jsxs("div",{className:"lp-achievements-list",children:[r.jsx("div",{className:"lp-achievements-header",children:r.jsxs("span",{className:"lp-achievements-count",children:[t,"/",pt.length," logros"]})}),r.jsx("div",{className:"lp-achievements-items",children:pt.map(n=>{const s=n.check(e),i=n.icon;return r.jsxs("div",{className:`lp-achievement-item ${s?"complete":""}`,children:[r.jsx("div",{className:"lp-achievement-icon",style:{background:s?n.color:"rgba(255,255,255,0.1)",opacity:s?1:.5},children:r.jsx(i,{size:16})}),r.jsxs("div",{className:"lp-achievement-info",children:[r.jsx("span",{className:"lp-achievement-label",children:n.label}),r.jsx("span",{className:"lp-achievement-desc",children:n.description})]}),r.jsx("div",{className:"lp-achievement-status",children:s?r.jsx(Un,{size:18,style:{color:"#22c55e"}}):r.jsx(ur,{size:18,style:{color:"rgba(255,255,255,0.3)"}})})]},n.id)})})]})}function Er(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return c.useMemo(()=>s=>{t.forEach(i=>i(s))},t)}const at=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function Ee(e){const t=Object.prototype.toString.call(e);return t==="[object Window]"||t==="[object global]"}function Et(e){return"nodeType"in e}function Y(e){var t,n;return e?Ee(e)?e:Et(e)&&(t=(n=e.ownerDocument)==null?void 0:n.defaultView)!=null?t:window:window}function Mt(e){const{Document:t}=Y(e);return e instanceof t}function Xe(e){return Ee(e)?!1:e instanceof Y(e).HTMLElement}function hn(e){return e instanceof Y(e).SVGElement}function Me(e){return e?Ee(e)?e.document:Et(e)?Mt(e)?e:Xe(e)||hn(e)?e.ownerDocument:document:document:document}const oe=at?c.useLayoutEffect:c.useEffect;function zt(e){const t=c.useRef(e);return oe(()=>{t.current=e}),c.useCallback(function(){for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return t.current==null?void 0:t.current(...s)},[])}function Mr(){const e=c.useRef(null),t=c.useCallback((s,i)=>{e.current=setInterval(s,i)},[]),n=c.useCallback(()=>{e.current!==null&&(clearInterval(e.current),e.current=null)},[]);return[t,n]}function Ue(e,t){t===void 0&&(t=[e]);const n=c.useRef(e);return oe(()=>{n.current!==e&&(n.current=e)},t),n}function He(e,t){const n=c.useRef();return c.useMemo(()=>{const s=e(n.current);return n.current=s,s},[...t])}function nt(e){const t=zt(e),n=c.useRef(null),s=c.useCallback(i=>{i!==n.current&&(t==null||t(i,n.current)),n.current=i},[]);return[n,s]}function jt(e){const t=c.useRef();return c.useEffect(()=>{t.current=e},[e]),t.current}let ft={};function Ye(e,t){return c.useMemo(()=>{if(t)return t;const n=ft[e]==null?0:ft[e]+1;return ft[e]=n,e+"-"+n},[e,t])}function pn(e){return function(t){for(var n=arguments.length,s=new Array(n>1?n-1:0),i=1;i<n;i++)s[i-1]=arguments[i];return s.reduce((a,l)=>{const o=Object.entries(l);for(const[d,p]of o){const h=a[d];h!=null&&(a[d]=h+e*p)}return a},{...t})}}const De=pn(1),rt=pn(-1);function zr(e){return"clientX"in e&&"clientY"in e}function It(e){if(!e)return!1;const{KeyboardEvent:t}=Y(e.target);return t&&e instanceof t}function Ir(e){if(!e)return!1;const{TouchEvent:t}=Y(e.target);return t&&e instanceof t}function Nt(e){if(Ir(e)){if(e.touches&&e.touches.length){const{clientX:t,clientY:n}=e.touches[0];return{x:t,y:n}}else if(e.changedTouches&&e.changedTouches.length){const{clientX:t,clientY:n}=e.changedTouches[0];return{x:t,y:n}}}return zr(e)?{x:e.clientX,y:e.clientY}:null}const qe=Object.freeze({Translate:{toString(e){if(!e)return;const{x:t,y:n}=e;return"translate3d("+(t?Math.round(t):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;const{scaleX:t,scaleY:n}=e;return"scaleX("+t+") scaleY("+n+")"}},Transform:{toString(e){if(e)return[qe.Translate.toString(e),qe.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:t,duration:n,easing:s}=e;return t+" "+n+"ms "+s}}}),Yt="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function Tr(e){return e.matches(Yt)?e:e.querySelector(Yt)}const _r={display:"none"};function Ar(e){let{id:t,value:n}=e;return O.createElement("div",{id:t,style:_r},n)}function Lr(e){let{id:t,announcement:n,ariaLiveType:s="assertive"}=e;const i={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return O.createElement("div",{id:t,style:i,role:"status","aria-live":s,"aria-atomic":!0},n)}function Or(){const[e,t]=c.useState("");return{announce:c.useCallback(s=>{s!=null&&t(s)},[]),announcement:e}}const fn=c.createContext(null);function Pr(e){const t=c.useContext(fn);c.useEffect(()=>{if(!t)throw new Error("useDndMonitor must be used within a children of <DndContext>");return t(e)},[e,t])}function $r(){const[e]=c.useState(()=>new Set),t=c.useCallback(s=>(e.add(s),()=>e.delete(s)),[e]);return[c.useCallback(s=>{let{type:i,event:a}=s;e.forEach(l=>{var o;return(o=l[i])==null?void 0:o.call(l,a)})},[e]),t]}const Fr={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},Br={onDragStart(e){let{active:t}=e;return"Picked up draggable item "+t.id+"."},onDragOver(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was moved over droppable area "+n.id+".":"Draggable item "+t.id+" is no longer over a droppable area."},onDragEnd(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was dropped over droppable area "+n.id:"Draggable item "+t.id+" was dropped."},onDragCancel(e){let{active:t}=e;return"Dragging was cancelled. Draggable item "+t.id+" was dropped."}};function Ur(e){let{announcements:t=Br,container:n,hiddenTextDescribedById:s,screenReaderInstructions:i=Fr}=e;const{announce:a,announcement:l}=Or(),o=Ye("DndLiveRegion"),[d,p]=c.useState(!1);if(c.useEffect(()=>{p(!0)},[]),Pr(c.useMemo(()=>({onDragStart(f){let{active:y}=f;a(t.onDragStart({active:y}))},onDragMove(f){let{active:y,over:g}=f;t.onDragMove&&a(t.onDragMove({active:y,over:g}))},onDragOver(f){let{active:y,over:g}=f;a(t.onDragOver({active:y,over:g}))},onDragEnd(f){let{active:y,over:g}=f;a(t.onDragEnd({active:y,over:g}))},onDragCancel(f){let{active:y,over:g}=f;a(t.onDragCancel({active:y,over:g}))}}),[a,t])),!d)return null;const h=O.createElement(O.Fragment,null,O.createElement(Ar,{id:s,value:i.draggable}),O.createElement(Lr,{id:o,announcement:l}));return n?Oe.createPortal(h,n):h}var F;(function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"})(F||(F={}));function st(){}function qr(e,t){return c.useMemo(()=>({sensor:e,options:t??{}}),[e,t])}function Vr(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return c.useMemo(()=>[...t].filter(s=>s!=null),[...t])}const re=Object.freeze({x:0,y:0});function Xr(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function Hr(e,t){let{data:{value:n}}=e,{data:{value:s}}=t;return n-s}function Yr(e,t){let{data:{value:n}}=e,{data:{value:s}}=t;return s-n}function Wr(e,t){if(!e||e.length===0)return null;const[n]=e;return n[t]}function Wt(e,t,n){return t===void 0&&(t=e.left),n===void 0&&(n=e.top),{x:t+e.width*.5,y:n+e.height*.5}}const Gr=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:s}=e;const i=Wt(t,t.left,t.top),a=[];for(const l of s){const{id:o}=l,d=n.get(o);if(d){const p=Xr(Wt(d),i);a.push({id:o,data:{droppableContainer:l,value:p}})}}return a.sort(Hr)};function Kr(e,t){const n=Math.max(t.top,e.top),s=Math.max(t.left,e.left),i=Math.min(t.left+t.width,e.left+e.width),a=Math.min(t.top+t.height,e.top+e.height),l=i-s,o=a-n;if(s<i&&n<a){const d=t.width*t.height,p=e.width*e.height,h=l*o,f=h/(d+p-h);return Number(f.toFixed(4))}return 0}const Qr=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:s}=e;const i=[];for(const a of s){const{id:l}=a,o=n.get(l);if(o){const d=Kr(o,t);d>0&&i.push({id:l,data:{droppableContainer:a,value:d}})}}return i.sort(Yr)};function Jr(e,t,n){return{...e,scaleX:t&&n?t.width/n.width:1,scaleY:t&&n?t.height/n.height:1}}function gn(e,t){return e&&t?{x:e.left-t.left,y:e.top-t.top}:re}function Zr(e){return function(n){for(var s=arguments.length,i=new Array(s>1?s-1:0),a=1;a<s;a++)i[a-1]=arguments[a];return i.reduce((l,o)=>({...l,top:l.top+e*o.y,bottom:l.bottom+e*o.y,left:l.left+e*o.x,right:l.right+e*o.x}),{...n})}}const es=Zr(1);function ts(e){if(e.startsWith("matrix3d(")){const t=e.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}else if(e.startsWith("matrix(")){const t=e.slice(7,-1).split(/, /);return{x:+t[4],y:+t[5],scaleX:+t[0],scaleY:+t[3]}}return null}function ns(e,t,n){const s=ts(t);if(!s)return e;const{scaleX:i,scaleY:a,x:l,y:o}=s,d=e.left-l-(1-i)*parseFloat(n),p=e.top-o-(1-a)*parseFloat(n.slice(n.indexOf(" ")+1)),h=i?e.width/i:e.width,f=a?e.height/a:e.height;return{width:h,height:f,top:p,right:d+h,bottom:p+f,left:d}}const rs={ignoreTransform:!1};function ze(e,t){t===void 0&&(t=rs);let n=e.getBoundingClientRect();if(t.ignoreTransform){const{transform:p,transformOrigin:h}=Y(e).getComputedStyle(e);p&&(n=ns(n,p,h))}const{top:s,left:i,width:a,height:l,bottom:o,right:d}=n;return{top:s,left:i,width:a,height:l,bottom:o,right:d}}function Gt(e){return ze(e,{ignoreTransform:!0})}function ss(e){const t=e.innerWidth,n=e.innerHeight;return{top:0,left:0,right:t,bottom:n,width:t,height:n}}function is(e,t){return t===void 0&&(t=Y(e).getComputedStyle(e)),t.position==="fixed"}function as(e,t){t===void 0&&(t=Y(e).getComputedStyle(e));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(i=>{const a=t[i];return typeof a=="string"?n.test(a):!1})}function Tt(e,t){const n=[];function s(i){if(t!=null&&n.length>=t||!i)return n;if(Mt(i)&&i.scrollingElement!=null&&!n.includes(i.scrollingElement))return n.push(i.scrollingElement),n;if(!Xe(i)||hn(i)||n.includes(i))return n;const a=Y(e).getComputedStyle(i);return i!==e&&as(i,a)&&n.push(i),is(i,a)?n:s(i.parentNode)}return e?s(e):n}function vn(e){const[t]=Tt(e,1);return t??null}function gt(e){return!at||!e?null:Ee(e)?e:Et(e)?Mt(e)||e===Me(e).scrollingElement?window:Xe(e)?e:null:null}function bn(e){return Ee(e)?e.scrollX:e.scrollLeft}function mn(e){return Ee(e)?e.scrollY:e.scrollTop}function Ct(e){return{x:bn(e),y:mn(e)}}var B;(function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"})(B||(B={}));function xn(e){return!at||!e?!1:e===document.scrollingElement}function yn(e){const t={x:0,y:0},n=xn(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},s={x:e.scrollWidth-n.width,y:e.scrollHeight-n.height},i=e.scrollTop<=t.y,a=e.scrollLeft<=t.x,l=e.scrollTop>=s.y,o=e.scrollLeft>=s.x;return{isTop:i,isLeft:a,isBottom:l,isRight:o,maxScroll:s,minScroll:t}}const os={x:.2,y:.2};function ls(e,t,n,s,i){let{top:a,left:l,right:o,bottom:d}=n;s===void 0&&(s=10),i===void 0&&(i=os);const{isTop:p,isBottom:h,isLeft:f,isRight:y}=yn(e),g={x:0,y:0},D={x:0,y:0},b={height:t.height*i.y,width:t.width*i.x};return!p&&a<=t.top+b.height?(g.y=B.Backward,D.y=s*Math.abs((t.top+b.height-a)/b.height)):!h&&d>=t.bottom-b.height&&(g.y=B.Forward,D.y=s*Math.abs((t.bottom-b.height-d)/b.height)),!y&&o>=t.right-b.width?(g.x=B.Forward,D.x=s*Math.abs((t.right-b.width-o)/b.width)):!f&&l<=t.left+b.width&&(g.x=B.Backward,D.x=s*Math.abs((t.left+b.width-l)/b.width)),{direction:g,speed:D}}function cs(e){if(e===document.scrollingElement){const{innerWidth:a,innerHeight:l}=window;return{top:0,left:0,right:a,bottom:l,width:a,height:l}}const{top:t,left:n,right:s,bottom:i}=e.getBoundingClientRect();return{top:t,left:n,right:s,bottom:i,width:e.clientWidth,height:e.clientHeight}}function wn(e){return e.reduce((t,n)=>De(t,Ct(n)),re)}function ds(e){return e.reduce((t,n)=>t+bn(n),0)}function us(e){return e.reduce((t,n)=>t+mn(n),0)}function hs(e,t){if(t===void 0&&(t=ze),!e)return;const{top:n,left:s,bottom:i,right:a}=t(e);vn(e)&&(i<=0||a<=0||n>=window.innerHeight||s>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}const ps=[["x",["left","right"],ds],["y",["top","bottom"],us]];class _t{constructor(t,n){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const s=Tt(n),i=wn(s);this.rect={...t},this.width=t.width,this.height=t.height;for(const[a,l,o]of ps)for(const d of l)Object.defineProperty(this,d,{get:()=>{const p=o(s),h=i[a]-p;return this.rect[d]+h},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class $e{constructor(t){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(n=>{var s;return(s=this.target)==null?void 0:s.removeEventListener(...n)})},this.target=t}add(t,n,s){var i;(i=this.target)==null||i.addEventListener(t,n,s),this.listeners.push([t,n,s])}}function fs(e){const{EventTarget:t}=Y(e);return e instanceof t?e:Me(e)}function vt(e,t){const n=Math.abs(e.x),s=Math.abs(e.y);return typeof t=="number"?Math.sqrt(n**2+s**2)>t:"x"in t&&"y"in t?n>t.x&&s>t.y:"x"in t?n>t.x:"y"in t?s>t.y:!1}var te;(function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"})(te||(te={}));function Kt(e){e.preventDefault()}function gs(e){e.stopPropagation()}var T;(function(e){e.Space="Space",e.Down="ArrowDown",e.Right="ArrowRight",e.Left="ArrowLeft",e.Up="ArrowUp",e.Esc="Escape",e.Enter="Enter",e.Tab="Tab"})(T||(T={}));const jn={start:[T.Space,T.Enter],cancel:[T.Esc],end:[T.Space,T.Enter,T.Tab]},vs=(e,t)=>{let{currentCoordinates:n}=t;switch(e.code){case T.Right:return{...n,x:n.x+25};case T.Left:return{...n,x:n.x-25};case T.Down:return{...n,y:n.y+25};case T.Up:return{...n,y:n.y-25}}};class Nn{constructor(t){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=t;const{event:{target:n}}=t;this.props=t,this.listeners=new $e(Me(n)),this.windowListeners=new $e(Y(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(te.Resize,this.handleCancel),this.windowListeners.add(te.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(te.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:t,onStart:n}=this.props,s=t.node.current;s&&hs(s),n(re)}handleKeyDown(t){if(It(t)){const{active:n,context:s,options:i}=this.props,{keyboardCodes:a=jn,coordinateGetter:l=vs,scrollBehavior:o="smooth"}=i,{code:d}=t;if(a.end.includes(d)){this.handleEnd(t);return}if(a.cancel.includes(d)){this.handleCancel(t);return}const{collisionRect:p}=s.current,h=p?{x:p.left,y:p.top}:re;this.referenceCoordinates||(this.referenceCoordinates=h);const f=l(t,{active:n,context:s.current,currentCoordinates:h});if(f){const y=rt(f,h),g={x:0,y:0},{scrollableAncestors:D}=s.current;for(const b of D){const w=t.code,{isTop:k,isRight:R,isLeft:m,isBottom:S,maxScroll:E,minScroll:N}=yn(b),C=cs(b),j={x:Math.min(w===T.Right?C.right-C.width/2:C.right,Math.max(w===T.Right?C.left:C.left+C.width/2,f.x)),y:Math.min(w===T.Down?C.bottom-C.height/2:C.bottom,Math.max(w===T.Down?C.top:C.top+C.height/2,f.y))},v=w===T.Right&&!R||w===T.Left&&!m,A=w===T.Down&&!S||w===T.Up&&!k;if(v&&j.x!==f.x){const I=b.scrollLeft+y.x,U=w===T.Right&&I<=E.x||w===T.Left&&I>=N.x;if(U&&!y.y){b.scrollTo({left:I,behavior:o});return}U?g.x=b.scrollLeft-I:g.x=w===T.Right?b.scrollLeft-E.x:b.scrollLeft-N.x,g.x&&b.scrollBy({left:-g.x,behavior:o});break}else if(A&&j.y!==f.y){const I=b.scrollTop+y.y,U=w===T.Down&&I<=E.y||w===T.Up&&I>=N.y;if(U&&!y.x){b.scrollTo({top:I,behavior:o});return}U?g.y=b.scrollTop-I:g.y=w===T.Down?b.scrollTop-E.y:b.scrollTop-N.y,g.y&&b.scrollBy({top:-g.y,behavior:o});break}}this.handleMove(t,De(rt(f,this.referenceCoordinates),g))}}}handleMove(t,n){const{onMove:s}=this.props;t.preventDefault(),s(n)}handleEnd(t){const{onEnd:n}=this.props;t.preventDefault(),this.detach(),n()}handleCancel(t){const{onCancel:n}=this.props;t.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}Nn.activators=[{eventName:"onKeyDown",handler:(e,t,n)=>{let{keyboardCodes:s=jn,onActivation:i}=t,{active:a}=n;const{code:l}=e.nativeEvent;if(s.start.includes(l)){const o=a.activatorNode.current;return o&&e.target!==o?!1:(e.preventDefault(),i==null||i({event:e.nativeEvent}),!0)}return!1}}];function Qt(e){return!!(e&&"distance"in e)}function Jt(e){return!!(e&&"delay"in e)}class At{constructor(t,n,s){var i;s===void 0&&(s=fs(t.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=t,this.events=n;const{event:a}=t,{target:l}=a;this.props=t,this.events=n,this.document=Me(l),this.documentListeners=new $e(this.document),this.listeners=new $e(s),this.windowListeners=new $e(Y(l)),this.initialCoordinates=(i=Nt(a))!=null?i:re,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:t,props:{options:{activationConstraint:n,bypassActivationConstraint:s}}}=this;if(this.listeners.add(t.move.name,this.handleMove,{passive:!1}),this.listeners.add(t.end.name,this.handleEnd),t.cancel&&this.listeners.add(t.cancel.name,this.handleCancel),this.windowListeners.add(te.Resize,this.handleCancel),this.windowListeners.add(te.DragStart,Kt),this.windowListeners.add(te.VisibilityChange,this.handleCancel),this.windowListeners.add(te.ContextMenu,Kt),this.documentListeners.add(te.Keydown,this.handleKeydown),n){if(s!=null&&s({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(Jt(n)){this.timeoutId=setTimeout(this.handleStart,n.delay),this.handlePending(n);return}if(Qt(n)){this.handlePending(n);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(t,n){const{active:s,onPending:i}=this.props;i(s,t,this.initialCoordinates,n)}handleStart(){const{initialCoordinates:t}=this,{onStart:n}=this.props;t&&(this.activated=!0,this.documentListeners.add(te.Click,gs,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(te.SelectionChange,this.removeTextSelection),n(t))}handleMove(t){var n;const{activated:s,initialCoordinates:i,props:a}=this,{onMove:l,options:{activationConstraint:o}}=a;if(!i)return;const d=(n=Nt(t))!=null?n:re,p=rt(i,d);if(!s&&o){if(Qt(o)){if(o.tolerance!=null&&vt(p,o.tolerance))return this.handleCancel();if(vt(p,o.distance))return this.handleStart()}if(Jt(o)&&vt(p,o.tolerance))return this.handleCancel();this.handlePending(o,p);return}t.cancelable&&t.preventDefault(),l(d)}handleEnd(){const{onAbort:t,onEnd:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleCancel(){const{onAbort:t,onCancel:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleKeydown(t){t.code===T.Esc&&this.handleCancel()}removeTextSelection(){var t;(t=this.document.getSelection())==null||t.removeAllRanges()}}const bs={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class Lt extends At{constructor(t){const{event:n}=t,s=Me(n.target);super(t,bs,s)}}Lt.activators=[{eventName:"onPointerDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:s}=t;return!n.isPrimary||n.button!==0?!1:(s==null||s({event:n}),!0)}}];const ms={move:{name:"mousemove"},end:{name:"mouseup"}};var kt;(function(e){e[e.RightClick=2]="RightClick"})(kt||(kt={}));class xs extends At{constructor(t){super(t,ms,Me(t.event.target))}}xs.activators=[{eventName:"onMouseDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:s}=t;return n.button===kt.RightClick?!1:(s==null||s({event:n}),!0)}}];const bt={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class ys extends At{constructor(t){super(t,bt)}static setup(){return window.addEventListener(bt.move.name,t,{capture:!1,passive:!1}),function(){window.removeEventListener(bt.move.name,t)};function t(){}}}ys.activators=[{eventName:"onTouchStart",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:s}=t;const{touches:i}=n;return i.length>1?!1:(s==null||s({event:n}),!0)}}];var Fe;(function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"})(Fe||(Fe={}));var it;(function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"})(it||(it={}));function ws(e){let{acceleration:t,activator:n=Fe.Pointer,canScroll:s,draggingRect:i,enabled:a,interval:l=5,order:o=it.TreeOrder,pointerCoordinates:d,scrollableAncestors:p,scrollableAncestorRects:h,delta:f,threshold:y}=e;const g=Ns({delta:f,disabled:!a}),[D,b]=Mr(),w=c.useRef({x:0,y:0}),k=c.useRef({x:0,y:0}),R=c.useMemo(()=>{switch(n){case Fe.Pointer:return d?{top:d.y,bottom:d.y,left:d.x,right:d.x}:null;case Fe.DraggableRect:return i}},[n,i,d]),m=c.useRef(null),S=c.useCallback(()=>{const N=m.current;if(!N)return;const C=w.current.x*k.current.x,j=w.current.y*k.current.y;N.scrollBy(C,j)},[]),E=c.useMemo(()=>o===it.TreeOrder?[...p].reverse():p,[o,p]);c.useEffect(()=>{if(!a||!p.length||!R){b();return}for(const N of E){if((s==null?void 0:s(N))===!1)continue;const C=p.indexOf(N),j=h[C];if(!j)continue;const{direction:v,speed:A}=ls(N,j,R,t,y);for(const I of["x","y"])g[I][v[I]]||(A[I]=0,v[I]=0);if(A.x>0||A.y>0){b(),m.current=N,D(S,l),w.current=A,k.current=v;return}}w.current={x:0,y:0},k.current={x:0,y:0},b()},[t,S,s,b,a,l,JSON.stringify(R),JSON.stringify(g),D,p,E,h,JSON.stringify(y)])}const js={x:{[B.Backward]:!1,[B.Forward]:!1},y:{[B.Backward]:!1,[B.Forward]:!1}};function Ns(e){let{delta:t,disabled:n}=e;const s=jt(t);return He(i=>{if(n||!s||!i)return js;const a={x:Math.sign(t.x-s.x),y:Math.sign(t.y-s.y)};return{x:{[B.Backward]:i.x[B.Backward]||a.x===-1,[B.Forward]:i.x[B.Forward]||a.x===1},y:{[B.Backward]:i.y[B.Backward]||a.y===-1,[B.Forward]:i.y[B.Forward]||a.y===1}}},[n,t,s])}function Cs(e,t){const n=t!=null?e.get(t):void 0,s=n?n.node.current:null;return He(i=>{var a;return t==null?null:(a=s??i)!=null?a:null},[s,t])}function ks(e,t){return c.useMemo(()=>e.reduce((n,s)=>{const{sensor:i}=s,a=i.activators.map(l=>({eventName:l.eventName,handler:t(l.handler,s)}));return[...n,...a]},[]),[e,t])}var Ve;(function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"})(Ve||(Ve={}));var St;(function(e){e.Optimized="optimized"})(St||(St={}));const Zt=new Map;function Ss(e,t){let{dragging:n,dependencies:s,config:i}=t;const[a,l]=c.useState(null),{frequency:o,measure:d,strategy:p}=i,h=c.useRef(e),f=w(),y=Ue(f),g=c.useCallback(function(k){k===void 0&&(k=[]),!y.current&&l(R=>R===null?k:R.concat(k.filter(m=>!R.includes(m))))},[y]),D=c.useRef(null),b=He(k=>{if(f&&!n)return Zt;if(!k||k===Zt||h.current!==e||a!=null){const R=new Map;for(let m of e){if(!m)continue;if(a&&a.length>0&&!a.includes(m.id)&&m.rect.current){R.set(m.id,m.rect.current);continue}const S=m.node.current,E=S?new _t(d(S),S):null;m.rect.current=E,E&&R.set(m.id,E)}return R}return k},[e,a,n,f,d]);return c.useEffect(()=>{h.current=e},[e]),c.useEffect(()=>{f||g()},[n,f]),c.useEffect(()=>{a&&a.length>0&&l(null)},[JSON.stringify(a)]),c.useEffect(()=>{f||typeof o!="number"||D.current!==null||(D.current=setTimeout(()=>{g(),D.current=null},o))},[o,f,g,...s]),{droppableRects:b,measureDroppableContainers:g,measuringScheduled:a!=null};function w(){switch(p){case Ve.Always:return!1;case Ve.BeforeDragging:return n;default:return!n}}}function Cn(e,t){return He(n=>e?n||(typeof t=="function"?t(e):e):null,[t,e])}function Ds(e,t){return Cn(e,t)}function Rs(e){let{callback:t,disabled:n}=e;const s=zt(t),i=c.useMemo(()=>{if(n||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:a}=window;return new a(s)},[s,n]);return c.useEffect(()=>()=>i==null?void 0:i.disconnect(),[i]),i}function ot(e){let{callback:t,disabled:n}=e;const s=zt(t),i=c.useMemo(()=>{if(n||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:a}=window;return new a(s)},[n]);return c.useEffect(()=>()=>i==null?void 0:i.disconnect(),[i]),i}function Es(e){return new _t(ze(e),e)}function en(e,t,n){t===void 0&&(t=Es);const[s,i]=c.useState(null);function a(){i(d=>{if(!e)return null;if(e.isConnected===!1){var p;return(p=d??n)!=null?p:null}const h=t(e);return JSON.stringify(d)===JSON.stringify(h)?d:h})}const l=Rs({callback(d){if(e)for(const p of d){const{type:h,target:f}=p;if(h==="childList"&&f instanceof HTMLElement&&f.contains(e)){a();break}}}}),o=ot({callback:a});return oe(()=>{a(),e?(o==null||o.observe(e),l==null||l.observe(document.body,{childList:!0,subtree:!0})):(o==null||o.disconnect(),l==null||l.disconnect())},[e]),s}function Ms(e){const t=Cn(e);return gn(e,t)}const tn=[];function zs(e){const t=c.useRef(e),n=He(s=>e?s&&s!==tn&&e&&t.current&&e.parentNode===t.current.parentNode?s:Tt(e):tn,[e]);return c.useEffect(()=>{t.current=e},[e]),n}function Is(e){const[t,n]=c.useState(null),s=c.useRef(e),i=c.useCallback(a=>{const l=gt(a.target);l&&n(o=>o?(o.set(l,Ct(l)),new Map(o)):null)},[]);return c.useEffect(()=>{const a=s.current;if(e!==a){l(a);const o=e.map(d=>{const p=gt(d);return p?(p.addEventListener("scroll",i,{passive:!0}),[p,Ct(p)]):null}).filter(d=>d!=null);n(o.length?new Map(o):null),s.current=e}return()=>{l(e),l(a)};function l(o){o.forEach(d=>{const p=gt(d);p==null||p.removeEventListener("scroll",i)})}},[i,e]),c.useMemo(()=>e.length?t?Array.from(t.values()).reduce((a,l)=>De(a,l),re):wn(e):re,[e,t])}function nn(e,t){t===void 0&&(t=[]);const n=c.useRef(null);return c.useEffect(()=>{n.current=null},t),c.useEffect(()=>{const s=e!==re;s&&!n.current&&(n.current=e),!s&&n.current&&(n.current=null)},[e]),n.current?rt(e,n.current):re}function Ts(e){c.useEffect(()=>{if(!at)return;const t=e.map(n=>{let{sensor:s}=n;return s.setup==null?void 0:s.setup()});return()=>{for(const n of t)n==null||n()}},e.map(t=>{let{sensor:n}=t;return n}))}function _s(e,t){return c.useMemo(()=>e.reduce((n,s)=>{let{eventName:i,handler:a}=s;return n[i]=l=>{a(l,t)},n},{}),[e,t])}function kn(e){return c.useMemo(()=>e?ss(e):null,[e])}const rn=[];function As(e,t){t===void 0&&(t=ze);const[n]=e,s=kn(n?Y(n):null),[i,a]=c.useState(rn);function l(){a(()=>e.length?e.map(d=>xn(d)?s:new _t(t(d),d)):rn)}const o=ot({callback:l});return oe(()=>{o==null||o.disconnect(),l(),e.forEach(d=>o==null?void 0:o.observe(d))},[e]),i}function Ls(e){if(!e)return null;if(e.children.length>1)return e;const t=e.children[0];return Xe(t)?t:e}function Os(e){let{measure:t}=e;const[n,s]=c.useState(null),i=c.useCallback(p=>{for(const{target:h}of p)if(Xe(h)){s(f=>{const y=t(h);return f?{...f,width:y.width,height:y.height}:y});break}},[t]),a=ot({callback:i}),l=c.useCallback(p=>{const h=Ls(p);a==null||a.disconnect(),h&&(a==null||a.observe(h)),s(h?t(h):null)},[t,a]),[o,d]=nt(l);return c.useMemo(()=>({nodeRef:o,rect:n,setRef:d}),[n,o,d])}const Ps=[{sensor:Lt,options:{}},{sensor:Nn,options:{}}],$s={current:{}},Ze={draggable:{measure:Gt},droppable:{measure:Gt,strategy:Ve.WhileDragging,frequency:St.Optimized},dragOverlay:{measure:ze}};class Be extends Map{get(t){var n;return t!=null&&(n=super.get(t))!=null?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(t=>{let{disabled:n}=t;return!n})}getNodeFor(t){var n,s;return(n=(s=this.get(t))==null?void 0:s.node.current)!=null?n:void 0}}const Fs={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new Be,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:st},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:Ze,measureDroppableContainers:st,windowRect:null,measuringScheduled:!1},Bs={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:st,draggableNodes:new Map,over:null,measureDroppableContainers:st},lt=c.createContext(Bs),Sn=c.createContext(Fs);function Us(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new Be}}}function qs(e,t){switch(t.type){case F.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:t.initialCoordinates,active:t.active}};case F.DragMove:return e.draggable.active==null?e:{...e,draggable:{...e.draggable,translate:{x:t.coordinates.x-e.draggable.initialCoordinates.x,y:t.coordinates.y-e.draggable.initialCoordinates.y}}};case F.DragEnd:case F.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case F.RegisterDroppable:{const{element:n}=t,{id:s}=n,i=new Be(e.droppable.containers);return i.set(s,n),{...e,droppable:{...e.droppable,containers:i}}}case F.SetDroppableDisabled:{const{id:n,key:s,disabled:i}=t,a=e.droppable.containers.get(n);if(!a||s!==a.key)return e;const l=new Be(e.droppable.containers);return l.set(n,{...a,disabled:i}),{...e,droppable:{...e.droppable,containers:l}}}case F.UnregisterDroppable:{const{id:n,key:s}=t,i=e.droppable.containers.get(n);if(!i||s!==i.key)return e;const a=new Be(e.droppable.containers);return a.delete(n),{...e,droppable:{...e.droppable,containers:a}}}default:return e}}function Vs(e){let{disabled:t}=e;const{active:n,activatorEvent:s,draggableNodes:i}=c.useContext(lt),a=jt(s),l=jt(n==null?void 0:n.id);return c.useEffect(()=>{if(!t&&!s&&a&&l!=null){if(!It(a)||document.activeElement===a.target)return;const o=i.get(l);if(!o)return;const{activatorNode:d,node:p}=o;if(!d.current&&!p.current)return;requestAnimationFrame(()=>{for(const h of[d.current,p.current]){if(!h)continue;const f=Tr(h);if(f){f.focus();break}}})}},[s,t,i,l,a]),null}function Xs(e,t){let{transform:n,...s}=t;return e!=null&&e.length?e.reduce((i,a)=>a({transform:i,...s}),n):n}function Hs(e){return c.useMemo(()=>({draggable:{...Ze.draggable,...e==null?void 0:e.draggable},droppable:{...Ze.droppable,...e==null?void 0:e.droppable},dragOverlay:{...Ze.dragOverlay,...e==null?void 0:e.dragOverlay}}),[e==null?void 0:e.draggable,e==null?void 0:e.droppable,e==null?void 0:e.dragOverlay])}function Ys(e){let{activeNode:t,measure:n,initialRect:s,config:i=!0}=e;const a=c.useRef(!1),{x:l,y:o}=typeof i=="boolean"?{x:i,y:i}:i;oe(()=>{if(!l&&!o||!t){a.current=!1;return}if(a.current||!s)return;const p=t==null?void 0:t.node.current;if(!p||p.isConnected===!1)return;const h=n(p),f=gn(h,s);if(l||(f.x=0),o||(f.y=0),a.current=!0,Math.abs(f.x)>0||Math.abs(f.y)>0){const y=vn(p);y&&y.scrollBy({top:f.y,left:f.x})}},[t,l,o,s,n])}const Dn=c.createContext({...re,scaleX:1,scaleY:1});var xe;(function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"})(xe||(xe={}));const Ws=c.memo(function(t){var n,s,i,a;let{id:l,accessibility:o,autoScroll:d=!0,children:p,sensors:h=Ps,collisionDetection:f=Qr,measuring:y,modifiers:g,...D}=t;const b=c.useReducer(qs,void 0,Us),[w,k]=b,[R,m]=$r(),[S,E]=c.useState(xe.Uninitialized),N=S===xe.Initialized,{draggable:{active:C,nodes:j,translate:v},droppable:{containers:A}}=w,I=C!=null?j.get(C):null,U=c.useRef({initial:null,translated:null}),H=c.useMemo(()=>{var X;return C!=null?{id:C,data:(X=I==null?void 0:I.data)!=null?X:$s,rect:U}:null},[C,I]),Q=c.useRef(null),[ue,ye]=c.useState(null),[u,x]=c.useState(null),M=Ue(D,Object.values(D)),P=Ye("DndDescribedBy",l),q=c.useMemo(()=>A.getEnabled(),[A]),z=Hs(y),{droppableRects:L,measureDroppableContainers:$,measuringScheduled:he}=Ss(q,{dragging:N,dependencies:[v.x,v.y],config:z.droppable}),J=Cs(j,C),We=c.useMemo(()=>u?Nt(u):null,[u]),pe=$n(),le=Ds(J,z.draggable.measure);Ys({activeNode:C!=null?j.get(C):null,config:pe.layoutShiftCompensation,initialRect:le,measure:z.draggable.measure});const _=en(J,z.draggable.measure,le),Ie=en(J?J.parentElement:null),se=c.useRef({activatorEvent:null,active:null,activeNode:J,collisionRect:null,collisions:null,droppableRects:L,draggableNodes:j,draggingNode:null,draggingNodeRect:null,droppableContainers:A,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),we=A.getNodeFor((n=se.current.over)==null?void 0:n.id),ce=Os({measure:z.dragOverlay.measure}),je=(s=ce.nodeRef.current)!=null?s:J,Ne=N?(i=ce.rect)!=null?i:_:null,Pt=!!(ce.nodeRef.current&&ce.rect),$t=Ms(Pt?null:_),ct=kn(je?Y(je):null),fe=zs(N?we??J:null),Ge=As(fe),Ke=Xs(g,{transform:{x:v.x-$t.x,y:v.y-$t.y,scaleX:1,scaleY:1},activatorEvent:u,active:H,activeNodeRect:_,containerNodeRect:Ie,draggingNodeRect:Ne,over:se.current.over,overlayNodeRect:ce.rect,scrollableAncestors:fe,scrollableAncestorRects:Ge,windowRect:ct}),Ft=We?De(We,v):null,Bt=Is(fe),In=nn(Bt),Tn=nn(Bt,[_]),Ce=De(Ke,In),ke=Ne?es(Ne,Ke):null,Te=H&&ke?f({active:H,collisionRect:ke,droppableRects:L,droppableContainers:q,pointerCoordinates:Ft}):null,Ut=Wr(Te,"id"),[ge,qt]=c.useState(null),_n=Pt?Ke:De(Ke,Tn),An=Jr(_n,(a=ge==null?void 0:ge.rect)!=null?a:null,_),dt=c.useRef(null),Vt=c.useCallback((X,W)=>{let{sensor:G,options:ve}=W;if(Q.current==null)return;const Z=j.get(Q.current);if(!Z)return;const K=X.nativeEvent,ie=new G({active:Q.current,activeNode:Z,event:K,options:ve,context:se,onAbort(V){if(!j.get(V))return;const{onDragAbort:ae}=M.current,de={id:V};ae==null||ae(de),R({type:"onDragAbort",event:de})},onPending(V,be,ae,de){if(!j.get(V))return;const{onDragPending:Ae}=M.current,me={id:V,constraint:be,initialCoordinates:ae,offset:de};Ae==null||Ae(me),R({type:"onDragPending",event:me})},onStart(V){const be=Q.current;if(be==null)return;const ae=j.get(be);if(!ae)return;const{onDragStart:de}=M.current,_e={activatorEvent:K,active:{id:be,data:ae.data,rect:U}};Oe.unstable_batchedUpdates(()=>{de==null||de(_e),E(xe.Initializing),k({type:F.DragStart,initialCoordinates:V,active:be}),R({type:"onDragStart",event:_e}),ye(dt.current),x(K)})},onMove(V){k({type:F.DragMove,coordinates:V})},onEnd:Se(F.DragEnd),onCancel:Se(F.DragCancel)});dt.current=ie;function Se(V){return async function(){const{active:ae,collisions:de,over:_e,scrollAdjustedTranslate:Ae}=se.current;let me=null;if(ae&&Ae){const{cancelDrop:Le}=M.current;me={activatorEvent:K,active:ae,collisions:de,delta:Ae,over:_e},V===F.DragEnd&&typeof Le=="function"&&await Promise.resolve(Le(me))&&(V=F.DragCancel)}Q.current=null,Oe.unstable_batchedUpdates(()=>{k({type:V}),E(xe.Uninitialized),qt(null),ye(null),x(null),dt.current=null;const Le=V===F.DragEnd?"onDragEnd":"onDragCancel";if(me){const ut=M.current[Le];ut==null||ut(me),R({type:Le,event:me})}})}}},[j]),Ln=c.useCallback((X,W)=>(G,ve)=>{const Z=G.nativeEvent,K=j.get(ve);if(Q.current!==null||!K||Z.dndKit||Z.defaultPrevented)return;const ie={active:K};X(G,W.options,ie)===!0&&(Z.dndKit={capturedBy:W.sensor},Q.current=ve,Vt(G,W))},[j,Vt]),Xt=ks(h,Ln);Ts(h),oe(()=>{_&&S===xe.Initializing&&E(xe.Initialized)},[_,S]),c.useEffect(()=>{const{onDragMove:X}=M.current,{active:W,activatorEvent:G,collisions:ve,over:Z}=se.current;if(!W||!G)return;const K={active:W,activatorEvent:G,collisions:ve,delta:{x:Ce.x,y:Ce.y},over:Z};Oe.unstable_batchedUpdates(()=>{X==null||X(K),R({type:"onDragMove",event:K})})},[Ce.x,Ce.y]),c.useEffect(()=>{const{active:X,activatorEvent:W,collisions:G,droppableContainers:ve,scrollAdjustedTranslate:Z}=se.current;if(!X||Q.current==null||!W||!Z)return;const{onDragOver:K}=M.current,ie=ve.get(Ut),Se=ie&&ie.rect.current?{id:ie.id,rect:ie.rect.current,data:ie.data,disabled:ie.disabled}:null,V={active:X,activatorEvent:W,collisions:G,delta:{x:Z.x,y:Z.y},over:Se};Oe.unstable_batchedUpdates(()=>{qt(Se),K==null||K(V),R({type:"onDragOver",event:V})})},[Ut]),oe(()=>{se.current={activatorEvent:u,active:H,activeNode:J,collisionRect:ke,collisions:Te,droppableRects:L,draggableNodes:j,draggingNode:je,draggingNodeRect:Ne,droppableContainers:A,over:ge,scrollableAncestors:fe,scrollAdjustedTranslate:Ce},U.current={initial:Ne,translated:ke}},[H,J,Te,ke,j,je,Ne,L,A,ge,fe,Ce]),ws({...pe,delta:v,draggingRect:ke,pointerCoordinates:Ft,scrollableAncestors:fe,scrollableAncestorRects:Ge});const On=c.useMemo(()=>({active:H,activeNode:J,activeNodeRect:_,activatorEvent:u,collisions:Te,containerNodeRect:Ie,dragOverlay:ce,draggableNodes:j,droppableContainers:A,droppableRects:L,over:ge,measureDroppableContainers:$,scrollableAncestors:fe,scrollableAncestorRects:Ge,measuringConfiguration:z,measuringScheduled:he,windowRect:ct}),[H,J,_,u,Te,Ie,ce,j,A,L,ge,$,fe,Ge,z,he,ct]),Pn=c.useMemo(()=>({activatorEvent:u,activators:Xt,active:H,activeNodeRect:_,ariaDescribedById:{draggable:P},dispatch:k,draggableNodes:j,over:ge,measureDroppableContainers:$}),[u,Xt,H,_,k,P,j,ge,$]);return O.createElement(fn.Provider,{value:m},O.createElement(lt.Provider,{value:Pn},O.createElement(Sn.Provider,{value:On},O.createElement(Dn.Provider,{value:An},p)),O.createElement(Vs,{disabled:(o==null?void 0:o.restoreFocus)===!1})),O.createElement(Ur,{...o,hiddenTextDescribedById:P}));function $n(){const X=(ue==null?void 0:ue.autoScrollEnabled)===!1,W=typeof d=="object"?d.enabled===!1:d===!1,G=N&&!X&&!W;return typeof d=="object"?{...d,enabled:G}:{enabled:G}}}),Gs=c.createContext(null),sn="button",Ks="Draggable";function Qs(e){let{id:t,data:n,disabled:s=!1,attributes:i}=e;const a=Ye(Ks),{activators:l,activatorEvent:o,active:d,activeNodeRect:p,ariaDescribedById:h,draggableNodes:f,over:y}=c.useContext(lt),{role:g=sn,roleDescription:D="draggable",tabIndex:b=0}=i??{},w=(d==null?void 0:d.id)===t,k=c.useContext(w?Dn:Gs),[R,m]=nt(),[S,E]=nt(),N=_s(l,t),C=Ue(n);oe(()=>(f.set(t,{id:t,key:a,node:R,activatorNode:S,data:C}),()=>{const v=f.get(t);v&&v.key===a&&f.delete(t)}),[f,t]);const j=c.useMemo(()=>({role:g,tabIndex:b,"aria-disabled":s,"aria-pressed":w&&g===sn?!0:void 0,"aria-roledescription":D,"aria-describedby":h.draggable}),[s,g,b,w,D,h.draggable]);return{active:d,activatorEvent:o,activeNodeRect:p,attributes:j,isDragging:w,listeners:s?void 0:N,node:R,over:y,setNodeRef:m,setActivatorNodeRef:E,transform:k}}function Js(){return c.useContext(Sn)}const Zs="Droppable",ei={timeout:25};function ti(e){let{data:t,disabled:n=!1,id:s,resizeObserverConfig:i}=e;const a=Ye(Zs),{active:l,dispatch:o,over:d,measureDroppableContainers:p}=c.useContext(lt),h=c.useRef({disabled:n}),f=c.useRef(!1),y=c.useRef(null),g=c.useRef(null),{disabled:D,updateMeasurementsFor:b,timeout:w}={...ei,...i},k=Ue(b??s),R=c.useCallback(()=>{if(!f.current){f.current=!0;return}g.current!=null&&clearTimeout(g.current),g.current=setTimeout(()=>{p(Array.isArray(k.current)?k.current:[k.current]),g.current=null},w)},[w]),m=ot({callback:R,disabled:D||!l}),S=c.useCallback((j,v)=>{m&&(v&&(m.unobserve(v),f.current=!1),j&&m.observe(j))},[m]),[E,N]=nt(S),C=Ue(t);return c.useEffect(()=>{!m||!E.current||(m.disconnect(),f.current=!1,m.observe(E.current))},[E,m]),c.useEffect(()=>(o({type:F.RegisterDroppable,element:{id:s,key:a,disabled:n,node:E,rect:y,data:C}}),()=>o({type:F.UnregisterDroppable,key:a,id:s})),[s]),c.useEffect(()=>{n!==h.current.disabled&&(o({type:F.SetDroppableDisabled,id:s,key:a,disabled:n}),h.current.disabled=n)},[s,a,n,o]),{active:l,rect:y,isOver:(d==null?void 0:d.id)===s,node:E,over:d,setNodeRef:N}}function Ot(e,t,n){const s=e.slice();return s.splice(n<0?s.length+n:n,0,s.splice(t,1)[0]),s}function ni(e,t){return e.reduce((n,s,i)=>{const a=t.get(s);return a&&(n[i]=a),n},Array(e.length))}function Qe(e){return e!==null&&e>=0}function ri(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function si(e){return typeof e=="boolean"?{draggable:e,droppable:e}:e}const Rn=e=>{let{rects:t,activeIndex:n,overIndex:s,index:i}=e;const a=Ot(t,s,n),l=t[i],o=a[i];return!o||!l?null:{x:o.left-l.left,y:o.top-l.top,scaleX:o.width/l.width,scaleY:o.height/l.height}},Je={scaleX:1,scaleY:1},ii=e=>{var t;let{activeIndex:n,activeNodeRect:s,index:i,rects:a,overIndex:l}=e;const o=(t=a[n])!=null?t:s;if(!o)return null;if(i===n){const p=a[l];return p?{x:0,y:n<l?p.top+p.height-(o.top+o.height):p.top-o.top,...Je}:null}const d=ai(a,i,n);return i>n&&i<=l?{x:0,y:-o.height-d,...Je}:i<n&&i>=l?{x:0,y:o.height+d,...Je}:{x:0,y:0,...Je}};function ai(e,t,n){const s=e[t],i=e[t-1],a=e[t+1];return s?n<t?i?s.top-(i.top+i.height):a?a.top-(s.top+s.height):0:a?a.top-(s.top+s.height):i?s.top-(i.top+i.height):0:0}const En="Sortable",Mn=O.createContext({activeIndex:-1,containerId:En,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:Rn,disabled:{draggable:!1,droppable:!1}});function oi(e){let{children:t,id:n,items:s,strategy:i=Rn,disabled:a=!1}=e;const{active:l,dragOverlay:o,droppableRects:d,over:p,measureDroppableContainers:h}=Js(),f=Ye(En,n),y=o.rect!==null,g=c.useMemo(()=>s.map(N=>typeof N=="object"&&"id"in N?N.id:N),[s]),D=l!=null,b=l?g.indexOf(l.id):-1,w=p?g.indexOf(p.id):-1,k=c.useRef(g),R=!ri(g,k.current),m=w!==-1&&b===-1||R,S=si(a);oe(()=>{R&&D&&h(g)},[R,g,D,h]),c.useEffect(()=>{k.current=g},[g]);const E=c.useMemo(()=>({activeIndex:b,containerId:f,disabled:S,disableTransforms:m,items:g,overIndex:w,useDragOverlay:y,sortedRects:ni(g,d),strategy:i}),[b,f,S.draggable,S.droppable,m,g,w,d,y,i]);return O.createElement(Mn.Provider,{value:E},t)}const li=e=>{let{id:t,items:n,activeIndex:s,overIndex:i}=e;return Ot(n,s,i).indexOf(t)},ci=e=>{let{containerId:t,isSorting:n,wasDragging:s,index:i,items:a,newIndex:l,previousItems:o,previousContainerId:d,transition:p}=e;return!p||!s||o!==a&&i===l?!1:n?!0:l!==i&&t===d},di={duration:200,easing:"ease"},zn="transform",ui=qe.Transition.toString({property:zn,duration:0,easing:"linear"}),hi={roleDescription:"sortable"};function pi(e){let{disabled:t,index:n,node:s,rect:i}=e;const[a,l]=c.useState(null),o=c.useRef(n);return oe(()=>{if(!t&&n!==o.current&&s.current){const d=i.current;if(d){const p=ze(s.current,{ignoreTransform:!0}),h={x:d.left-p.left,y:d.top-p.top,scaleX:d.width/p.width,scaleY:d.height/p.height};(h.x||h.y)&&l(h)}}n!==o.current&&(o.current=n)},[t,n,s,i]),c.useEffect(()=>{a&&l(null)},[a]),a}function fi(e){let{animateLayoutChanges:t=ci,attributes:n,disabled:s,data:i,getNewIndex:a=li,id:l,strategy:o,resizeObserverConfig:d,transition:p=di}=e;const{items:h,containerId:f,activeIndex:y,disabled:g,disableTransforms:D,sortedRects:b,overIndex:w,useDragOverlay:k,strategy:R}=c.useContext(Mn),m=gi(s,g),S=h.indexOf(l),E=c.useMemo(()=>({sortable:{containerId:f,index:S,items:h},...i}),[f,i,S,h]),N=c.useMemo(()=>h.slice(h.indexOf(l)),[h,l]),{rect:C,node:j,isOver:v,setNodeRef:A}=ti({id:l,data:E,disabled:m.droppable,resizeObserverConfig:{updateMeasurementsFor:N,...d}}),{active:I,activatorEvent:U,activeNodeRect:H,attributes:Q,setNodeRef:ue,listeners:ye,isDragging:u,over:x,setActivatorNodeRef:M,transform:P}=Qs({id:l,data:E,attributes:{...hi,...n},disabled:m.draggable}),q=Er(A,ue),z=!!I,L=z&&!D&&Qe(y)&&Qe(w),$=!k&&u,he=$&&L?P:null,We=L?he??(o??R)({rects:b,activeNodeRect:H,activeIndex:y,overIndex:w,index:S}):null,pe=Qe(y)&&Qe(w)?a({id:l,items:h,activeIndex:y,overIndex:w}):S,le=I==null?void 0:I.id,_=c.useRef({activeId:le,items:h,newIndex:pe,containerId:f}),Ie=h!==_.current.items,se=t({active:I,containerId:f,isDragging:u,isSorting:z,id:l,index:S,items:h,newIndex:_.current.newIndex,previousItems:_.current.items,previousContainerId:_.current.containerId,transition:p,wasDragging:_.current.activeId!=null}),we=pi({disabled:!se,index:S,node:j,rect:C});return c.useEffect(()=>{z&&_.current.newIndex!==pe&&(_.current.newIndex=pe),f!==_.current.containerId&&(_.current.containerId=f),h!==_.current.items&&(_.current.items=h)},[z,pe,f,h]),c.useEffect(()=>{if(le===_.current.activeId)return;if(le!=null&&_.current.activeId==null){_.current.activeId=le;return}const je=setTimeout(()=>{_.current.activeId=le},50);return()=>clearTimeout(je)},[le]),{active:I,activeIndex:y,attributes:Q,data:E,rect:C,index:S,newIndex:pe,items:h,isOver:v,isSorting:z,isDragging:u,listeners:ye,node:j,overIndex:w,over:x,setNodeRef:q,setActivatorNodeRef:M,setDroppableNodeRef:A,setDraggableNodeRef:ue,transform:we??We,transition:ce()};function ce(){if(we||Ie&&_.current.newIndex===S)return ui;if(!($&&!It(U)||!p)&&(z||se))return qe.Transition.toString({...p,property:zn})}}function gi(e,t){var n,s;return typeof e=="boolean"?{draggable:e,droppable:!1}:{draggable:(n=e==null?void 0:e.draggable)!=null?n:t.draggable,droppable:(s=e==null?void 0:e.droppable)!=null?s:t.droppable}}T.Down,T.Right,T.Up,T.Left;function Ni(){var ue,ye;const[e,t]=c.useState(null),[n,s]=c.useState(!0),[i,a]=c.useState("links"),[l,o]=c.useState(!1),[d,p]=c.useState(!1),h=qn(),{confirm:f,ConfirmDialog:y}=Vn(),[g,D]=c.useState(null),[b,w]=c.useState([]),k=Vr(qr(Lt,{activationConstraint:{distance:5}}));c.useEffect(()=>{R()},[]);const R=async()=>{try{const{data:{user:u}}=await Xn.auth.getUser();if(u){const x=await ee.getOrCreateProfile(u);t(x)}}catch(u){console.error(u)}finally{s(!1)}};c.useEffect(()=>{e!=null&&e.id&&ee.getAchievements(e.id).then(w)},[e==null?void 0:e.id]),c.useEffect(()=>{const u=x=>{(x.metaKey||x.ctrlKey)&&x.key==="s"&&(x.preventDefault(),h.success("✓ Cambios guardados automáticamente")),(x.metaKey||x.ctrlKey)&&x.key==="k"&&(x.preventDefault(),N()),x.key==="Escape"&&g&&D(null)};return window.addEventListener("keydown",u),()=>window.removeEventListener("keydown",u)},[g,e]);const m=async(u,x)=>{if(e){t({...e,[u]:x}),o(!0);try{await ee.updateProfile(e.id,{[u]:x})}catch(M){console.error("Error saving profile:",M),h.error("Error al guardar el perfil")}setTimeout(()=>o(!1),500)}},S=O.useRef(new Map),E=O.useRef(new Map),N=async()=>{var M;if(!e)return;const u="temp-"+Date.now(),x={id:u,title:"Nuevo enlace",url:"",active:!0,clicks:0,block_type:"link",order_index:(((M=e.links)==null?void 0:M.length)||0)+1};t({...e,links:[...e.links,x]}),D(u);try{const P=await ee.addLink(e.id,"Nuevo enlace","");if(P){E.current.set(u,P.id);const q=S.current.get(u);q&&(await ee.updateLink(P.id,q),S.current.delete(u)),t(z=>z&&{...z,links:z.links.map(L=>L.id===u?{...P,...q||{}}:L)}),D(P.id),h.success("Enlace creado")}else h.error("Error al crear enlace")}catch(P){console.error("Error creating link:",P),h.error("Error al crear enlace")}},C=async u=>{var q;if(!e)return;const x="temp-"+Date.now(),M={header:"Nuevo Header",divider:"---",spotlight:"⭐ Destacado"},P={id:x,title:M[u],url:u==="divider"?"":"#",active:!0,clicks:0,block_type:u,order_index:(((q=e.links)==null?void 0:q.length)||0)+1};t({...e,links:[...e.links,P]}),u!=="divider"&&D(x);try{const z=await ee.addLink(e.id,M[u],u==="divider"?"":"#",{block_type:u});if(z){E.current.set(x,z.id);const L=S.current.get(x);L&&(await ee.updateLink(z.id,L),S.current.delete(x)),t($=>$&&{...$,links:$.links.map(he=>he.id===x?{...z,...L||{}}:he)}),u!=="divider"&&D(z.id)}}catch(z){console.error("Error creating block:",z),h.error("Error al crear bloque")}},j=O.useRef(new Map),v=async(u,x,M)=>{if(!e)return;const P=e.links.map($=>$.id===u?{...$,[x]:M}:$);if(t({...e,links:P}),u.startsWith("temp-")){const $=S.current.get(u)||{};S.current.set(u,{...$,[x]:M});return}const q=`${u}-${x}`,z=j.current.get(q);z&&clearTimeout(z);const L=setTimeout(async()=>{try{await ee.updateLink(u,{[x]:M}),j.current.delete(q)}catch($){console.error("Error updating link:",$),h.error("Error al guardar enlace")}},500);j.current.set(q,L)},A=async u=>{!e||!await f("Eliminar enlace","¿Estás seguro de que quieres eliminar este enlace permanentemente?","danger")||(t({...e,links:e.links.filter(M=>M.id!==u)}),await ee.deleteLink(u),h.success("Enlace eliminado"))},I=async u=>{if(!e)return;const{active:x,over:M}=u;if(!M||x.id===M.id)return;const P=e.links.findIndex(L=>L.id===x.id),q=e.links.findIndex(L=>L.id===M.id),z=Ot(e.links,P,q).map((L,$)=>({...L,order_index:$}));t({...e,links:z}),await ee.reorderLinks(z),h.success("Orden actualizado")},U=async(u,x)=>{await v(u,"active",x),h.success(x?"Enlace activado":"Enlace desactivado")},H=async(u,x)=>{var M;if(!(!e||!((M=u.target.files)!=null&&M[0])))try{o(!0);const P=await ee.uploadImage(u.target.files[0],e.user_id,x);x==="avatar"?m("avatar_url",P):(m("background_url",P),m("theme","custom"))}catch{h.error("Error al subir imagen")}finally{o(!1)}},Q=async(u,x)=>{if(e)try{const M=await ee.uploadImage(x,e.user_id,"thumbnail");await v(u,"thumbnail_url",M)}catch(M){console.error("Thumbnail upload failed:",M),h.error("Error al subir miniatura")}};return n?r.jsx("div",{className:"h-screen w-full bg-slate-950 flex items-center justify-center",children:r.jsx(mt,{className:"animate-spin text-blue-500"})}):e?r.jsxs("div",{className:"lp-bio-shell-v3",children:[r.jsxs("button",{className:"lp-preview-fab md:hidden",onClick:()=>p(!0),children:[r.jsx(xt,{size:18}),r.jsx("span",{children:"Vista Previa"})]}),d&&r.jsx("div",{className:"lp-preview-modal-overlay",onClick:()=>p(!1),children:r.jsxs("div",{className:"lp-preview-modal",onClick:u=>u.stopPropagation(),children:[r.jsxs("div",{className:"lp-preview-modal-header",children:[r.jsx("span",{children:"Vista Previa en Vivo"}),r.jsx("button",{onClick:()=>p(!1),children:"✕"})]}),r.jsx("div",{className:"lp-preview-modal-frame",children:r.jsx(an,{profile:e})})]})}),r.jsxs("div",{className:"lp-container",children:[r.jsxs("div",{className:"lp-editor-col",children:[r.jsxs("div",{className:"lp-nav",children:[r.jsxs("div",{className:"lp-logo text-white",children:[r.jsx(xr,{size:20,className:"text-blue-500"}),"LinkPay"]}),r.jsxs("div",{className:"lp-global-stats",children:[r.jsxs("div",{className:"lp-stat-pill",children:[r.jsx(xt,{size:14}),r.jsx("span",{children:e.views||0})]}),r.jsxs("div",{className:"lp-stat-pill",children:[r.jsx(et,{size:14}),r.jsx("span",{children:((ue=e.links)==null?void 0:ue.reduce((u,x)=>u+(x.clicks||0),0))||0})]})]}),r.jsxs("div",{className:"lp-nav-actions",children:[l&&r.jsxs("div",{className:"lp-saving-indicator",children:[r.jsx(mt,{size:12,className:"animate-spin"}),r.jsx("span",{children:"Guardando"})]}),r.jsxs("button",{className:"lp-btn-basic lp-btn-publish",onClick:async()=>{o(!0),await new Promise(u=>setTimeout(u,500)),o(!1),h.success("¡Cambios publicados!")},children:[r.jsx(tt,{size:14})," Publicar"]}),r.jsxs("button",{className:"lp-btn-basic lp-btn-primary",onClick:async()=>{const u=`${window.location.origin}/b/${e.username}`;await navigator.clipboard.writeText(u),h.success("URL copiada al portapapeles")},children:[r.jsx(cn,{size:14})," Compartir"]})]})]}),r.jsx("div",{className:"lp-tabs-container",children:r.jsxs("div",{className:"lp-tabs-list",role:"tablist","aria-label":"Editor sections",children:[r.jsx("button",{role:"tab","aria-selected":i==="links",className:`lp-tab ${i==="links"?"active":""}`,onClick:()=>a("links"),children:"Enlaces"}),r.jsx("button",{role:"tab","aria-selected":i==="appearance",className:`lp-tab ${i==="appearance"?"active":""}`,onClick:()=>a("appearance"),children:"Apariencia"}),r.jsx("button",{role:"tab","aria-selected":i==="earn",className:`lp-tab ${i==="earn"?"active":""}`,onClick:()=>a("earn"),children:"Earn"}),r.jsx("button",{role:"tab","aria-selected":i==="settings",className:`lp-tab ${i==="settings"?"active":""}`,onClick:()=>a("settings"),children:"Ajustes"})]})}),r.jsx("div",{className:"lp-scroll-area",children:r.jsxs("div",{className:"lp-content-max",children:[i==="links"&&r.jsxs(r.Fragment,{children:[r.jsxs("button",{className:"lp-btn-add-primary",onClick:N,children:[r.jsx(ht,{size:20})," Añadir enlace"]}),r.jsxs("div",{className:"lp-add-special-row",children:[r.jsx("span",{className:"lp-add-special-label",children:"Añadir bloque:"}),r.jsxs("button",{className:"lp-btn-special",onClick:()=>C("header"),children:[r.jsx(un,{size:14})," Header"]}),r.jsxs("button",{className:"lp-btn-special",onClick:()=>C("divider"),children:[r.jsx(dn,{size:14})," Divisor"]}),r.jsxs("button",{className:"lp-btn-special",onClick:()=>C("spotlight"),children:[r.jsx(wt,{size:14})," Spotlight"]})]}),r.jsx(Ws,{sensors:k,collisionDetection:Gr,onDragEnd:I,children:r.jsx(oi,{items:e.links.map(u=>u.id),strategy:ii,children:r.jsx("div",{className:"flex flex-col gap-4",children:e.links.map(u=>r.jsx(vi,{link:u,onUpdate:v,onDelete:A,isExpanded:g===u.id,onToggleExpand:()=>D(g===u.id?null:u.id),onThumbnailUpload:Q,onToggleActive:U},u.id))})})}),e.links.length===0&&r.jsxs("div",{className:"lp-empty-state-premium",children:[r.jsx("div",{className:"lp-empty-icon",children:r.jsx(Re,{size:32})}),r.jsx("h3",{className:"lp-empty-title",children:"Tu página está vacía"}),r.jsx("p",{className:"lp-empty-desc",children:"Añade tu primer enlace y empieza a compartir tu contenido con el mundo"}),r.jsxs("button",{className:"lp-empty-cta",onClick:N,children:[r.jsx(ht,{size:18})," Crear mi primer enlace"]})]})]}),i==="appearance"&&r.jsxs("div",{className:"lp-appearance-container",children:[r.jsxs("div",{className:"lp-settings-card",children:[r.jsxs("div",{className:"lp-settings-card-header",children:[r.jsx("div",{className:"lp-settings-icon-box",children:r.jsx(Hn,{size:18})}),r.jsxs("div",{children:[r.jsx("h3",{children:"Perfil"}),r.jsx("p",{children:"Tu foto y datos principales"})]})]}),r.jsxs("div",{className:"lp-profile-row",children:[r.jsxs("label",{className:"lp-avatar-upload-v2",children:[e.avatar_url?r.jsx("img",{src:e.avatar_url,alt:"Avatar"}):r.jsx("div",{className:"lp-avatar-placeholder-v2",children:(ye=e.username[0])==null?void 0:ye.toUpperCase()}),r.jsx("div",{className:"lp-avatar-edit-overlay",children:r.jsx(ir,{size:16})}),r.jsx("input",{type:"file",accept:"image/*",onChange:u=>H(u,"avatar")})]}),r.jsxs("div",{className:"lp-settings-fields",style:{flex:1},children:[r.jsxs("div",{className:"lp-input-group",children:[r.jsx("label",{children:"Nombre"}),r.jsx("input",{value:e.display_name,onChange:u=>m("display_name",u.target.value),placeholder:"Tu nombre o marca"})]}),r.jsxs("div",{className:"lp-input-group",children:[r.jsx("label",{children:"Bio"}),r.jsx("textarea",{value:e.description,onChange:u=>m("description",u.target.value),placeholder:"Cuéntale al mundo quién eres...",rows:2})]})]})]})]}),r.jsxs("div",{className:"lp-settings-card",children:[r.jsxs("div",{className:"lp-settings-card-header",children:[r.jsx("div",{className:"lp-settings-icon-box",style:{background:"linear-gradient(135deg, #ec4899 0%, #f43f5e 100%)"},children:r.jsx(ln,{size:18})}),r.jsxs("div",{children:[r.jsx("h3",{children:"Tema"}),r.jsx("p",{children:"Elige el look de tu página"})]})]}),r.jsx("div",{className:"lp-theme-selector",children:[{id:"light",name:"Claro",bg:"#f8fafc",text:"#334155"},{id:"dark",name:"Oscuro",bg:"#0f172a",text:"#94a3b8"},{id:"blue",name:"Azul",bg:"#2563eb",text:"white"},{id:"gradient",name:"Gradiente",bg:"linear-gradient(135deg, #6366f1 0%, #a855f7 100%)",text:"white"},{id:"neon",name:"Neon",bg:"#000",text:"#39ff14"},{id:"pastel",name:"Pastel",bg:"linear-gradient(135deg, #fce7f3 0%, #ede9fe 100%)",text:"#6b21a8"}].map(u=>r.jsxs("div",{className:`lp-theme-item ${e.theme===u.id?"active":""}`,style:{background:u.bg},onClick:()=>m("theme",u.id),children:[r.jsx("span",{style:{color:u.text},children:u.name}),e.theme===u.id&&r.jsx("div",{className:"lp-theme-check",children:"✓"})]},u.id))})]}),r.jsxs("div",{className:"lp-settings-card",children:[r.jsxs("div",{className:"lp-settings-card-header",children:[r.jsx("div",{className:"lp-settings-icon-box blue",children:r.jsx(et,{size:18})}),r.jsxs("div",{children:[r.jsx("h3",{children:"Estilo de Botones"}),r.jsx("p",{children:"Personaliza la forma de tus enlaces"})]})]}),r.jsx("div",{className:"lp-button-style-grid",children:[{id:"rounded",label:"Rounded",radius:"8px",fill:!0},{id:"pill",label:"Pill",radius:"100px",fill:!0},{id:"square",label:"Square",radius:"0px",fill:!0},{id:"shadow",label:"Shadow",radius:"8px",shadow:!0},{id:"outline",label:"Outline",radius:"8px",outline:!0},{id:"glass",label:"Glass",radius:"8px",glass:!0}].map(u=>r.jsxs("div",{className:`lp-button-style-item ${e.button_style===u.id?"active":""}`,onClick:()=>m("button_style",u.id),children:[r.jsx("div",{className:"lp-button-preview",style:{borderRadius:u.radius,background:u.fill?"rgba(255,255,255,0.12)":"transparent",border:u.outline?"2px solid white":u.shadow?"2px solid black":"1px solid rgba(255,255,255,0.2)",boxShadow:u.shadow?"3px 3px 0 black":"none",backdropFilter:u.glass?"blur(4px)":"none"}}),r.jsx("span",{children:u.label})]},u.id))})]}),r.jsxs("div",{className:"lp-settings-card",children:[r.jsxs("div",{className:"lp-settings-card-header",children:[r.jsx("div",{className:"lp-settings-icon-box",style:{background:"linear-gradient(135deg, #10b981 0%, #059669 100%)"},children:r.jsx(Rt,{size:18})}),r.jsxs("div",{children:[r.jsx("h3",{children:"Fondo"}),r.jsx("p",{children:"Imagen de fondo personalizada"})]})]}),r.jsxs("div",{className:"lp-background-options",children:[r.jsxs("div",{className:`lp-bg-option ${e.background_url?"":"active"}`,onClick:()=>m("background_url",""),children:[r.jsx("div",{className:"lp-bg-preview none",children:"✕"}),r.jsx("span",{children:"Sin fondo"})]}),e.background_url&&r.jsxs("div",{className:"lp-bg-option active",children:[r.jsx("div",{className:"lp-bg-preview",style:{backgroundImage:`url(${e.background_url})`}}),r.jsx("span",{children:"Actual"})]}),r.jsxs("label",{className:"lp-bg-option upload",children:[r.jsx("div",{className:"lp-bg-preview upload-icon",children:r.jsx(ht,{size:20})}),r.jsx("span",{children:"Subir"}),r.jsx("input",{type:"file",accept:"image/*",onChange:u=>H(u,"background")})]})]})]}),r.jsxs("div",{className:"lp-settings-card",children:[r.jsxs("div",{className:"lp-settings-card-header",children:[r.jsx("div",{className:"lp-settings-icon-box",style:{background:e.accent_color||"#6366f1"},children:r.jsx(Nr,{size:18})}),r.jsxs("div",{children:[r.jsx("h3",{children:"Color de Acento"}),r.jsx("p",{children:"Define el color principal de tu página"})]})]}),r.jsxs("div",{className:"lp-accent-colors",children:[["#6366f1","#8b5cf6","#ec4899","#f43f5e","#10b981","#3b82f6","#f59e0b","#06b6d4","#ef4444","#84cc16"].map(u=>r.jsx("button",{type:"button",className:`lp-accent-btn ${e.accent_color===u?"active":""}`,style:{background:u},onClick:()=>m("accent_color",u)},u)),r.jsxs("label",{className:"lp-accent-custom",children:[r.jsx("input",{type:"color",value:e.accent_color||"#6366f1",onChange:u=>m("accent_color",u.target.value)}),r.jsx("span",{children:"Custom"})]})]})]})]}),i==="earn"&&r.jsxs("div",{className:"lp-earn-container",children:[r.jsx("p",{className:"lp-earn-subtitle",children:"Elige el modo de monetización que mejor se adapte a tu audiencia"}),r.jsxs("div",{className:"lp-earn-cards",children:[r.jsxs("div",{className:`lp-earn-card ${e.monetization_mode==="standard"?"active":""}`,onClick:()=>m("monetization_mode","standard"),children:[r.jsx("div",{className:"lp-earn-card-icon",style:{background:"linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%)"},children:r.jsx(Dt,{size:24})}),r.jsxs("div",{className:"lp-earn-card-content",children:[r.jsx("h3",{children:"Standard"}),r.jsx("p",{children:"Equilibrio perfecto entre experiencia de usuario y ganancias."}),r.jsxs("div",{className:"lp-earn-rpm",children:[r.jsx("span",{className:"lp-rpm-value",children:"$1.50"}),r.jsx("span",{className:"lp-rpm-label",children:"RPM"})]})]})]}),r.jsxs("div",{className:`lp-earn-card turbo ${e.monetization_mode==="turbo"?"active":""}`,onClick:()=>m("monetization_mode","turbo"),children:[r.jsx("div",{className:"lp-earn-badge",children:"⚡ Recomendado"}),r.jsx("div",{className:"lp-earn-card-icon",style:{background:"linear-gradient(135deg, #f59e0b 0%, #d97706 100%)"},children:r.jsx(tt,{size:24})}),r.jsxs("div",{className:"lp-earn-card-content",children:[r.jsx("h3",{children:"Turbo"}),r.jsx("p",{children:"Máximas ganancias. Ideal para creadores con audiencia comprometida."}),r.jsxs("div",{className:"lp-earn-rpm",children:[r.jsx("span",{className:"lp-rpm-value",children:"$5.00+"}),r.jsx("span",{className:"lp-rpm-label",children:"RPM"})]})]})]})]}),r.jsxs("div",{className:"lp-earn-tip",children:[r.jsx("span",{className:"lp-tip-icon",children:"💡"}),r.jsxs("p",{children:["Turbo Mode puede generar hasta ",r.jsx("strong",{children:"3x más ingresos"})," con la misma audiencia."]})]})]}),i==="settings"&&r.jsxs("div",{className:"lp-settings-container",children:[r.jsxs("div",{className:"lp-settings-card",children:[r.jsxs("div",{className:"lp-settings-card-header",children:[r.jsx("div",{className:"lp-settings-icon-box",style:{background:"linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%)"},children:r.jsx(Re,{size:18})}),r.jsxs("div",{children:[r.jsx("h3",{children:"Tu URL"}),r.jsx("p",{children:"La dirección única de tu BioPage"})]})]}),r.jsx("div",{className:"lp-settings-fields",children:r.jsxs("div",{className:"lp-input-group",children:[r.jsx("label",{children:"Username"}),r.jsxs("div",{className:"lp-input-with-prefix",children:[r.jsxs("span",{className:"lp-input-prefix",children:[window.location.host,"/@"]}),r.jsx("input",{value:e.username,onChange:u=>{const x=u.target.value.toLowerCase().replace(/[^a-z0-9_]/g,"");x.length<=30&&m("username",x)},placeholder:"tu-username",maxLength:30})]}),r.jsx("span",{className:"lp-input-hint",children:"Solo letras, números y guión bajo. Máx 30 caracteres."})]})})]}),r.jsxs("div",{className:"lp-settings-card",children:[r.jsxs("div",{className:"lp-settings-card-header",children:[r.jsx("div",{className:"lp-settings-icon-box",children:r.jsx(on,{size:18})}),r.jsxs("div",{children:[r.jsx("h3",{children:"SEO & Metadatos"}),r.jsx("p",{children:"Optimiza cómo apareces en buscadores"})]})]}),r.jsxs("div",{className:"lp-settings-fields",children:[r.jsxs("div",{className:"lp-input-group",children:[r.jsx("label",{children:"Meta Título"}),r.jsx("input",{value:e.display_name,onChange:u=>m("display_name",u.target.value),placeholder:"Ej. Mis Enlaces Oficiales"}),r.jsx("span",{className:"lp-input-hint",children:"Se mostrará como título en Google"})]}),r.jsxs("div",{className:"lp-input-group",children:[r.jsx("label",{children:"Meta Descripción"}),r.jsx("textarea",{value:e.description,onChange:u=>m("description",u.target.value),placeholder:"Descripción breve para buscadores...",rows:2}),r.jsx("span",{className:"lp-input-hint",children:"Máximo 160 caracteres recomendado"})]})]})]}),r.jsx("div",{className:"lp-settings-card",children:r.jsxs("div",{className:"lp-settings-row",children:[r.jsxs("div",{className:"lp-settings-info",children:[r.jsx("div",{className:"lp-settings-icon-box blue",children:r.jsx(Yn,{size:18})}),r.jsxs("div",{children:[r.jsx("h4",{children:"Mostrar estadísticas"}),r.jsx("p",{children:"Muestra el contador de visitas en tu Bio"})]})]}),r.jsx("button",{type:"button",className:`lp-switch ${e.show_views!==!1?"active":""}`,onClick:()=>m("show_views",e.show_views===!1),children:r.jsx("div",{className:"lp-switch-dot"})})]})}),r.jsxs("div",{className:"lp-settings-card",children:[r.jsxs("div",{className:"lp-settings-card-header",children:[r.jsx("div",{className:"lp-settings-icon-box",style:{background:"linear-gradient(135deg, #10b981 0%, #059669 100%)"},children:r.jsx(wr,{size:18})}),r.jsxs("div",{children:[r.jsx("h3",{children:"Código QR"}),r.jsx("p",{children:"Comparte tu BioPage fácilmente"})]})]}),r.jsx(Sr,{url:`${window.location.origin}/@${e.username}`,username:e.username,accentColor:e.accent_color})]}),r.jsxs("div",{className:"lp-settings-card",children:[r.jsxs("div",{className:"lp-settings-card-header",children:[r.jsx("div",{className:"lp-settings-icon-box",style:{background:"linear-gradient(135deg, #eab308 0%, #f59e0b 100%)"},children:r.jsx(or,{size:18})}),r.jsxs("div",{children:[r.jsx("h3",{children:"Progreso y Logros"}),r.jsx("p",{children:"Completa tu perfil y desbloquea badges"})]})]}),r.jsx(Dr,{profile:e}),r.jsxs("div",{className:"lp-gamification-section",style:{marginTop:"16px"},children:[r.jsxs("h4",{children:[r.jsx(wt,{size:16})," Tus Logros"]}),r.jsx(Rr,{profile:e})]})]})]})]})})]}),r.jsx("div",{className:"lp-preview-col",children:r.jsxs("div",{className:"lp-mobile-frame",children:[r.jsx(an,{profile:e}),r.jsxs("div",{className:"lp-scroll-indicator",children:[r.jsx(yt,{size:16}),r.jsx("span",{children:"Desliza para ver más"})]})]})})]}),r.jsx(y,{})]}):null}const Pe={instagram:{icon:rr,label:"Instagram",color:"#E4405F"},twitter:{icon:nr,label:"Twitter/X",color:"#1DA1F2"},youtube:{icon:tr,label:"YouTube",color:"#FF0000"},twitch:{icon:er,label:"Twitch",color:"#9146FF"},github:{icon:Zn,label:"GitHub",color:"#333"},linkedin:{icon:Jn,label:"LinkedIn",color:"#0A66C2"},facebook:{icon:Qn,label:"Facebook",color:"#1877F2"},tiktok:{icon:Kn,label:"TikTok",color:"#000"},shop:{icon:Gn,label:"Tienda",color:"#16a34a"},email:{icon:Wn,label:"Email",color:"#EA4335"},website:{icon:on,label:"Web",color:"#6366f1"},link:{icon:Re,label:"Enlace",color:"#64748b"}},vi=O.memo(function({link:t,onUpdate:n,onDelete:s,isExpanded:i,onToggleExpand:a,onThumbnailUpload:l,onToggleActive:o}){const{attributes:d,listeners:p,setNodeRef:h,transform:f,transition:y,isDragging:g}=fi({id:t.id}),D=O.useRef(null),[b,w]=O.useState(!1),[k,R]=O.useState(!!(t.visible_from||t.visible_until)),m={transform:qe.Transform.toString(f),transition:y,zIndex:g?50:1,opacity:g?.5:1},S=()=>{var v;(v=D.current)==null||v.click()},E=async v=>{var I;const A=(I=v.target.files)==null?void 0:I[0];if(!(!A||!l)){w(!0);try{await l(t.id,A)}catch(U){console.error("Thumbnail upload error:",U)}finally{w(!1),v.target.value=""}}},N=t.block_type||"link",C=N==="header"||N==="divider",j=t.active!==!1;return r.jsxs("div",{ref:h,style:m,className:`lp-card ${g?"dragging":""} ${C?"lp-card-special":""} ${N==="header"?"lp-card-header-block":""} ${N==="divider"?"lp-card-divider-block":""} ${j?"":"lp-card-disabled"}`,children:[r.jsxs("div",{className:"lp-card-header",onClick:a,children:[r.jsx("div",{className:"lp-drag-handle",...d,...p,onClick:v=>v.stopPropagation(),children:r.jsx(gr,{size:20})}),t.icon&&Pe[t.icon]&&r.jsx("div",{className:"lp-link-icon",style:{background:Pe[t.icon].color},onClick:v=>v.stopPropagation(),children:O.createElement(Pe[t.icon].icon,{size:18})}),t.thumbnail_url&&!t.icon&&r.jsx("div",{className:"lp-link-thumb",onClick:v=>v.stopPropagation(),children:r.jsx("img",{src:t.thumbnail_url,alt:""})}),r.jsxs("div",{className:"lp-card-inputs",children:[r.jsx("input",{className:"lp-input-main",value:t.title,onChange:v=>n(t.id,"title",v.target.value),placeholder:N==="header"?"Título de sección":N==="divider"?"Divisor":"Título del enlace",onClick:v=>v.stopPropagation()}),!C&&r.jsx("input",{className:"lp-input-sub",value:t.url,onChange:v=>n(t.id,"url",v.target.value),placeholder:"https://...",onClick:v=>v.stopPropagation()})]}),t.block_type==="link"||!t.block_type?r.jsxs("div",{className:"lp-link-stats",onClick:v=>v.stopPropagation(),children:[r.jsx(et,{size:12}),r.jsx("span",{children:t.clicks||0})]}):null,r.jsx("div",{className:"flex items-center gap-3",onClick:v=>v.stopPropagation(),children:r.jsx("div",{className:`lp-switch ${j?"active":""}`,onClick:()=>o(t.id,!j),title:j?"Desactivar enlace":"Activar enlace",children:r.jsx("div",{className:"lp-switch-dot"})})}),r.jsx("div",{className:"lp-chevron-indicator",children:i?r.jsx(cr,{size:18}):r.jsx(yt,{size:18})})]}),i&&r.jsxs("div",{className:"lp-card-body",children:[!C&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"lp-icon-selector",children:[r.jsx("label",{className:"lp-icon-label",children:"Icono"}),r.jsxs("div",{className:"lp-icon-grid",children:[Object.entries(Pe).map(([v,{icon:A,label:I,color:U}])=>r.jsx("button",{type:"button",className:`lp-icon-opt ${t.icon===v?"selected":""}`,onClick:()=>n(t.id,"icon",v),title:I,style:{"--icon-color":U},children:r.jsx(A,{size:18})},v)),t.icon&&r.jsx("button",{type:"button",className:"lp-icon-opt lp-icon-clear",onClick:()=>n(t.id,"icon",null),title:"Sin icono",children:"✕"})]})]}),r.jsxs("div",{className:"lp-link-type-selector",children:[r.jsx("label",{className:"lp-icon-label",children:"Tipo de Enlace"}),r.jsxs("div",{className:"lp-link-type-grid",children:[r.jsxs("button",{type:"button",className:`lp-link-type-opt ${!t.link_type||t.link_type==="normal"?"selected":""}`,onClick:()=>n(t.id,"link_type","normal"),children:[r.jsx(Re,{size:14}),"Normal"]}),r.jsxs("button",{type:"button",className:`lp-link-type-opt monetized ${t.link_type==="monetized"?"selected":""}`,onClick:()=>n(t.id,"link_type","monetized"),children:[r.jsx(Dt,{size:14}),"Monetizado"]}),r.jsxs("button",{type:"button",className:`lp-link-type-opt paywall ${t.link_type==="paywall"?"selected":""}`,onClick:()=>n(t.id,"link_type","paywall"),children:[r.jsx(tt,{size:14}),"Paywall"]})]})]}),r.jsxs("div",{className:"lp-card-actions",children:[r.jsxs("div",{className:"lp-action-row",children:[r.jsx("input",{type:"file",accept:"image/*",ref:D,className:"hidden",onChange:E}),r.jsxs("button",{className:"lp-action-btn",onClick:S,disabled:b,children:[b?r.jsx(mt,{size:16,className:"animate-spin"}):r.jsx(Rt,{size:16}),b?"Subiendo...":t.thumbnail_url?"Cambiar":"Miniatura"]})]}),r.jsxs("div",{className:`lp-scheduling-section ${k?"expanded":""}`,children:[r.jsxs("div",{className:"lp-scheduling-header",onClick:()=>R(!k),style:{cursor:"pointer"},children:[r.jsx(sr,{size:14}),r.jsx("span",{children:"Programar visibilidad"}),(t.visible_from||t.visible_until)&&r.jsx("span",{className:"lp-schedule-badge",children:"Activo"}),r.jsx(yt,{size:14,style:{marginLeft:"auto",transform:k?"rotate(180deg)":"rotate(0)",transition:"transform 0.2s"}})]}),k&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"lp-scheduling-inputs",children:[r.jsxs("div",{className:"lp-schedule-field",children:[r.jsx("label",{children:"Desde:"}),r.jsx("input",{type:"datetime-local",value:t.visible_from?t.visible_from.slice(0,16):"",onChange:v=>n(t.id,"visible_from",v.target.value?new Date(v.target.value).toISOString():null)})]}),r.jsxs("div",{className:"lp-schedule-field",children:[r.jsx("label",{children:"Hasta:"}),r.jsx("input",{type:"datetime-local",value:t.visible_until?t.visible_until.slice(0,16):"",onChange:v=>n(t.id,"visible_until",v.target.value?new Date(v.target.value).toISOString():null)})]})]}),(t.visible_from||t.visible_until)&&r.jsx("button",{className:"lp-schedule-clear",onClick:()=>{n(t.id,"visible_from",null),n(t.id,"visible_until",null)},children:"Quitar programación"})]})]}),r.jsxs("button",{className:"lp-action-btn danger",onClick:()=>s(t.id),children:[r.jsx(Ht,{size:16})," Eliminar"]})]})]}),C&&r.jsxs("div",{className:"lp-special-block-actions",children:[r.jsxs("div",{className:"lp-special-block-info",children:[N==="header"&&r.jsxs(r.Fragment,{children:[r.jsx(un,{size:16})," Este es un encabezado de sección"]}),N==="divider"&&r.jsxs(r.Fragment,{children:[r.jsx(dn,{size:16})," Este es un divisor visual"]})]}),r.jsxs("button",{className:"lp-action-btn danger",onClick:()=>s(t.id),children:[r.jsx(Ht,{size:16})," Eliminar"]})]})]})]})}),an=O.memo(function({profile:t}){var a,l,o;const n=()=>{if(t.background_url)return{backgroundImage:`url(${t.background_url})`,backgroundSize:"cover",backgroundPosition:"center"};const d={light:"#f8fafc",dark:"linear-gradient(180deg, #0f172a 0%, #1e293b 100%)",blue:"linear-gradient(180deg, #1e40af 0%, #3b82f6 100%)",gradient:"linear-gradient(135deg, #6366f1 0%, #a855f7 50%, #ec4899 100%)"};return{background:d[t.theme]||d.dark}},s=()=>{const d={display:"flex",alignItems:"center",width:"100%",padding:"14px 18px",marginBottom:"12px",textDecoration:"none",fontWeight:700,fontSize:"13px",cursor:"pointer",position:"relative",overflow:"hidden",border:"none"};let p={borderRadius:"10px"};t.button_style==="square"&&(p={borderRadius:"0px"}),t.button_style==="pill"&&(p={borderRadius:"100px"});let h={};if(t.button_style==="outline"){const f=t.accent_color||"white";h={background:"transparent",color:f,border:`2px solid ${f}`}}else t.button_style==="glass"?h={background:"rgba(255,255,255,0.1)",color:"white",border:"1px solid rgba(255,255,255,0.2)",backdropFilter:"blur(10px)"}:t.button_style==="shadow"?h={background:t.accent_color||"white",color:t.accent_color?"white":"black",border:"2px solid black",boxShadow:"4px 4px 0px black"}:t.accent_color?h={background:t.accent_color,color:"white",boxShadow:`0 4px 14px ${t.accent_color}40`}:h=t.theme==="light"?{background:"white",color:"#1F2937",border:"1px solid #E5E7EB"}:{background:"rgba(255,255,255,0.15)",color:"white",border:"1px solid rgba(255,255,255,0.2)"};return{...d,...p,...h}},i=t.theme==="light";return r.jsx("div",{className:"lp-live-preview",style:{...n(),color:i?"#1f2937":"white"},children:r.jsxs("div",{className:"lp-preview-content",children:[r.jsx("div",{className:"lp-preview-avatar",children:t.avatar_url?r.jsx("img",{src:t.avatar_url,alt:""}):r.jsx("span",{children:(l=(a=t.username)==null?void 0:a[0])==null?void 0:l.toUpperCase()})}),r.jsxs("h2",{className:"lp-preview-name",children:["@",t.display_name||t.username]}),r.jsx("p",{className:"lp-preview-bio",children:t.description||"Tu bio aquí..."}),r.jsx("div",{className:"lp-preview-links",children:(o=t.links)==null?void 0:o.filter(d=>d.active!==!1).map((d,p)=>{const h=d.block_type||"link",f=d.icon&&Pe[d.icon];return h==="header"?r.jsx("div",{className:"lp-preview-header",children:d.title},d.id):h==="divider"?r.jsx("div",{className:"lp-preview-divider",style:{background:i?"rgba(0,0,0,0.1)":"rgba(255,255,255,0.15)"}},d.id):h==="spotlight"?r.jsxs("div",{className:"lp-preview-spotlight",style:{background:`linear-gradient(135deg, ${t.accent_color||"#f59e0b"} 0%, ${t.accent_color||"#fbbf24"} 100%)`},children:["⭐ ",d.title]},d.id):r.jsxs("div",{style:s(),children:[f&&r.jsx("div",{style:{width:"32px",height:"32px",borderRadius:"8px",background:f.color,display:"flex",alignItems:"center",justifyContent:"center",marginRight:"10px",color:"white"},children:O.createElement(f.icon,{size:16})}),d.thumbnail_url&&!d.icon&&r.jsx("img",{src:d.thumbnail_url,style:{width:"32px",height:"32px",borderRadius:"6px",objectFit:"cover",marginRight:"10px"},alt:""}),r.jsx("span",{style:{flex:1,textAlign:"center"},children:d.title||"Sin título"})]},d.id)})}),r.jsxs("div",{className:"lp-preview-footer",children:[r.jsx(tt,{size:10})," LinkPay"]})]})})});export{Ni as BioEditorPage};
