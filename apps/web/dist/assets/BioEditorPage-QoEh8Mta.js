import{d as Q,r as l,j as r,Z as it,M as et,c as Fe,R as L,e as Le,t as Pn,H as $n,s as Bn,I as ie,b as bt,w as Fn,G as sn,i as qn,z as Xn,J as Hn,K as Vn,N as Yn,O as Gn,P as Un,Q as Wn,Y as Kn,V as Qn,_ as Jn,k as Zn}from"./index-Br8cisaH.js";import{D as kt}from"./dollar-sign-B8UOyeqA.js";import{E as Xt,a as ht,C as er,P as tr}from"./plus-vptKQ98g.js";import{S as nr}from"./share-2-G6Q1RT4p.js";import{C as mt}from"./chevron-down-CHXQOe7S.js";import{T as Ht}from"./trash-2-DXZxXAyt.js";/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rr=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],an=Q("award",rr);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sr=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],ir=Q("chevron-up",sr);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ar=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],lr=Q("download",ar);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const or=[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]],cr=Q("grip-vertical",or);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dr=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],ln=Q("image",dr);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ur=[["path",{d:"M5 12h14",key:"1ays0h"}]],on=Q("minus",ur);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hr=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M9 21V9",key:"1oto5p"}]],pr=Q("panels-top-left",hr);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fr=[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]],gr=Q("qr-code",fr);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vr=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],br=Q("sparkles",vr);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mr=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],xt=Q("star",mr);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xr=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],yr=Q("target",xr);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wr=[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]],jr=Q("trophy",wr);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nr=[["path",{d:"M12 4v16",key:"1654pz"}],["path",{d:"M4 7V5a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v2",key:"e0r10z"}],["path",{d:"M9 20h6",key:"s66wpe"}]],cn=Q("type",Nr);function Cr({url:e,username:t,accentColor:n="#6366f1"}){const s=l.useRef(null);l.useEffect(()=>{i()},[e,n]);const i=async()=>{const h=s.current;if(!h)return;const u=h.getContext("2d");if(!u)return;const p=200,v=25,g=p/v;h.width=p,h.height=p,u.fillStyle="#ffffff",u.fillRect(0,0,p,p);const j=a(e);u.fillStyle=n,c(u,0,0,g),c(u,(v-7)*g,0,g),c(u,0,(v-7)*g,g);for(let b=0;b<v;b++)for(let y=0;y<v;y++)o(b,y,v)||j[(b*v+y)%j.length]&&u.fillRect(y*g,b*g,g-.5,g-.5)},a=h=>{const u=[];let p=0;for(let v=0;v<h.length;v++)p=(p<<5)-p+h.charCodeAt(v),p=p&p;for(let v=0;v<625;v++){const g=(p>>v%32^p>>v*7%32)&1;u.push(g===1)}return u},o=(h,u,p)=>h<8&&u<8||h<8&&u>=p-8||h>=p-8&&u<8,c=(h,u,p,v)=>{var g,j;h.fillRect(u,p,7*v,7*v),h.fillStyle="#ffffff",h.fillRect(u+v,p+v,5*v,5*v),h.fillStyle=h.fillStyle=((j=(g=s.current)==null?void 0:g.getContext("2d"))==null?void 0:j.fillStyle)||"#6366f1",h.fillRect(u+2*v,p+2*v,3*v,3*v)},d=()=>{const h=s.current;if(!h)return;const u=document.createElement("a");u.download=`linkpay-${t}-qr.png`,u.href=h.toDataURL("image/png"),u.click()};return r.jsxs("div",{className:"lp-qr-container",children:[r.jsx("div",{className:"lp-qr-preview",children:r.jsx("canvas",{ref:s})}),r.jsxs("div",{className:"lp-qr-info",children:[r.jsxs("p",{className:"lp-qr-url",children:["linkpay.me/b/",t]}),r.jsxs("button",{className:"lp-btn-basic lp-btn-secondary",onClick:d,children:[r.jsx(lr,{size:14}),"Descargar PNG"]})]})]})}const kr={first_link:{icon:Fe,label:"Primer Enlace",description:"Añadiste tu primer enlace",color:"#3b82f6"},link_builder:{icon:yr,label:"Constructor",description:"5 enlaces creados",color:"#8b5cf6"},first_100_clicks:{icon:et,label:"100 Clicks",description:"Alcanzaste 100 clicks",color:"#10b981"},viral:{icon:it,label:"Viral",description:"1000+ clicks totales",color:"#f59e0b"},first_dollar:{icon:kt,label:"Primer Dólar",description:"Ganaste tu primer dólar",color:"#22c55e"},earning_machine:{icon:jr,label:"Máquina de Dinero",description:"Ganaste $10+",color:"#eab308"}};function Dr({profile:e}){var i;const t=[{key:"avatar",label:"Avatar",done:!!e.avatar_url},{key:"name",label:"Nombre",done:!!e.display_name&&e.display_name.length>2},{key:"bio",label:"Bio",done:!!e.description&&e.description.length>10},{key:"links",label:"3+ Enlaces",done:(((i=e.links)==null?void 0:i.length)||0)>=3},{key:"theme",label:"Tema",done:e.theme!=="light"}],n=t.filter(a=>a.done).length,s=Math.round(n/t.length*100);return s===100?null:r.jsxs("div",{className:"lp-completion-card",children:[r.jsxs("div",{className:"lp-completion-header",children:[r.jsx(xt,{size:18}),r.jsx("span",{children:"Completa tu perfil"}),r.jsxs("span",{className:"lp-completion-pct",children:[s,"%"]})]}),r.jsx("div",{className:"lp-completion-bar",children:r.jsx("div",{className:"lp-completion-fill",style:{width:`${s}%`}})}),r.jsx("div",{className:"lp-completion-steps",children:t.map(a=>r.jsxs("div",{className:`lp-completion-step ${a.done?"done":""}`,children:[a.done?"✓":"○"," ",a.label]},a.key))})]})}function Sr({achievements:e}){return!e||e.length===0?r.jsxs("div",{className:"lp-achievements-empty",children:[r.jsx(an,{size:32}),r.jsx("p",{children:"Consigue logros para desbloquear badges"})]}):r.jsx("div",{className:"lp-achievements-grid",children:e.map(t=>{const n=kr[t.badge_type];if(!n)return null;const s=n.icon;return r.jsxs("div",{className:"lp-badge",title:n.description,children:[r.jsx("div",{className:"lp-badge-icon",style:{background:n.color},children:r.jsx(s,{size:20})}),r.jsx("span",{className:"lp-badge-label",children:n.label})]},t.badge_type)})})}function Rr({level:e=1,xp:t=0}){const n=e*100,s=Math.min(t/n*100,100);return r.jsxs("div",{className:"lp-xp-container",children:[r.jsxs("div",{className:"lp-level-badge",children:["Lv. ",e]}),r.jsx("div",{className:"lp-xp-bar",children:r.jsx("div",{className:"lp-xp-fill",style:{width:`${s}%`}})}),r.jsxs("span",{className:"lp-xp-text",children:[t,"/",n," XP"]})]})}function Er(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return l.useMemo(()=>s=>{t.forEach(i=>i(s))},t)}const at=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function Se(e){const t=Object.prototype.toString.call(e);return t==="[object Window]"||t==="[object global]"}function Dt(e){return"nodeType"in e}function G(e){var t,n;return e?Se(e)?e:Dt(e)&&(t=(n=e.ownerDocument)==null?void 0:n.defaultView)!=null?t:window:window}function St(e){const{Document:t}=G(e);return e instanceof t}function Ve(e){return Se(e)?!1:e instanceof G(e).HTMLElement}function dn(e){return e instanceof G(e).SVGElement}function Re(e){return e?Se(e)?e.document:Dt(e)?St(e)?e:Ve(e)||dn(e)?e.ownerDocument:document:document:document}const ae=at?l.useLayoutEffect:l.useEffect;function Rt(e){const t=l.useRef(e);return ae(()=>{t.current=e}),l.useCallback(function(){for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return t.current==null?void 0:t.current(...s)},[])}function Mr(){const e=l.useRef(null),t=l.useCallback((s,i)=>{e.current=setInterval(s,i)},[]),n=l.useCallback(()=>{e.current!==null&&(clearInterval(e.current),e.current=null)},[]);return[t,n]}function qe(e,t){t===void 0&&(t=[e]);const n=l.useRef(e);return ae(()=>{n.current!==e&&(n.current=e)},t),n}function Ye(e,t){const n=l.useRef();return l.useMemo(()=>{const s=e(n.current);return n.current=s,s},[...t])}function tt(e){const t=Rt(e),n=l.useRef(null),s=l.useCallback(i=>{i!==n.current&&(t==null||t(i,n.current)),n.current=i},[]);return[n,s]}function yt(e){const t=l.useRef();return l.useEffect(()=>{t.current=e},[e]),t.current}let pt={};function Ge(e,t){return l.useMemo(()=>{if(t)return t;const n=pt[e]==null?0:pt[e]+1;return pt[e]=n,e+"-"+n},[e,t])}function un(e){return function(t){for(var n=arguments.length,s=new Array(n>1?n-1:0),i=1;i<n;i++)s[i-1]=arguments[i];return s.reduce((a,o)=>{const c=Object.entries(o);for(const[d,h]of c){const u=a[d];u!=null&&(a[d]=u+e*h)}return a},{...t})}}const De=un(1),nt=un(-1);function Ir(e){return"clientX"in e&&"clientY"in e}function Et(e){if(!e)return!1;const{KeyboardEvent:t}=G(e.target);return t&&e instanceof t}function _r(e){if(!e)return!1;const{TouchEvent:t}=G(e.target);return t&&e instanceof t}function wt(e){if(_r(e)){if(e.touches&&e.touches.length){const{clientX:t,clientY:n}=e.touches[0];return{x:t,y:n}}else if(e.changedTouches&&e.changedTouches.length){const{clientX:t,clientY:n}=e.changedTouches[0];return{x:t,y:n}}}return Ir(e)?{x:e.clientX,y:e.clientY}:null}const Xe=Object.freeze({Translate:{toString(e){if(!e)return;const{x:t,y:n}=e;return"translate3d("+(t?Math.round(t):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;const{scaleX:t,scaleY:n}=e;return"scaleX("+t+") scaleY("+n+")"}},Transform:{toString(e){if(e)return[Xe.Translate.toString(e),Xe.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:t,duration:n,easing:s}=e;return t+" "+n+"ms "+s}}}),Vt="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function Ar(e){return e.matches(Vt)?e:e.querySelector(Vt)}const Tr={display:"none"};function zr(e){let{id:t,value:n}=e;return L.createElement("div",{id:t,style:Tr},n)}function Lr(e){let{id:t,announcement:n,ariaLiveType:s="assertive"}=e;const i={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return L.createElement("div",{id:t,style:i,role:"status","aria-live":s,"aria-atomic":!0},n)}function Or(){const[e,t]=l.useState("");return{announce:l.useCallback(s=>{s!=null&&t(s)},[]),announcement:e}}const hn=l.createContext(null);function Pr(e){const t=l.useContext(hn);l.useEffect(()=>{if(!t)throw new Error("useDndMonitor must be used within a children of <DndContext>");return t(e)},[e,t])}function $r(){const[e]=l.useState(()=>new Set),t=l.useCallback(s=>(e.add(s),()=>e.delete(s)),[e]);return[l.useCallback(s=>{let{type:i,event:a}=s;e.forEach(o=>{var c;return(c=o[i])==null?void 0:c.call(o,a)})},[e]),t]}const Br={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},Fr={onDragStart(e){let{active:t}=e;return"Picked up draggable item "+t.id+"."},onDragOver(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was moved over droppable area "+n.id+".":"Draggable item "+t.id+" is no longer over a droppable area."},onDragEnd(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was dropped over droppable area "+n.id:"Draggable item "+t.id+" was dropped."},onDragCancel(e){let{active:t}=e;return"Dragging was cancelled. Draggable item "+t.id+" was dropped."}};function qr(e){let{announcements:t=Fr,container:n,hiddenTextDescribedById:s,screenReaderInstructions:i=Br}=e;const{announce:a,announcement:o}=Or(),c=Ge("DndLiveRegion"),[d,h]=l.useState(!1);if(l.useEffect(()=>{h(!0)},[]),Pr(l.useMemo(()=>({onDragStart(p){let{active:v}=p;a(t.onDragStart({active:v}))},onDragMove(p){let{active:v,over:g}=p;t.onDragMove&&a(t.onDragMove({active:v,over:g}))},onDragOver(p){let{active:v,over:g}=p;a(t.onDragOver({active:v,over:g}))},onDragEnd(p){let{active:v,over:g}=p;a(t.onDragEnd({active:v,over:g}))},onDragCancel(p){let{active:v,over:g}=p;a(t.onDragCancel({active:v,over:g}))}}),[a,t])),!d)return null;const u=L.createElement(L.Fragment,null,L.createElement(zr,{id:s,value:i.draggable}),L.createElement(Lr,{id:c,announcement:o}));return n?Le.createPortal(u,n):u}var P;(function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"})(P||(P={}));function rt(){}function Xr(e,t){return l.useMemo(()=>({sensor:e,options:t??{}}),[e,t])}function Hr(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return l.useMemo(()=>[...t].filter(s=>s!=null),[...t])}const te=Object.freeze({x:0,y:0});function Vr(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function Yr(e,t){let{data:{value:n}}=e,{data:{value:s}}=t;return n-s}function Gr(e,t){let{data:{value:n}}=e,{data:{value:s}}=t;return s-n}function Ur(e,t){if(!e||e.length===0)return null;const[n]=e;return n[t]}function Yt(e,t,n){return t===void 0&&(t=e.left),n===void 0&&(n=e.top),{x:t+e.width*.5,y:n+e.height*.5}}const Wr=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:s}=e;const i=Yt(t,t.left,t.top),a=[];for(const o of s){const{id:c}=o,d=n.get(c);if(d){const h=Vr(Yt(d),i);a.push({id:c,data:{droppableContainer:o,value:h}})}}return a.sort(Yr)};function Kr(e,t){const n=Math.max(t.top,e.top),s=Math.max(t.left,e.left),i=Math.min(t.left+t.width,e.left+e.width),a=Math.min(t.top+t.height,e.top+e.height),o=i-s,c=a-n;if(s<i&&n<a){const d=t.width*t.height,h=e.width*e.height,u=o*c,p=u/(d+h-u);return Number(p.toFixed(4))}return 0}const Qr=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:s}=e;const i=[];for(const a of s){const{id:o}=a,c=n.get(o);if(c){const d=Kr(c,t);d>0&&i.push({id:o,data:{droppableContainer:a,value:d}})}}return i.sort(Gr)};function Jr(e,t,n){return{...e,scaleX:t&&n?t.width/n.width:1,scaleY:t&&n?t.height/n.height:1}}function pn(e,t){return e&&t?{x:e.left-t.left,y:e.top-t.top}:te}function Zr(e){return function(n){for(var s=arguments.length,i=new Array(s>1?s-1:0),a=1;a<s;a++)i[a-1]=arguments[a];return i.reduce((o,c)=>({...o,top:o.top+e*c.y,bottom:o.bottom+e*c.y,left:o.left+e*c.x,right:o.right+e*c.x}),{...n})}}const es=Zr(1);function ts(e){if(e.startsWith("matrix3d(")){const t=e.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}else if(e.startsWith("matrix(")){const t=e.slice(7,-1).split(/, /);return{x:+t[4],y:+t[5],scaleX:+t[0],scaleY:+t[3]}}return null}function ns(e,t,n){const s=ts(t);if(!s)return e;const{scaleX:i,scaleY:a,x:o,y:c}=s,d=e.left-o-(1-i)*parseFloat(n),h=e.top-c-(1-a)*parseFloat(n.slice(n.indexOf(" ")+1)),u=i?e.width/i:e.width,p=a?e.height/a:e.height;return{width:u,height:p,top:h,right:d+u,bottom:h+p,left:d}}const rs={ignoreTransform:!1};function Ee(e,t){t===void 0&&(t=rs);let n=e.getBoundingClientRect();if(t.ignoreTransform){const{transform:h,transformOrigin:u}=G(e).getComputedStyle(e);h&&(n=ns(n,h,u))}const{top:s,left:i,width:a,height:o,bottom:c,right:d}=n;return{top:s,left:i,width:a,height:o,bottom:c,right:d}}function Gt(e){return Ee(e,{ignoreTransform:!0})}function ss(e){const t=e.innerWidth,n=e.innerHeight;return{top:0,left:0,right:t,bottom:n,width:t,height:n}}function is(e,t){return t===void 0&&(t=G(e).getComputedStyle(e)),t.position==="fixed"}function as(e,t){t===void 0&&(t=G(e).getComputedStyle(e));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(i=>{const a=t[i];return typeof a=="string"?n.test(a):!1})}function Mt(e,t){const n=[];function s(i){if(t!=null&&n.length>=t||!i)return n;if(St(i)&&i.scrollingElement!=null&&!n.includes(i.scrollingElement))return n.push(i.scrollingElement),n;if(!Ve(i)||dn(i)||n.includes(i))return n;const a=G(e).getComputedStyle(i);return i!==e&&as(i,a)&&n.push(i),is(i,a)?n:s(i.parentNode)}return e?s(e):n}function fn(e){const[t]=Mt(e,1);return t??null}function ft(e){return!at||!e?null:Se(e)?e:Dt(e)?St(e)||e===Re(e).scrollingElement?window:Ve(e)?e:null:null}function gn(e){return Se(e)?e.scrollX:e.scrollLeft}function vn(e){return Se(e)?e.scrollY:e.scrollTop}function jt(e){return{x:gn(e),y:vn(e)}}var F;(function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"})(F||(F={}));function bn(e){return!at||!e?!1:e===document.scrollingElement}function mn(e){const t={x:0,y:0},n=bn(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},s={x:e.scrollWidth-n.width,y:e.scrollHeight-n.height},i=e.scrollTop<=t.y,a=e.scrollLeft<=t.x,o=e.scrollTop>=s.y,c=e.scrollLeft>=s.x;return{isTop:i,isLeft:a,isBottom:o,isRight:c,maxScroll:s,minScroll:t}}const ls={x:.2,y:.2};function os(e,t,n,s,i){let{top:a,left:o,right:c,bottom:d}=n;s===void 0&&(s=10),i===void 0&&(i=ls);const{isTop:h,isBottom:u,isLeft:p,isRight:v}=mn(e),g={x:0,y:0},j={x:0,y:0},b={height:t.height*i.y,width:t.width*i.x};return!h&&a<=t.top+b.height?(g.y=F.Backward,j.y=s*Math.abs((t.top+b.height-a)/b.height)):!u&&d>=t.bottom-b.height&&(g.y=F.Forward,j.y=s*Math.abs((t.bottom-b.height-d)/b.height)),!v&&c>=t.right-b.width?(g.x=F.Forward,j.x=s*Math.abs((t.right-b.width-c)/b.width)):!p&&o<=t.left+b.width&&(g.x=F.Backward,j.x=s*Math.abs((t.left+b.width-o)/b.width)),{direction:g,speed:j}}function cs(e){if(e===document.scrollingElement){const{innerWidth:a,innerHeight:o}=window;return{top:0,left:0,right:a,bottom:o,width:a,height:o}}const{top:t,left:n,right:s,bottom:i}=e.getBoundingClientRect();return{top:t,left:n,right:s,bottom:i,width:e.clientWidth,height:e.clientHeight}}function xn(e){return e.reduce((t,n)=>De(t,jt(n)),te)}function ds(e){return e.reduce((t,n)=>t+gn(n),0)}function us(e){return e.reduce((t,n)=>t+vn(n),0)}function hs(e,t){if(t===void 0&&(t=Ee),!e)return;const{top:n,left:s,bottom:i,right:a}=t(e);fn(e)&&(i<=0||a<=0||n>=window.innerHeight||s>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}const ps=[["x",["left","right"],ds],["y",["top","bottom"],us]];class It{constructor(t,n){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const s=Mt(n),i=xn(s);this.rect={...t},this.width=t.width,this.height=t.height;for(const[a,o,c]of ps)for(const d of o)Object.defineProperty(this,d,{get:()=>{const h=c(s),u=i[a]-h;return this.rect[d]+u},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class Pe{constructor(t){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(n=>{var s;return(s=this.target)==null?void 0:s.removeEventListener(...n)})},this.target=t}add(t,n,s){var i;(i=this.target)==null||i.addEventListener(t,n,s),this.listeners.push([t,n,s])}}function fs(e){const{EventTarget:t}=G(e);return e instanceof t?e:Re(e)}function gt(e,t){const n=Math.abs(e.x),s=Math.abs(e.y);return typeof t=="number"?Math.sqrt(n**2+s**2)>t:"x"in t&&"y"in t?n>t.x&&s>t.y:"x"in t?n>t.x:"y"in t?s>t.y:!1}var ee;(function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"})(ee||(ee={}));function Ut(e){e.preventDefault()}function gs(e){e.stopPropagation()}var I;(function(e){e.Space="Space",e.Down="ArrowDown",e.Right="ArrowRight",e.Left="ArrowLeft",e.Up="ArrowUp",e.Esc="Escape",e.Enter="Enter",e.Tab="Tab"})(I||(I={}));const yn={start:[I.Space,I.Enter],cancel:[I.Esc],end:[I.Space,I.Enter,I.Tab]},vs=(e,t)=>{let{currentCoordinates:n}=t;switch(e.code){case I.Right:return{...n,x:n.x+25};case I.Left:return{...n,x:n.x-25};case I.Down:return{...n,y:n.y+25};case I.Up:return{...n,y:n.y-25}}};class wn{constructor(t){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=t;const{event:{target:n}}=t;this.props=t,this.listeners=new Pe(Re(n)),this.windowListeners=new Pe(G(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(ee.Resize,this.handleCancel),this.windowListeners.add(ee.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(ee.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:t,onStart:n}=this.props,s=t.node.current;s&&hs(s),n(te)}handleKeyDown(t){if(Et(t)){const{active:n,context:s,options:i}=this.props,{keyboardCodes:a=yn,coordinateGetter:o=vs,scrollBehavior:c="smooth"}=i,{code:d}=t;if(a.end.includes(d)){this.handleEnd(t);return}if(a.cancel.includes(d)){this.handleCancel(t);return}const{collisionRect:h}=s.current,u=h?{x:h.left,y:h.top}:te;this.referenceCoordinates||(this.referenceCoordinates=u);const p=o(t,{active:n,context:s.current,currentCoordinates:u});if(p){const v=nt(p,u),g={x:0,y:0},{scrollableAncestors:j}=s.current;for(const b of j){const y=t.code,{isTop:k,isRight:S,isLeft:x,isBottom:R,maxScroll:E,minScroll:N}=mn(b),D=cs(b),C={x:Math.min(y===I.Right?D.right-D.width/2:D.right,Math.max(y===I.Right?D.left:D.left+D.width/2,p.x)),y:Math.min(y===I.Down?D.bottom-D.height/2:D.bottom,Math.max(y===I.Down?D.top:D.top+D.height/2,p.y))},m=y===I.Right&&!S||y===I.Left&&!x,T=y===I.Down&&!R||y===I.Up&&!k;if(m&&C.x!==p.x){const M=b.scrollLeft+v.x,$=y===I.Right&&M<=E.x||y===I.Left&&M>=N.x;if($&&!v.y){b.scrollTo({left:M,behavior:c});return}$?g.x=b.scrollLeft-M:g.x=y===I.Right?b.scrollLeft-E.x:b.scrollLeft-N.x,g.x&&b.scrollBy({left:-g.x,behavior:c});break}else if(T&&C.y!==p.y){const M=b.scrollTop+v.y,$=y===I.Down&&M<=E.y||y===I.Up&&M>=N.y;if($&&!v.x){b.scrollTo({top:M,behavior:c});return}$?g.y=b.scrollTop-M:g.y=y===I.Down?b.scrollTop-E.y:b.scrollTop-N.y,g.y&&b.scrollBy({top:-g.y,behavior:c});break}}this.handleMove(t,De(nt(p,this.referenceCoordinates),g))}}}handleMove(t,n){const{onMove:s}=this.props;t.preventDefault(),s(n)}handleEnd(t){const{onEnd:n}=this.props;t.preventDefault(),this.detach(),n()}handleCancel(t){const{onCancel:n}=this.props;t.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}wn.activators=[{eventName:"onKeyDown",handler:(e,t,n)=>{let{keyboardCodes:s=yn,onActivation:i}=t,{active:a}=n;const{code:o}=e.nativeEvent;if(s.start.includes(o)){const c=a.activatorNode.current;return c&&e.target!==c?!1:(e.preventDefault(),i==null||i({event:e.nativeEvent}),!0)}return!1}}];function Wt(e){return!!(e&&"distance"in e)}function Kt(e){return!!(e&&"delay"in e)}class _t{constructor(t,n,s){var i;s===void 0&&(s=fs(t.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=t,this.events=n;const{event:a}=t,{target:o}=a;this.props=t,this.events=n,this.document=Re(o),this.documentListeners=new Pe(this.document),this.listeners=new Pe(s),this.windowListeners=new Pe(G(o)),this.initialCoordinates=(i=wt(a))!=null?i:te,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:t,props:{options:{activationConstraint:n,bypassActivationConstraint:s}}}=this;if(this.listeners.add(t.move.name,this.handleMove,{passive:!1}),this.listeners.add(t.end.name,this.handleEnd),t.cancel&&this.listeners.add(t.cancel.name,this.handleCancel),this.windowListeners.add(ee.Resize,this.handleCancel),this.windowListeners.add(ee.DragStart,Ut),this.windowListeners.add(ee.VisibilityChange,this.handleCancel),this.windowListeners.add(ee.ContextMenu,Ut),this.documentListeners.add(ee.Keydown,this.handleKeydown),n){if(s!=null&&s({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(Kt(n)){this.timeoutId=setTimeout(this.handleStart,n.delay),this.handlePending(n);return}if(Wt(n)){this.handlePending(n);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(t,n){const{active:s,onPending:i}=this.props;i(s,t,this.initialCoordinates,n)}handleStart(){const{initialCoordinates:t}=this,{onStart:n}=this.props;t&&(this.activated=!0,this.documentListeners.add(ee.Click,gs,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(ee.SelectionChange,this.removeTextSelection),n(t))}handleMove(t){var n;const{activated:s,initialCoordinates:i,props:a}=this,{onMove:o,options:{activationConstraint:c}}=a;if(!i)return;const d=(n=wt(t))!=null?n:te,h=nt(i,d);if(!s&&c){if(Wt(c)){if(c.tolerance!=null&&gt(h,c.tolerance))return this.handleCancel();if(gt(h,c.distance))return this.handleStart()}if(Kt(c)&&gt(h,c.tolerance))return this.handleCancel();this.handlePending(c,h);return}t.cancelable&&t.preventDefault(),o(d)}handleEnd(){const{onAbort:t,onEnd:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleCancel(){const{onAbort:t,onCancel:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleKeydown(t){t.code===I.Esc&&this.handleCancel()}removeTextSelection(){var t;(t=this.document.getSelection())==null||t.removeAllRanges()}}const bs={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class At extends _t{constructor(t){const{event:n}=t,s=Re(n.target);super(t,bs,s)}}At.activators=[{eventName:"onPointerDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:s}=t;return!n.isPrimary||n.button!==0?!1:(s==null||s({event:n}),!0)}}];const ms={move:{name:"mousemove"},end:{name:"mouseup"}};var Nt;(function(e){e[e.RightClick=2]="RightClick"})(Nt||(Nt={}));class xs extends _t{constructor(t){super(t,ms,Re(t.event.target))}}xs.activators=[{eventName:"onMouseDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:s}=t;return n.button===Nt.RightClick?!1:(s==null||s({event:n}),!0)}}];const vt={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class ys extends _t{constructor(t){super(t,vt)}static setup(){return window.addEventListener(vt.move.name,t,{capture:!1,passive:!1}),function(){window.removeEventListener(vt.move.name,t)};function t(){}}}ys.activators=[{eventName:"onTouchStart",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:s}=t;const{touches:i}=n;return i.length>1?!1:(s==null||s({event:n}),!0)}}];var $e;(function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"})($e||($e={}));var st;(function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"})(st||(st={}));function ws(e){let{acceleration:t,activator:n=$e.Pointer,canScroll:s,draggingRect:i,enabled:a,interval:o=5,order:c=st.TreeOrder,pointerCoordinates:d,scrollableAncestors:h,scrollableAncestorRects:u,delta:p,threshold:v}=e;const g=Ns({delta:p,disabled:!a}),[j,b]=Mr(),y=l.useRef({x:0,y:0}),k=l.useRef({x:0,y:0}),S=l.useMemo(()=>{switch(n){case $e.Pointer:return d?{top:d.y,bottom:d.y,left:d.x,right:d.x}:null;case $e.DraggableRect:return i}},[n,i,d]),x=l.useRef(null),R=l.useCallback(()=>{const N=x.current;if(!N)return;const D=y.current.x*k.current.x,C=y.current.y*k.current.y;N.scrollBy(D,C)},[]),E=l.useMemo(()=>c===st.TreeOrder?[...h].reverse():h,[c,h]);l.useEffect(()=>{if(!a||!h.length||!S){b();return}for(const N of E){if((s==null?void 0:s(N))===!1)continue;const D=h.indexOf(N),C=u[D];if(!C)continue;const{direction:m,speed:T}=os(N,C,S,t,v);for(const M of["x","y"])g[M][m[M]]||(T[M]=0,m[M]=0);if(T.x>0||T.y>0){b(),x.current=N,j(R,o),y.current=T,k.current=m;return}}y.current={x:0,y:0},k.current={x:0,y:0},b()},[t,R,s,b,a,o,JSON.stringify(S),JSON.stringify(g),j,h,E,u,JSON.stringify(v)])}const js={x:{[F.Backward]:!1,[F.Forward]:!1},y:{[F.Backward]:!1,[F.Forward]:!1}};function Ns(e){let{delta:t,disabled:n}=e;const s=yt(t);return Ye(i=>{if(n||!s||!i)return js;const a={x:Math.sign(t.x-s.x),y:Math.sign(t.y-s.y)};return{x:{[F.Backward]:i.x[F.Backward]||a.x===-1,[F.Forward]:i.x[F.Forward]||a.x===1},y:{[F.Backward]:i.y[F.Backward]||a.y===-1,[F.Forward]:i.y[F.Forward]||a.y===1}}},[n,t,s])}function Cs(e,t){const n=t!=null?e.get(t):void 0,s=n?n.node.current:null;return Ye(i=>{var a;return t==null?null:(a=s??i)!=null?a:null},[s,t])}function ks(e,t){return l.useMemo(()=>e.reduce((n,s)=>{const{sensor:i}=s,a=i.activators.map(o=>({eventName:o.eventName,handler:t(o.handler,s)}));return[...n,...a]},[]),[e,t])}var He;(function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"})(He||(He={}));var Ct;(function(e){e.Optimized="optimized"})(Ct||(Ct={}));const Qt=new Map;function Ds(e,t){let{dragging:n,dependencies:s,config:i}=t;const[a,o]=l.useState(null),{frequency:c,measure:d,strategy:h}=i,u=l.useRef(e),p=y(),v=qe(p),g=l.useCallback(function(k){k===void 0&&(k=[]),!v.current&&o(S=>S===null?k:S.concat(k.filter(x=>!S.includes(x))))},[v]),j=l.useRef(null),b=Ye(k=>{if(p&&!n)return Qt;if(!k||k===Qt||u.current!==e||a!=null){const S=new Map;for(let x of e){if(!x)continue;if(a&&a.length>0&&!a.includes(x.id)&&x.rect.current){S.set(x.id,x.rect.current);continue}const R=x.node.current,E=R?new It(d(R),R):null;x.rect.current=E,E&&S.set(x.id,E)}return S}return k},[e,a,n,p,d]);return l.useEffect(()=>{u.current=e},[e]),l.useEffect(()=>{p||g()},[n,p]),l.useEffect(()=>{a&&a.length>0&&o(null)},[JSON.stringify(a)]),l.useEffect(()=>{p||typeof c!="number"||j.current!==null||(j.current=setTimeout(()=>{g(),j.current=null},c))},[c,p,g,...s]),{droppableRects:b,measureDroppableContainers:g,measuringScheduled:a!=null};function y(){switch(h){case He.Always:return!1;case He.BeforeDragging:return n;default:return!n}}}function jn(e,t){return Ye(n=>e?n||(typeof t=="function"?t(e):e):null,[t,e])}function Ss(e,t){return jn(e,t)}function Rs(e){let{callback:t,disabled:n}=e;const s=Rt(t),i=l.useMemo(()=>{if(n||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:a}=window;return new a(s)},[s,n]);return l.useEffect(()=>()=>i==null?void 0:i.disconnect(),[i]),i}function lt(e){let{callback:t,disabled:n}=e;const s=Rt(t),i=l.useMemo(()=>{if(n||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:a}=window;return new a(s)},[n]);return l.useEffect(()=>()=>i==null?void 0:i.disconnect(),[i]),i}function Es(e){return new It(Ee(e),e)}function Jt(e,t,n){t===void 0&&(t=Es);const[s,i]=l.useState(null);function a(){i(d=>{if(!e)return null;if(e.isConnected===!1){var h;return(h=d??n)!=null?h:null}const u=t(e);return JSON.stringify(d)===JSON.stringify(u)?d:u})}const o=Rs({callback(d){if(e)for(const h of d){const{type:u,target:p}=h;if(u==="childList"&&p instanceof HTMLElement&&p.contains(e)){a();break}}}}),c=lt({callback:a});return ae(()=>{a(),e?(c==null||c.observe(e),o==null||o.observe(document.body,{childList:!0,subtree:!0})):(c==null||c.disconnect(),o==null||o.disconnect())},[e]),s}function Ms(e){const t=jn(e);return pn(e,t)}const Zt=[];function Is(e){const t=l.useRef(e),n=Ye(s=>e?s&&s!==Zt&&e&&t.current&&e.parentNode===t.current.parentNode?s:Mt(e):Zt,[e]);return l.useEffect(()=>{t.current=e},[e]),n}function _s(e){const[t,n]=l.useState(null),s=l.useRef(e),i=l.useCallback(a=>{const o=ft(a.target);o&&n(c=>c?(c.set(o,jt(o)),new Map(c)):null)},[]);return l.useEffect(()=>{const a=s.current;if(e!==a){o(a);const c=e.map(d=>{const h=ft(d);return h?(h.addEventListener("scroll",i,{passive:!0}),[h,jt(h)]):null}).filter(d=>d!=null);n(c.length?new Map(c):null),s.current=e}return()=>{o(e),o(a)};function o(c){c.forEach(d=>{const h=ft(d);h==null||h.removeEventListener("scroll",i)})}},[i,e]),l.useMemo(()=>e.length?t?Array.from(t.values()).reduce((a,o)=>De(a,o),te):xn(e):te,[e,t])}function en(e,t){t===void 0&&(t=[]);const n=l.useRef(null);return l.useEffect(()=>{n.current=null},t),l.useEffect(()=>{const s=e!==te;s&&!n.current&&(n.current=e),!s&&n.current&&(n.current=null)},[e]),n.current?nt(e,n.current):te}function As(e){l.useEffect(()=>{if(!at)return;const t=e.map(n=>{let{sensor:s}=n;return s.setup==null?void 0:s.setup()});return()=>{for(const n of t)n==null||n()}},e.map(t=>{let{sensor:n}=t;return n}))}function Ts(e,t){return l.useMemo(()=>e.reduce((n,s)=>{let{eventName:i,handler:a}=s;return n[i]=o=>{a(o,t)},n},{}),[e,t])}function Nn(e){return l.useMemo(()=>e?ss(e):null,[e])}const tn=[];function zs(e,t){t===void 0&&(t=Ee);const[n]=e,s=Nn(n?G(n):null),[i,a]=l.useState(tn);function o(){a(()=>e.length?e.map(d=>bn(d)?s:new It(t(d),d)):tn)}const c=lt({callback:o});return ae(()=>{c==null||c.disconnect(),o(),e.forEach(d=>c==null?void 0:c.observe(d))},[e]),i}function Ls(e){if(!e)return null;if(e.children.length>1)return e;const t=e.children[0];return Ve(t)?t:e}function Os(e){let{measure:t}=e;const[n,s]=l.useState(null),i=l.useCallback(h=>{for(const{target:u}of h)if(Ve(u)){s(p=>{const v=t(u);return p?{...p,width:v.width,height:v.height}:v});break}},[t]),a=lt({callback:i}),o=l.useCallback(h=>{const u=Ls(h);a==null||a.disconnect(),u&&(a==null||a.observe(u)),s(u?t(u):null)},[t,a]),[c,d]=tt(o);return l.useMemo(()=>({nodeRef:c,rect:n,setRef:d}),[n,c,d])}const Ps=[{sensor:At,options:{}},{sensor:wn,options:{}}],$s={current:{}},Ze={draggable:{measure:Gt},droppable:{measure:Gt,strategy:He.WhileDragging,frequency:Ct.Optimized},dragOverlay:{measure:Ee}};class Be extends Map{get(t){var n;return t!=null&&(n=super.get(t))!=null?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(t=>{let{disabled:n}=t;return!n})}getNodeFor(t){var n,s;return(n=(s=this.get(t))==null?void 0:s.node.current)!=null?n:void 0}}const Bs={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new Be,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:rt},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:Ze,measureDroppableContainers:rt,windowRect:null,measuringScheduled:!1},Fs={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:rt,draggableNodes:new Map,over:null,measureDroppableContainers:rt},ot=l.createContext(Fs),Cn=l.createContext(Bs);function qs(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new Be}}}function Xs(e,t){switch(t.type){case P.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:t.initialCoordinates,active:t.active}};case P.DragMove:return e.draggable.active==null?e:{...e,draggable:{...e.draggable,translate:{x:t.coordinates.x-e.draggable.initialCoordinates.x,y:t.coordinates.y-e.draggable.initialCoordinates.y}}};case P.DragEnd:case P.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case P.RegisterDroppable:{const{element:n}=t,{id:s}=n,i=new Be(e.droppable.containers);return i.set(s,n),{...e,droppable:{...e.droppable,containers:i}}}case P.SetDroppableDisabled:{const{id:n,key:s,disabled:i}=t,a=e.droppable.containers.get(n);if(!a||s!==a.key)return e;const o=new Be(e.droppable.containers);return o.set(n,{...a,disabled:i}),{...e,droppable:{...e.droppable,containers:o}}}case P.UnregisterDroppable:{const{id:n,key:s}=t,i=e.droppable.containers.get(n);if(!i||s!==i.key)return e;const a=new Be(e.droppable.containers);return a.delete(n),{...e,droppable:{...e.droppable,containers:a}}}default:return e}}function Hs(e){let{disabled:t}=e;const{active:n,activatorEvent:s,draggableNodes:i}=l.useContext(ot),a=yt(s),o=yt(n==null?void 0:n.id);return l.useEffect(()=>{if(!t&&!s&&a&&o!=null){if(!Et(a)||document.activeElement===a.target)return;const c=i.get(o);if(!c)return;const{activatorNode:d,node:h}=c;if(!d.current&&!h.current)return;requestAnimationFrame(()=>{for(const u of[d.current,h.current]){if(!u)continue;const p=Ar(u);if(p){p.focus();break}}})}},[s,t,i,o,a]),null}function Vs(e,t){let{transform:n,...s}=t;return e!=null&&e.length?e.reduce((i,a)=>a({transform:i,...s}),n):n}function Ys(e){return l.useMemo(()=>({draggable:{...Ze.draggable,...e==null?void 0:e.draggable},droppable:{...Ze.droppable,...e==null?void 0:e.droppable},dragOverlay:{...Ze.dragOverlay,...e==null?void 0:e.dragOverlay}}),[e==null?void 0:e.draggable,e==null?void 0:e.droppable,e==null?void 0:e.dragOverlay])}function Gs(e){let{activeNode:t,measure:n,initialRect:s,config:i=!0}=e;const a=l.useRef(!1),{x:o,y:c}=typeof i=="boolean"?{x:i,y:i}:i;ae(()=>{if(!o&&!c||!t){a.current=!1;return}if(a.current||!s)return;const h=t==null?void 0:t.node.current;if(!h||h.isConnected===!1)return;const u=n(h),p=pn(u,s);if(o||(p.x=0),c||(p.y=0),a.current=!0,Math.abs(p.x)>0||Math.abs(p.y)>0){const v=fn(h);v&&v.scrollBy({top:p.y,left:p.x})}},[t,o,c,s,n])}const kn=l.createContext({...te,scaleX:1,scaleY:1});var me;(function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"})(me||(me={}));const Us=l.memo(function(t){var n,s,i,a;let{id:o,accessibility:c,autoScroll:d=!0,children:h,sensors:u=Ps,collisionDetection:p=Qr,measuring:v,modifiers:g,...j}=t;const b=l.useReducer(Xs,void 0,qs),[y,k]=b,[S,x]=$r(),[R,E]=l.useState(me.Uninitialized),N=R===me.Initialized,{draggable:{active:D,nodes:C,translate:m},droppable:{containers:T}}=y,M=D!=null?C.get(D):null,$=l.useRef({initial:null,translated:null}),V=l.useMemo(()=>{var H;return D!=null?{id:D,data:(H=M==null?void 0:M.data)!=null?H:$s,rect:$}:null},[D,M]),f=l.useRef(null),[w,A]=l.useState(null),[z,O]=l.useState(null),B=qe(j,Object.values(j)),X=Ge("DndDescribedBy",o),le=l.useMemo(()=>T.getEnabled(),[T]),Y=Ys(v),{droppableRects:oe,measureDroppableContainers:xe,measuringScheduled:Me}=Ds(le,{dragging:N,dependencies:[m.x,m.y],config:Y.droppable}),J=Cs(C,D),Ue=l.useMemo(()=>z?wt(z):null,[z]),he=On(),ce=Ss(J,Y.draggable.measure);Gs({activeNode:D!=null?C.get(D):null,config:he.layoutShiftCompensation,initialRect:ce,measure:Y.draggable.measure});const _=Jt(J,Y.draggable.measure,ce),Ie=Jt(J?J.parentElement:null),ne=l.useRef({activatorEvent:null,active:null,activeNode:J,collisionRect:null,collisions:null,droppableRects:oe,draggableNodes:C,draggingNode:null,draggingNodeRect:null,droppableContainers:T,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),ye=T.getNodeFor((n=ne.current.over)==null?void 0:n.id),de=Os({measure:Y.dragOverlay.measure}),we=(s=de.nodeRef.current)!=null?s:J,je=N?(i=de.rect)!=null?i:_:null,zt=!!(de.nodeRef.current&&de.rect),Lt=Ms(zt?null:_),ct=Nn(we?G(we):null),pe=Is(N?ye??J:null),We=zs(pe),Ke=Vs(g,{transform:{x:m.x-Lt.x,y:m.y-Lt.y,scaleX:1,scaleY:1},activatorEvent:z,active:V,activeNodeRect:_,containerNodeRect:Ie,draggingNodeRect:je,over:ne.current.over,overlayNodeRect:de.rect,scrollableAncestors:pe,scrollableAncestorRects:We,windowRect:ct}),Ot=Ue?De(Ue,m):null,Pt=_s(pe),Mn=en(Pt),In=en(Pt,[_]),Ne=De(Ke,Mn),Ce=je?es(je,Ke):null,_e=V&&Ce?p({active:V,collisionRect:Ce,droppableRects:oe,droppableContainers:le,pointerCoordinates:Ot}):null,$t=Ur(_e,"id"),[fe,Bt]=l.useState(null),_n=zt?Ke:De(Ke,In),An=Jr(_n,(a=fe==null?void 0:fe.rect)!=null?a:null,_),dt=l.useRef(null),Ft=l.useCallback((H,U)=>{let{sensor:W,options:ge}=U;if(f.current==null)return;const Z=C.get(f.current);if(!Z)return;const K=H.nativeEvent,re=new W({active:f.current,activeNode:Z,event:K,options:ge,context:ne,onAbort(q){if(!C.get(q))return;const{onDragAbort:se}=B.current,ue={id:q};se==null||se(ue),S({type:"onDragAbort",event:ue})},onPending(q,ve,se,ue){if(!C.get(q))return;const{onDragPending:Te}=B.current,be={id:q,constraint:ve,initialCoordinates:se,offset:ue};Te==null||Te(be),S({type:"onDragPending",event:be})},onStart(q){const ve=f.current;if(ve==null)return;const se=C.get(ve);if(!se)return;const{onDragStart:ue}=B.current,Ae={activatorEvent:K,active:{id:ve,data:se.data,rect:$}};Le.unstable_batchedUpdates(()=>{ue==null||ue(Ae),E(me.Initializing),k({type:P.DragStart,initialCoordinates:q,active:ve}),S({type:"onDragStart",event:Ae}),A(dt.current),O(K)})},onMove(q){k({type:P.DragMove,coordinates:q})},onEnd:ke(P.DragEnd),onCancel:ke(P.DragCancel)});dt.current=re;function ke(q){return async function(){const{active:se,collisions:ue,over:Ae,scrollAdjustedTranslate:Te}=ne.current;let be=null;if(se&&Te){const{cancelDrop:ze}=B.current;be={activatorEvent:K,active:se,collisions:ue,delta:Te,over:Ae},q===P.DragEnd&&typeof ze=="function"&&await Promise.resolve(ze(be))&&(q=P.DragCancel)}f.current=null,Le.unstable_batchedUpdates(()=>{k({type:q}),E(me.Uninitialized),Bt(null),A(null),O(null),dt.current=null;const ze=q===P.DragEnd?"onDragEnd":"onDragCancel";if(be){const ut=B.current[ze];ut==null||ut(be),S({type:ze,event:be})}})}}},[C]),Tn=l.useCallback((H,U)=>(W,ge)=>{const Z=W.nativeEvent,K=C.get(ge);if(f.current!==null||!K||Z.dndKit||Z.defaultPrevented)return;const re={active:K};H(W,U.options,re)===!0&&(Z.dndKit={capturedBy:U.sensor},f.current=ge,Ft(W,U))},[C,Ft]),qt=ks(u,Tn);As(u),ae(()=>{_&&R===me.Initializing&&E(me.Initialized)},[_,R]),l.useEffect(()=>{const{onDragMove:H}=B.current,{active:U,activatorEvent:W,collisions:ge,over:Z}=ne.current;if(!U||!W)return;const K={active:U,activatorEvent:W,collisions:ge,delta:{x:Ne.x,y:Ne.y},over:Z};Le.unstable_batchedUpdates(()=>{H==null||H(K),S({type:"onDragMove",event:K})})},[Ne.x,Ne.y]),l.useEffect(()=>{const{active:H,activatorEvent:U,collisions:W,droppableContainers:ge,scrollAdjustedTranslate:Z}=ne.current;if(!H||f.current==null||!U||!Z)return;const{onDragOver:K}=B.current,re=ge.get($t),ke=re&&re.rect.current?{id:re.id,rect:re.rect.current,data:re.data,disabled:re.disabled}:null,q={active:H,activatorEvent:U,collisions:W,delta:{x:Z.x,y:Z.y},over:ke};Le.unstable_batchedUpdates(()=>{Bt(ke),K==null||K(q),S({type:"onDragOver",event:q})})},[$t]),ae(()=>{ne.current={activatorEvent:z,active:V,activeNode:J,collisionRect:Ce,collisions:_e,droppableRects:oe,draggableNodes:C,draggingNode:we,draggingNodeRect:je,droppableContainers:T,over:fe,scrollableAncestors:pe,scrollAdjustedTranslate:Ne},$.current={initial:je,translated:Ce}},[V,J,_e,Ce,C,we,je,oe,T,fe,pe,Ne]),ws({...he,delta:m,draggingRect:Ce,pointerCoordinates:Ot,scrollableAncestors:pe,scrollableAncestorRects:We});const zn=l.useMemo(()=>({active:V,activeNode:J,activeNodeRect:_,activatorEvent:z,collisions:_e,containerNodeRect:Ie,dragOverlay:de,draggableNodes:C,droppableContainers:T,droppableRects:oe,over:fe,measureDroppableContainers:xe,scrollableAncestors:pe,scrollableAncestorRects:We,measuringConfiguration:Y,measuringScheduled:Me,windowRect:ct}),[V,J,_,z,_e,Ie,de,C,T,oe,fe,xe,pe,We,Y,Me,ct]),Ln=l.useMemo(()=>({activatorEvent:z,activators:qt,active:V,activeNodeRect:_,ariaDescribedById:{draggable:X},dispatch:k,draggableNodes:C,over:fe,measureDroppableContainers:xe}),[z,qt,V,_,k,X,C,fe,xe]);return L.createElement(hn.Provider,{value:x},L.createElement(ot.Provider,{value:Ln},L.createElement(Cn.Provider,{value:zn},L.createElement(kn.Provider,{value:An},h)),L.createElement(Hs,{disabled:(c==null?void 0:c.restoreFocus)===!1})),L.createElement(qr,{...c,hiddenTextDescribedById:X}));function On(){const H=(w==null?void 0:w.autoScrollEnabled)===!1,U=typeof d=="object"?d.enabled===!1:d===!1,W=N&&!H&&!U;return typeof d=="object"?{...d,enabled:W}:{enabled:W}}}),Ws=l.createContext(null),nn="button",Ks="Draggable";function Qs(e){let{id:t,data:n,disabled:s=!1,attributes:i}=e;const a=Ge(Ks),{activators:o,activatorEvent:c,active:d,activeNodeRect:h,ariaDescribedById:u,draggableNodes:p,over:v}=l.useContext(ot),{role:g=nn,roleDescription:j="draggable",tabIndex:b=0}=i??{},y=(d==null?void 0:d.id)===t,k=l.useContext(y?kn:Ws),[S,x]=tt(),[R,E]=tt(),N=Ts(o,t),D=qe(n);ae(()=>(p.set(t,{id:t,key:a,node:S,activatorNode:R,data:D}),()=>{const m=p.get(t);m&&m.key===a&&p.delete(t)}),[p,t]);const C=l.useMemo(()=>({role:g,tabIndex:b,"aria-disabled":s,"aria-pressed":y&&g===nn?!0:void 0,"aria-roledescription":j,"aria-describedby":u.draggable}),[s,g,b,y,j,u.draggable]);return{active:d,activatorEvent:c,activeNodeRect:h,attributes:C,isDragging:y,listeners:s?void 0:N,node:S,over:v,setNodeRef:x,setActivatorNodeRef:E,transform:k}}function Js(){return l.useContext(Cn)}const Zs="Droppable",ei={timeout:25};function ti(e){let{data:t,disabled:n=!1,id:s,resizeObserverConfig:i}=e;const a=Ge(Zs),{active:o,dispatch:c,over:d,measureDroppableContainers:h}=l.useContext(ot),u=l.useRef({disabled:n}),p=l.useRef(!1),v=l.useRef(null),g=l.useRef(null),{disabled:j,updateMeasurementsFor:b,timeout:y}={...ei,...i},k=qe(b??s),S=l.useCallback(()=>{if(!p.current){p.current=!0;return}g.current!=null&&clearTimeout(g.current),g.current=setTimeout(()=>{h(Array.isArray(k.current)?k.current:[k.current]),g.current=null},y)},[y]),x=lt({callback:S,disabled:j||!o}),R=l.useCallback((C,m)=>{x&&(m&&(x.unobserve(m),p.current=!1),C&&x.observe(C))},[x]),[E,N]=tt(R),D=qe(t);return l.useEffect(()=>{!x||!E.current||(x.disconnect(),p.current=!1,x.observe(E.current))},[E,x]),l.useEffect(()=>(c({type:P.RegisterDroppable,element:{id:s,key:a,disabled:n,node:E,rect:v,data:D}}),()=>c({type:P.UnregisterDroppable,key:a,id:s})),[s]),l.useEffect(()=>{n!==u.current.disabled&&(c({type:P.SetDroppableDisabled,id:s,key:a,disabled:n}),u.current.disabled=n)},[s,a,n,c]),{active:o,rect:v,isOver:(d==null?void 0:d.id)===s,node:E,over:d,setNodeRef:N}}function Tt(e,t,n){const s=e.slice();return s.splice(n<0?s.length+n:n,0,s.splice(t,1)[0]),s}function ni(e,t){return e.reduce((n,s,i)=>{const a=t.get(s);return a&&(n[i]=a),n},Array(e.length))}function Qe(e){return e!==null&&e>=0}function ri(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function si(e){return typeof e=="boolean"?{draggable:e,droppable:e}:e}const Dn=e=>{let{rects:t,activeIndex:n,overIndex:s,index:i}=e;const a=Tt(t,s,n),o=t[i],c=a[i];return!c||!o?null:{x:c.left-o.left,y:c.top-o.top,scaleX:c.width/o.width,scaleY:c.height/o.height}},Je={scaleX:1,scaleY:1},ii=e=>{var t;let{activeIndex:n,activeNodeRect:s,index:i,rects:a,overIndex:o}=e;const c=(t=a[n])!=null?t:s;if(!c)return null;if(i===n){const h=a[o];return h?{x:0,y:n<o?h.top+h.height-(c.top+c.height):h.top-c.top,...Je}:null}const d=ai(a,i,n);return i>n&&i<=o?{x:0,y:-c.height-d,...Je}:i<n&&i>=o?{x:0,y:c.height+d,...Je}:{x:0,y:0,...Je}};function ai(e,t,n){const s=e[t],i=e[t-1],a=e[t+1];return s?n<t?i?s.top-(i.top+i.height):a?a.top-(s.top+s.height):0:a?a.top-(s.top+s.height):i?s.top-(i.top+i.height):0:0}const Sn="Sortable",Rn=L.createContext({activeIndex:-1,containerId:Sn,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:Dn,disabled:{draggable:!1,droppable:!1}});function li(e){let{children:t,id:n,items:s,strategy:i=Dn,disabled:a=!1}=e;const{active:o,dragOverlay:c,droppableRects:d,over:h,measureDroppableContainers:u}=Js(),p=Ge(Sn,n),v=c.rect!==null,g=l.useMemo(()=>s.map(N=>typeof N=="object"&&"id"in N?N.id:N),[s]),j=o!=null,b=o?g.indexOf(o.id):-1,y=h?g.indexOf(h.id):-1,k=l.useRef(g),S=!ri(g,k.current),x=y!==-1&&b===-1||S,R=si(a);ae(()=>{S&&j&&u(g)},[S,g,j,u]),l.useEffect(()=>{k.current=g},[g]);const E=l.useMemo(()=>({activeIndex:b,containerId:p,disabled:R,disableTransforms:x,items:g,overIndex:y,useDragOverlay:v,sortedRects:ni(g,d),strategy:i}),[b,p,R.draggable,R.droppable,x,g,y,d,v,i]);return L.createElement(Rn.Provider,{value:E},t)}const oi=e=>{let{id:t,items:n,activeIndex:s,overIndex:i}=e;return Tt(n,s,i).indexOf(t)},ci=e=>{let{containerId:t,isSorting:n,wasDragging:s,index:i,items:a,newIndex:o,previousItems:c,previousContainerId:d,transition:h}=e;return!h||!s||c!==a&&i===o?!1:n?!0:o!==i&&t===d},di={duration:200,easing:"ease"},En="transform",ui=Xe.Transition.toString({property:En,duration:0,easing:"linear"}),hi={roleDescription:"sortable"};function pi(e){let{disabled:t,index:n,node:s,rect:i}=e;const[a,o]=l.useState(null),c=l.useRef(n);return ae(()=>{if(!t&&n!==c.current&&s.current){const d=i.current;if(d){const h=Ee(s.current,{ignoreTransform:!0}),u={x:d.left-h.left,y:d.top-h.top,scaleX:d.width/h.width,scaleY:d.height/h.height};(u.x||u.y)&&o(u)}}n!==c.current&&(c.current=n)},[t,n,s,i]),l.useEffect(()=>{a&&o(null)},[a]),a}function fi(e){let{animateLayoutChanges:t=ci,attributes:n,disabled:s,data:i,getNewIndex:a=oi,id:o,strategy:c,resizeObserverConfig:d,transition:h=di}=e;const{items:u,containerId:p,activeIndex:v,disabled:g,disableTransforms:j,sortedRects:b,overIndex:y,useDragOverlay:k,strategy:S}=l.useContext(Rn),x=gi(s,g),R=u.indexOf(o),E=l.useMemo(()=>({sortable:{containerId:p,index:R,items:u},...i}),[p,i,R,u]),N=l.useMemo(()=>u.slice(u.indexOf(o)),[u,o]),{rect:D,node:C,isOver:m,setNodeRef:T}=ti({id:o,data:E,disabled:x.droppable,resizeObserverConfig:{updateMeasurementsFor:N,...d}}),{active:M,activatorEvent:$,activeNodeRect:V,attributes:f,setNodeRef:w,listeners:A,isDragging:z,over:O,setActivatorNodeRef:B,transform:X}=Qs({id:o,data:E,attributes:{...hi,...n},disabled:x.draggable}),le=Er(T,w),Y=!!M,oe=Y&&!j&&Qe(v)&&Qe(y),xe=!k&&z,Me=xe&&oe?X:null,Ue=oe?Me??(c??S)({rects:b,activeNodeRect:V,activeIndex:v,overIndex:y,index:R}):null,he=Qe(v)&&Qe(y)?a({id:o,items:u,activeIndex:v,overIndex:y}):R,ce=M==null?void 0:M.id,_=l.useRef({activeId:ce,items:u,newIndex:he,containerId:p}),Ie=u!==_.current.items,ne=t({active:M,containerId:p,isDragging:z,isSorting:Y,id:o,index:R,items:u,newIndex:_.current.newIndex,previousItems:_.current.items,previousContainerId:_.current.containerId,transition:h,wasDragging:_.current.activeId!=null}),ye=pi({disabled:!ne,index:R,node:C,rect:D});return l.useEffect(()=>{Y&&_.current.newIndex!==he&&(_.current.newIndex=he),p!==_.current.containerId&&(_.current.containerId=p),u!==_.current.items&&(_.current.items=u)},[Y,he,p,u]),l.useEffect(()=>{if(ce===_.current.activeId)return;if(ce!=null&&_.current.activeId==null){_.current.activeId=ce;return}const we=setTimeout(()=>{_.current.activeId=ce},50);return()=>clearTimeout(we)},[ce]),{active:M,activeIndex:v,attributes:f,data:E,rect:D,index:R,newIndex:he,items:u,isOver:m,isSorting:Y,isDragging:z,listeners:A,node:C,overIndex:y,over:O,setNodeRef:le,setActivatorNodeRef:B,setDroppableNodeRef:T,setDraggableNodeRef:w,transform:ye??Ue,transition:de()};function de(){if(ye||Ie&&_.current.newIndex===R)return ui;if(!(xe&&!Et($)||!h)&&(Y||ne))return Xe.Transition.toString({...h,property:En})}}function gi(e,t){var n,s;return typeof e=="boolean"?{draggable:e,droppable:!1}:{draggable:(n=e==null?void 0:e.draggable)!=null?n:t.draggable,droppable:(s=e==null?void 0:e.droppable)!=null?s:t.droppable}}I.Down,I.Right,I.Up,I.Left;function Ni(){var $,V;const[e,t]=l.useState(null),[n,s]=l.useState(!0),[i,a]=l.useState("links"),[o,c]=l.useState(!1),[d,h]=l.useState(!1),u=Pn(),{confirm:p,ConfirmDialog:v}=$n(),[g,j]=l.useState(null),[b,y]=l.useState([]),k=Hr(Xr(At,{activationConstraint:{distance:5}}));l.useEffect(()=>{S()},[]);const S=async()=>{try{const{data:{user:f}}=await Bn.auth.getUser();if(f){const w=await ie.getOrCreateProfile(f);t(w)}}catch(f){console.error(f)}finally{s(!1)}};l.useEffect(()=>{e!=null&&e.id&&ie.getAchievements(e.id).then(y)},[e==null?void 0:e.id]),l.useEffect(()=>{const f=w=>{(w.metaKey||w.ctrlKey)&&w.key==="s"&&(w.preventDefault(),u.success("✓ Cambios guardados automáticamente")),(w.metaKey||w.ctrlKey)&&w.key==="k"&&(w.preventDefault(),R()),w.key==="Escape"&&g&&j(null)};return window.addEventListener("keydown",f),()=>window.removeEventListener("keydown",f)},[g,e]);const x=async(f,w)=>{e&&(t({...e,[f]:w}),c(!0),await ie.updateProfile(e.id,{[f]:w}),setTimeout(()=>c(!1),500))},R=async()=>{var z;if(!e)return;const f="temp-"+Date.now(),w={id:f,title:"Nuevo enlace",url:"",active:!0,clicks:0,block_type:"link",order_index:(((z=e.links)==null?void 0:z.length)||0)+1};t({...e,links:[...e.links,w]}),j(f);const A=await ie.addLink(e.id,"Nuevo enlace","");A&&(t(O=>O&&{...O,links:O.links.map(B=>B.id===f?{...A}:B)}),j(A.id))},E=async f=>{var B;if(!e)return;const w="temp-"+Date.now(),A={header:"Nuevo Header",divider:"---",spotlight:"⭐ Destacado"},z={id:w,title:A[f],url:f==="divider"?"":"#",active:!0,clicks:0,block_type:f,order_index:(((B=e.links)==null?void 0:B.length)||0)+1};t({...e,links:[...e.links,z]}),f!=="divider"&&j(w);const O=await ie.addLink(e.id,A[f],f==="divider"?"":"#",{block_type:f});O&&(t(X=>X&&{...X,links:X.links.map(le=>le.id===w?{...O}:le)}),f!=="divider"&&j(O.id))},N=async(f,w,A)=>{if(!e)return;const z=e.links.map(O=>O.id===f?{...O,[w]:A}:O);t({...e,links:z}),f.startsWith("temp-")||await ie.updateLink(f,{[w]:A})},D=async f=>{!e||!await p("Eliminar enlace","¿Estás seguro de que quieres eliminar este enlace permanentemente?","danger")||(t({...e,links:e.links.filter(A=>A.id!==f)}),await ie.deleteLink(f),u.success("Enlace eliminado"))},C=async f=>{if(!e)return;const{active:w,over:A}=f;if(!A||w.id===A.id)return;const z=e.links.findIndex(X=>X.id===w.id),O=e.links.findIndex(X=>X.id===A.id),B=Tt(e.links,z,O).map((X,le)=>({...X,order_index:le}));t({...e,links:B}),await ie.reorderLinks(B),u.success("Orden actualizado")},m=async(f,w)=>{await N(f,"active",w),u.success(w?"Enlace activado":"Enlace desactivado")},T=async(f,w)=>{var A;if(!(!e||!((A=f.target.files)!=null&&A[0])))try{c(!0);const z=await ie.uploadImage(f.target.files[0],e.user_id,w);w==="avatar"?x("avatar_url",z):(x("background_url",z),x("theme","custom"))}catch{u.error("Error al subir imagen")}finally{c(!1)}},M=async(f,w)=>{if(e)try{const A=await ie.uploadImage(w,e.user_id,"thumbnail");await N(f,"thumbnail_url",A)}catch(A){console.error("Thumbnail upload failed:",A),u.error("Error al subir miniatura")}};return n?r.jsx("div",{className:"h-screen w-full bg-slate-950 flex items-center justify-center",children:r.jsx(bt,{className:"animate-spin text-blue-500"})}):e?r.jsxs("div",{className:"lp-bio-shell-v3",children:[r.jsxs("button",{className:"lp-preview-fab md:hidden",onClick:()=>h(!0),children:[r.jsx(Xt,{size:18}),r.jsx("span",{children:"Vista Previa"})]}),d&&r.jsx("div",{className:"lp-preview-modal-overlay",onClick:()=>h(!1),children:r.jsxs("div",{className:"lp-preview-modal",onClick:f=>f.stopPropagation(),children:[r.jsxs("div",{className:"lp-preview-modal-header",children:[r.jsx("span",{children:"Vista Previa en Vivo"}),r.jsx("button",{onClick:()=>h(!1),children:"✕"})]}),r.jsx("div",{className:"lp-preview-modal-frame",children:r.jsx(rn,{profile:e})})]})}),r.jsxs("div",{className:"lp-container",children:[r.jsxs("div",{className:"lp-editor-col",children:[r.jsxs("div",{className:"lp-nav",children:[r.jsxs("div",{className:"lp-logo text-white",children:[r.jsx(pr,{size:20,className:"text-blue-500"}),"LinkPay"]}),r.jsxs("div",{className:"lp-global-stats",children:[r.jsxs("div",{className:"lp-stat-pill",children:[r.jsx(Xt,{size:14}),r.jsx("span",{children:e.views||0})]}),r.jsxs("div",{className:"lp-stat-pill",children:[r.jsx(et,{size:14}),r.jsx("span",{children:(($=e.links)==null?void 0:$.reduce((f,w)=>f+(w.clicks||0),0))||0})]})]}),r.jsxs("div",{className:"lp-nav-actions",children:[o&&r.jsxs("div",{className:"lp-saving-indicator",children:[r.jsx(bt,{size:12,className:"animate-spin"}),r.jsx("span",{children:"Guardando"})]}),r.jsxs("button",{className:"lp-btn-basic lp-btn-primary",onClick:async()=>{const f=`${window.location.origin}/b/${e.username}`;await navigator.clipboard.writeText(f),u.success("URL copiada al portapapeles")},children:[r.jsx(nr,{size:14})," Compartir"]})]})]}),r.jsx("div",{className:"lp-tabs-container",children:r.jsxs("div",{className:"lp-tabs-list",role:"tablist","aria-label":"Editor sections",children:[r.jsx("button",{role:"tab","aria-selected":i==="links",className:`lp-tab ${i==="links"?"active":""}`,onClick:()=>a("links"),children:"Enlaces"}),r.jsx("button",{role:"tab","aria-selected":i==="appearance",className:`lp-tab ${i==="appearance"?"active":""}`,onClick:()=>a("appearance"),children:"Apariencia"}),r.jsx("button",{role:"tab","aria-selected":i==="earn",className:`lp-tab ${i==="earn"?"active":""}`,onClick:()=>a("earn"),children:"Earn"}),r.jsx("button",{role:"tab","aria-selected":i==="settings",className:`lp-tab ${i==="settings"?"active":""}`,onClick:()=>a("settings"),children:"Ajustes"})]})}),r.jsx("div",{className:"lp-scroll-area",children:r.jsxs("div",{className:"lp-content-max",children:[i==="links"&&r.jsxs(r.Fragment,{children:[r.jsxs("button",{className:"lp-btn-add-primary",onClick:R,children:[r.jsx(ht,{size:20})," Añadir enlace"]}),r.jsxs("div",{className:"lp-add-special-row",children:[r.jsx("span",{className:"lp-add-special-label",children:"Añadir bloque:"}),r.jsxs("button",{className:"lp-btn-special",onClick:()=>E("header"),children:[r.jsx(cn,{size:14})," Header"]}),r.jsxs("button",{className:"lp-btn-special",onClick:()=>E("divider"),children:[r.jsx(on,{size:14})," Divisor"]}),r.jsxs("button",{className:"lp-btn-special",onClick:()=>E("spotlight"),children:[r.jsx(xt,{size:14})," Spotlight"]})]}),r.jsx(Us,{sensors:k,collisionDetection:Wr,onDragEnd:C,children:r.jsx(li,{items:e.links.map(f=>f.id),strategy:ii,children:r.jsx("div",{className:"flex flex-col gap-4",children:e.links.map(f=>r.jsx(vi,{link:f,onUpdate:N,onDelete:D,isExpanded:g===f.id,onToggleExpand:()=>j(g===f.id?null:f.id),onThumbnailUpload:M,onToggleActive:m},f.id))})})}),e.links.length===0&&r.jsxs("div",{className:"lp-empty-state-premium",children:[r.jsx("div",{className:"lp-empty-icon",children:r.jsx(Fe,{size:32})}),r.jsx("h3",{className:"lp-empty-title",children:"Tu página está vacía"}),r.jsx("p",{className:"lp-empty-desc",children:"Añade tu primer enlace y empieza a compartir tu contenido con el mundo"}),r.jsxs("button",{className:"lp-empty-cta",onClick:R,children:[r.jsx(ht,{size:18})," Crear mi primer enlace"]})]})]}),i==="appearance"&&r.jsxs("div",{className:"lp-appearance-container",children:[r.jsxs("div",{className:"lp-settings-card",children:[r.jsxs("div",{className:"lp-settings-card-header",children:[r.jsx("div",{className:"lp-settings-icon-box",children:r.jsx(Fn,{size:18})}),r.jsxs("div",{children:[r.jsx("h3",{children:"Perfil"}),r.jsx("p",{children:"Tu foto y datos principales"})]})]}),r.jsxs("div",{className:"lp-profile-row",children:[r.jsxs("label",{className:"lp-avatar-upload-v2",children:[e.avatar_url?r.jsx("img",{src:e.avatar_url,alt:"Avatar"}):r.jsx("div",{className:"lp-avatar-placeholder-v2",children:(V=e.username[0])==null?void 0:V.toUpperCase()}),r.jsx("div",{className:"lp-avatar-edit-overlay",children:r.jsx(er,{size:16})}),r.jsx("input",{type:"file",accept:"image/*",onChange:f=>T(f,"avatar")})]}),r.jsxs("div",{className:"lp-settings-fields",style:{flex:1},children:[r.jsxs("div",{className:"lp-input-group",children:[r.jsx("label",{children:"Nombre"}),r.jsx("input",{value:e.display_name,onChange:f=>x("display_name",f.target.value),placeholder:"Tu nombre o marca"})]}),r.jsxs("div",{className:"lp-input-group",children:[r.jsx("label",{children:"Bio"}),r.jsx("textarea",{value:e.description,onChange:f=>x("description",f.target.value),placeholder:"Cuéntale al mundo quién eres...",rows:2})]})]})]})]}),r.jsxs("div",{className:"lp-settings-card",children:[r.jsxs("div",{className:"lp-settings-card-header",children:[r.jsx("div",{className:"lp-settings-icon-box",style:{background:"linear-gradient(135deg, #ec4899 0%, #f43f5e 100%)"},children:r.jsx(tr,{size:18})}),r.jsxs("div",{children:[r.jsx("h3",{children:"Tema"}),r.jsx("p",{children:"Elige el look de tu página"})]})]}),r.jsx("div",{className:"lp-theme-selector",children:[{id:"light",name:"Claro",bg:"#f8fafc",text:"#334155"},{id:"dark",name:"Oscuro",bg:"#0f172a",text:"#94a3b8"},{id:"blue",name:"Azul",bg:"#2563eb",text:"white"},{id:"gradient",name:"Gradiente",bg:"linear-gradient(135deg, #6366f1 0%, #a855f7 100%)",text:"white"},{id:"neon",name:"Neon",bg:"#000",text:"#39ff14"},{id:"pastel",name:"Pastel",bg:"linear-gradient(135deg, #fce7f3 0%, #ede9fe 100%)",text:"#6b21a8"}].map(f=>r.jsxs("div",{className:`lp-theme-item ${e.theme===f.id?"active":""}`,style:{background:f.bg},onClick:()=>x("theme",f.id),children:[r.jsx("span",{style:{color:f.text},children:f.name}),e.theme===f.id&&r.jsx("div",{className:"lp-theme-check",children:"✓"})]},f.id))})]}),r.jsxs("div",{className:"lp-settings-card",children:[r.jsxs("div",{className:"lp-settings-card-header",children:[r.jsx("div",{className:"lp-settings-icon-box blue",children:r.jsx(et,{size:18})}),r.jsxs("div",{children:[r.jsx("h3",{children:"Estilo de Botones"}),r.jsx("p",{children:"Personaliza la forma de tus enlaces"})]})]}),r.jsx("div",{className:"lp-button-style-grid",children:[{id:"rounded",label:"Rounded",radius:"8px",fill:!0},{id:"pill",label:"Pill",radius:"100px",fill:!0},{id:"square",label:"Square",radius:"0px",fill:!0},{id:"shadow",label:"Shadow",radius:"8px",shadow:!0},{id:"outline",label:"Outline",radius:"8px",outline:!0},{id:"glass",label:"Glass",radius:"8px",glass:!0}].map(f=>r.jsxs("div",{className:`lp-button-style-item ${e.button_style===f.id?"active":""}`,onClick:()=>x("button_style",f.id),children:[r.jsx("div",{className:"lp-button-preview",style:{borderRadius:f.radius,background:f.fill?"rgba(255,255,255,0.12)":"transparent",border:f.outline?"2px solid white":f.shadow?"2px solid black":"1px solid rgba(255,255,255,0.2)",boxShadow:f.shadow?"3px 3px 0 black":"none",backdropFilter:f.glass?"blur(4px)":"none"}}),r.jsx("span",{children:f.label})]},f.id))})]}),r.jsxs("div",{className:"lp-settings-card",children:[r.jsxs("div",{className:"lp-settings-card-header",children:[r.jsx("div",{className:"lp-settings-icon-box",style:{background:"linear-gradient(135deg, #10b981 0%, #059669 100%)"},children:r.jsx(ln,{size:18})}),r.jsxs("div",{children:[r.jsx("h3",{children:"Fondo"}),r.jsx("p",{children:"Imagen de fondo personalizada"})]})]}),r.jsxs("div",{className:"lp-background-options",children:[r.jsxs("div",{className:`lp-bg-option ${e.background_url?"":"active"}`,onClick:()=>x("background_url",""),children:[r.jsx("div",{className:"lp-bg-preview none",children:"✕"}),r.jsx("span",{children:"Sin fondo"})]}),e.background_url&&r.jsxs("div",{className:"lp-bg-option active",children:[r.jsx("div",{className:"lp-bg-preview",style:{backgroundImage:`url(${e.background_url})`}}),r.jsx("span",{children:"Actual"})]}),r.jsxs("label",{className:"lp-bg-option upload",children:[r.jsx("div",{className:"lp-bg-preview upload-icon",children:r.jsx(ht,{size:20})}),r.jsx("span",{children:"Subir"}),r.jsx("input",{type:"file",accept:"image/*",onChange:f=>T(f,"background")})]})]})]}),r.jsxs("div",{className:"lp-settings-card",children:[r.jsxs("div",{className:"lp-settings-card-header",children:[r.jsx("div",{className:"lp-settings-icon-box",style:{background:e.accent_color||"#6366f1"},children:r.jsx(br,{size:18})}),r.jsxs("div",{children:[r.jsx("h3",{children:"Color de Acento"}),r.jsx("p",{children:"Define el color principal de tu página"})]})]}),r.jsxs("div",{className:"lp-accent-colors",children:[["#6366f1","#8b5cf6","#ec4899","#f43f5e","#10b981","#3b82f6","#f59e0b","#06b6d4","#ef4444","#84cc16"].map(f=>r.jsx("button",{type:"button",className:`lp-accent-btn ${e.accent_color===f?"active":""}`,style:{background:f},onClick:()=>x("accent_color",f)},f)),r.jsxs("label",{className:"lp-accent-custom",children:[r.jsx("input",{type:"color",value:e.accent_color||"#6366f1",onChange:f=>x("accent_color",f.target.value)}),r.jsx("span",{children:"Custom"})]})]})]})]}),i==="earn"&&r.jsxs("div",{className:"lp-earn-container",children:[r.jsx("p",{className:"lp-earn-subtitle",children:"Elige el modo de monetización que mejor se adapte a tu audiencia"}),r.jsxs("div",{className:"lp-earn-cards",children:[r.jsxs("div",{className:`lp-earn-card ${e.monetization_mode==="standard"?"active":""}`,onClick:()=>x("monetization_mode","standard"),children:[r.jsx("div",{className:"lp-earn-card-icon",style:{background:"linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%)"},children:r.jsx(kt,{size:24})}),r.jsxs("div",{className:"lp-earn-card-content",children:[r.jsx("h3",{children:"Standard"}),r.jsx("p",{children:"Equilibrio perfecto entre experiencia de usuario y ganancias."}),r.jsxs("div",{className:"lp-earn-rpm",children:[r.jsx("span",{className:"lp-rpm-value",children:"$1.50"}),r.jsx("span",{className:"lp-rpm-label",children:"RPM"})]})]})]}),r.jsxs("div",{className:`lp-earn-card turbo ${e.monetization_mode==="turbo"?"active":""}`,onClick:()=>x("monetization_mode","turbo"),children:[r.jsx("div",{className:"lp-earn-badge",children:"⚡ Recomendado"}),r.jsx("div",{className:"lp-earn-card-icon",style:{background:"linear-gradient(135deg, #f59e0b 0%, #d97706 100%)"},children:r.jsx(it,{size:24})}),r.jsxs("div",{className:"lp-earn-card-content",children:[r.jsx("h3",{children:"Turbo"}),r.jsx("p",{children:"Máximas ganancias. Ideal para creadores con audiencia comprometida."}),r.jsxs("div",{className:"lp-earn-rpm",children:[r.jsx("span",{className:"lp-rpm-value",children:"$5.00+"}),r.jsx("span",{className:"lp-rpm-label",children:"RPM"})]})]})]})]}),r.jsxs("div",{className:"lp-earn-tip",children:[r.jsx("span",{className:"lp-tip-icon",children:"💡"}),r.jsxs("p",{children:["Turbo Mode puede generar hasta ",r.jsx("strong",{children:"3x más ingresos"})," con la misma audiencia."]})]})]}),i==="settings"&&r.jsxs("div",{className:"lp-settings-container",children:[r.jsxs("div",{className:"lp-settings-card",children:[r.jsxs("div",{className:"lp-settings-card-header",children:[r.jsx("div",{className:"lp-settings-icon-box",style:{background:"linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%)"},children:r.jsx(Fe,{size:18})}),r.jsxs("div",{children:[r.jsx("h3",{children:"Tu URL"}),r.jsx("p",{children:"La dirección única de tu BioPage"})]})]}),r.jsx("div",{className:"lp-settings-fields",children:r.jsxs("div",{className:"lp-input-group",children:[r.jsx("label",{children:"Username"}),r.jsxs("div",{className:"lp-input-with-prefix",children:[r.jsx("span",{className:"lp-input-prefix",children:"linkpay.me/b/"}),r.jsx("input",{value:e.username,onChange:f=>{const w=f.target.value.toLowerCase().replace(/[^a-z0-9_]/g,"");w.length<=30&&x("username",w)},placeholder:"tu-username",maxLength:30})]}),r.jsx("span",{className:"lp-input-hint",children:"Solo letras, números y guión bajo. Máx 30 caracteres."})]})})]}),r.jsxs("div",{className:"lp-settings-card",children:[r.jsxs("div",{className:"lp-settings-card-header",children:[r.jsx("div",{className:"lp-settings-icon-box",children:r.jsx(sn,{size:18})}),r.jsxs("div",{children:[r.jsx("h3",{children:"SEO & Metadatos"}),r.jsx("p",{children:"Optimiza cómo apareces en buscadores"})]})]}),r.jsxs("div",{className:"lp-settings-fields",children:[r.jsxs("div",{className:"lp-input-group",children:[r.jsx("label",{children:"Meta Título"}),r.jsx("input",{value:e.display_name,onChange:f=>x("display_name",f.target.value),placeholder:"Ej. Mis Enlaces Oficiales"}),r.jsx("span",{className:"lp-input-hint",children:"Se mostrará como título en Google"})]}),r.jsxs("div",{className:"lp-input-group",children:[r.jsx("label",{children:"Meta Descripción"}),r.jsx("textarea",{value:e.description,onChange:f=>x("description",f.target.value),placeholder:"Descripción breve para buscadores...",rows:2}),r.jsx("span",{className:"lp-input-hint",children:"Máximo 160 caracteres recomendado"})]})]})]}),r.jsx("div",{className:"lp-settings-card",children:r.jsxs("div",{className:"lp-settings-row",children:[r.jsxs("div",{className:"lp-settings-info",children:[r.jsx("div",{className:"lp-settings-icon-box blue",children:r.jsx(qn,{size:18})}),r.jsxs("div",{children:[r.jsx("h4",{children:"Mostrar estadísticas"}),r.jsx("p",{children:"Muestra el contador de visitas en tu Bio"})]})]}),r.jsx("button",{type:"button",className:`lp-switch ${e.show_views!==!1?"active":""}`,onClick:()=>x("show_views",e.show_views===!1),children:r.jsx("div",{className:"lp-switch-dot"})})]})}),r.jsxs("div",{className:"lp-settings-card",children:[r.jsxs("div",{className:"lp-settings-card-header",children:[r.jsx("div",{className:"lp-settings-icon-box",style:{background:"linear-gradient(135deg, #10b981 0%, #059669 100%)"},children:r.jsx(gr,{size:18})}),r.jsxs("div",{children:[r.jsx("h3",{children:"Código QR"}),r.jsx("p",{children:"Comparte tu BioPage fácilmente"})]})]}),r.jsx(Cr,{url:`https://linkpay.me/b/${e.username}`,username:e.username,accentColor:e.accent_color})]}),r.jsxs("div",{className:"lp-settings-card",children:[r.jsxs("div",{className:"lp-settings-card-header",children:[r.jsx("div",{className:"lp-settings-icon-box",style:{background:"linear-gradient(135deg, #eab308 0%, #f59e0b 100%)"},children:r.jsx(an,{size:18})}),r.jsxs("div",{children:[r.jsx("h3",{children:"Progreso y Logros"}),r.jsx("p",{children:"Completa tu perfil y desbloquea badges"})]})]}),r.jsx(Dr,{profile:e}),r.jsx("div",{style:{marginTop:"16px"},children:r.jsx(Rr,{level:e.level||1,xp:e.xp||0})}),r.jsxs("div",{className:"lp-gamification-section",children:[r.jsxs("h4",{children:[r.jsx(xt,{size:16})," Logros Desbloqueados"]}),r.jsx(Sr,{achievements:b})]})]})]})]})})]}),r.jsx("div",{className:"lp-preview-col",children:r.jsxs("div",{className:"lp-mobile-frame",children:[r.jsx(rn,{profile:e}),r.jsxs("div",{className:"lp-scroll-indicator",children:[r.jsx(mt,{size:16}),r.jsx("span",{children:"Desliza para ver más"})]})]})})]}),r.jsx(v,{})]}):null}const Oe={instagram:{icon:Jn,label:"Instagram",color:"#E4405F"},twitter:{icon:Qn,label:"Twitter/X",color:"#1DA1F2"},youtube:{icon:Kn,label:"YouTube",color:"#FF0000"},twitch:{icon:Wn,label:"Twitch",color:"#9146FF"},github:{icon:Un,label:"GitHub",color:"#333"},linkedin:{icon:Gn,label:"LinkedIn",color:"#0A66C2"},facebook:{icon:Yn,label:"Facebook",color:"#1877F2"},tiktok:{icon:Vn,label:"TikTok",color:"#000"},shop:{icon:Hn,label:"Tienda",color:"#16a34a"},email:{icon:Xn,label:"Email",color:"#EA4335"},website:{icon:sn,label:"Web",color:"#6366f1"},link:{icon:Fe,label:"Enlace",color:"#64748b"}},vi=L.memo(function({link:t,onUpdate:n,onDelete:s,isExpanded:i,onToggleExpand:a,onThumbnailUpload:o,onToggleActive:c}){const{attributes:d,listeners:h,setNodeRef:u,transform:p,transition:v,isDragging:g}=fi({id:t.id}),j=L.useRef(null),[b,y]=L.useState(!1),[k,S]=L.useState(!!(t.visible_from||t.visible_until)),x={transform:Xe.Transform.toString(p),transition:v,zIndex:g?50:1,opacity:g?.5:1},R=()=>{var m;(m=j.current)==null||m.click()},E=async m=>{var M;const T=(M=m.target.files)==null?void 0:M[0];if(!(!T||!o)){y(!0);try{await o(t.id,T)}catch($){console.error("Thumbnail upload error:",$)}finally{y(!1),m.target.value=""}}},N=t.block_type||"link",D=N==="header"||N==="divider",C=t.active!==!1;return r.jsxs("div",{ref:u,style:x,className:`lp-card ${g?"dragging":""} ${D?"lp-card-special":""} ${N==="header"?"lp-card-header-block":""} ${N==="divider"?"lp-card-divider-block":""} ${C?"":"lp-card-disabled"}`,children:[r.jsxs("div",{className:"lp-card-header",onClick:a,children:[r.jsx("div",{className:"lp-drag-handle",...d,...h,onClick:m=>m.stopPropagation(),children:r.jsx(cr,{size:20})}),t.icon&&Oe[t.icon]&&r.jsx("div",{className:"lp-link-icon",style:{background:Oe[t.icon].color},onClick:m=>m.stopPropagation(),children:L.createElement(Oe[t.icon].icon,{size:18})}),t.thumbnail_url&&!t.icon&&r.jsx("div",{className:"lp-link-thumb",onClick:m=>m.stopPropagation(),children:r.jsx("img",{src:t.thumbnail_url,alt:""})}),r.jsxs("div",{className:"lp-card-inputs",children:[r.jsx("input",{className:"lp-input-main",value:t.title,onChange:m=>n(t.id,"title",m.target.value),placeholder:N==="header"?"Título de sección":N==="divider"?"Divisor":"Título del enlace",onClick:m=>m.stopPropagation()}),!D&&r.jsx("input",{className:"lp-input-sub",value:t.url,onChange:m=>n(t.id,"url",m.target.value),placeholder:"https://...",onClick:m=>m.stopPropagation()})]}),t.block_type==="link"||!t.block_type?r.jsxs("div",{className:"lp-link-stats",onClick:m=>m.stopPropagation(),children:[r.jsx(et,{size:12}),r.jsx("span",{children:t.clicks||0})]}):null,r.jsx("div",{className:"flex items-center gap-3",onClick:m=>m.stopPropagation(),children:r.jsx("div",{className:`lp-switch ${C?"active":""}`,onClick:()=>c(t.id,!C),title:C?"Desactivar enlace":"Activar enlace",children:r.jsx("div",{className:"lp-switch-dot"})})}),r.jsx("div",{className:"lp-chevron-indicator",children:i?r.jsx(ir,{size:18}):r.jsx(mt,{size:18})})]}),i&&r.jsxs("div",{className:"lp-card-body",children:[!D&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"lp-icon-selector",children:[r.jsx("label",{className:"lp-icon-label",children:"Icono"}),r.jsxs("div",{className:"lp-icon-grid",children:[Object.entries(Oe).map(([m,{icon:T,label:M,color:$}])=>r.jsx("button",{type:"button",className:`lp-icon-opt ${t.icon===m?"selected":""}`,onClick:()=>n(t.id,"icon",m),title:M,style:{"--icon-color":$},children:r.jsx(T,{size:18})},m)),t.icon&&r.jsx("button",{type:"button",className:"lp-icon-opt lp-icon-clear",onClick:()=>n(t.id,"icon",null),title:"Sin icono",children:"✕"})]})]}),r.jsxs("div",{className:"lp-link-type-selector",children:[r.jsx("label",{className:"lp-icon-label",children:"Tipo de Enlace"}),r.jsxs("div",{className:"lp-link-type-grid",children:[r.jsxs("button",{type:"button",className:`lp-link-type-opt ${!t.link_type||t.link_type==="normal"?"selected":""}`,onClick:()=>n(t.id,"link_type","normal"),children:[r.jsx(Fe,{size:14}),"Normal"]}),r.jsxs("button",{type:"button",className:`lp-link-type-opt monetized ${t.link_type==="monetized"?"selected":""}`,onClick:()=>n(t.id,"link_type","monetized"),children:[r.jsx(kt,{size:14}),"Monetizado"]}),r.jsxs("button",{type:"button",className:`lp-link-type-opt paywall ${t.link_type==="paywall"?"selected":""}`,onClick:()=>n(t.id,"link_type","paywall"),children:[r.jsx(it,{size:14}),"Paywall"]})]})]}),r.jsxs("div",{className:"lp-card-actions",children:[r.jsxs("div",{className:"lp-action-row",children:[r.jsx("input",{type:"file",accept:"image/*",ref:j,className:"hidden",onChange:E}),r.jsxs("button",{className:"lp-action-btn",onClick:R,disabled:b,children:[b?r.jsx(bt,{size:16,className:"animate-spin"}):r.jsx(ln,{size:16}),b?"Subiendo...":t.thumbnail_url?"Cambiar":"Miniatura"]})]}),r.jsxs("div",{className:`lp-scheduling-section ${k?"expanded":""}`,children:[r.jsxs("div",{className:"lp-scheduling-header",onClick:()=>S(!k),style:{cursor:"pointer"},children:[r.jsx(Zn,{size:14}),r.jsx("span",{children:"Programar visibilidad"}),(t.visible_from||t.visible_until)&&r.jsx("span",{className:"lp-schedule-badge",children:"Activo"}),r.jsx(mt,{size:14,style:{marginLeft:"auto",transform:k?"rotate(180deg)":"rotate(0)",transition:"transform 0.2s"}})]}),k&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"lp-scheduling-inputs",children:[r.jsxs("div",{className:"lp-schedule-field",children:[r.jsx("label",{children:"Desde:"}),r.jsx("input",{type:"datetime-local",value:t.visible_from?t.visible_from.slice(0,16):"",onChange:m=>n(t.id,"visible_from",m.target.value?new Date(m.target.value).toISOString():null)})]}),r.jsxs("div",{className:"lp-schedule-field",children:[r.jsx("label",{children:"Hasta:"}),r.jsx("input",{type:"datetime-local",value:t.visible_until?t.visible_until.slice(0,16):"",onChange:m=>n(t.id,"visible_until",m.target.value?new Date(m.target.value).toISOString():null)})]})]}),(t.visible_from||t.visible_until)&&r.jsx("button",{className:"lp-schedule-clear",onClick:()=>{n(t.id,"visible_from",null),n(t.id,"visible_until",null)},children:"Quitar programación"})]})]}),r.jsxs("button",{className:"lp-action-btn danger",onClick:()=>s(t.id),children:[r.jsx(Ht,{size:16})," Eliminar"]})]})]}),D&&r.jsxs("div",{className:"lp-special-block-actions",children:[r.jsxs("div",{className:"lp-special-block-info",children:[N==="header"&&r.jsxs(r.Fragment,{children:[r.jsx(cn,{size:16})," Este es un encabezado de sección"]}),N==="divider"&&r.jsxs(r.Fragment,{children:[r.jsx(on,{size:16})," Este es un divisor visual"]})]}),r.jsxs("button",{className:"lp-action-btn danger",onClick:()=>s(t.id),children:[r.jsx(Ht,{size:16})," Eliminar"]})]})]})]})}),rn=L.memo(function({profile:t}){var a,o,c;const n=()=>{if(t.background_url)return{backgroundImage:`url(${t.background_url})`,backgroundSize:"cover",backgroundPosition:"center"};const d={light:"#f8fafc",dark:"linear-gradient(180deg, #0f172a 0%, #1e293b 100%)",blue:"linear-gradient(180deg, #1e40af 0%, #3b82f6 100%)",gradient:"linear-gradient(135deg, #6366f1 0%, #a855f7 50%, #ec4899 100%)"};return{background:d[t.theme]||d.dark}},s=()=>{const d={display:"flex",alignItems:"center",width:"100%",padding:"14px 18px",marginBottom:"12px",textDecoration:"none",fontWeight:700,fontSize:"13px",cursor:"pointer",position:"relative",overflow:"hidden",border:"none"};let h={borderRadius:"10px"};t.button_style==="square"&&(h={borderRadius:"0px"}),t.button_style==="pill"&&(h={borderRadius:"100px"});let u={};if(t.button_style==="outline"){const p=t.accent_color||"white";u={background:"transparent",color:p,border:`2px solid ${p}`}}else t.button_style==="glass"?u={background:"rgba(255,255,255,0.1)",color:"white",border:"1px solid rgba(255,255,255,0.2)",backdropFilter:"blur(10px)"}:t.button_style==="shadow"?u={background:t.accent_color||"white",color:t.accent_color?"white":"black",border:"2px solid black",boxShadow:"4px 4px 0px black"}:t.accent_color?u={background:t.accent_color,color:"white",boxShadow:`0 4px 14px ${t.accent_color}40`}:u=t.theme==="light"?{background:"white",color:"#1F2937",border:"1px solid #E5E7EB"}:{background:"rgba(255,255,255,0.15)",color:"white",border:"1px solid rgba(255,255,255,0.2)"};return{...d,...h,...u}},i=t.theme==="light";return r.jsx("div",{className:"lp-live-preview",style:{...n(),color:i?"#1f2937":"white"},children:r.jsxs("div",{className:"lp-preview-content",children:[r.jsx("div",{className:"lp-preview-avatar",children:t.avatar_url?r.jsx("img",{src:t.avatar_url,alt:""}):r.jsx("span",{children:(o=(a=t.username)==null?void 0:a[0])==null?void 0:o.toUpperCase()})}),r.jsxs("h2",{className:"lp-preview-name",children:["@",t.display_name||t.username]}),r.jsx("p",{className:"lp-preview-bio",children:t.description||"Tu bio aquí..."}),r.jsx("div",{className:"lp-preview-links",children:(c=t.links)==null?void 0:c.filter(d=>d.active!==!1).map((d,h)=>{const u=d.block_type||"link",p=d.icon&&Oe[d.icon];return u==="header"?r.jsx("div",{className:"lp-preview-header",children:d.title},d.id):u==="divider"?r.jsx("div",{className:"lp-preview-divider",style:{background:i?"rgba(0,0,0,0.1)":"rgba(255,255,255,0.15)"}},d.id):u==="spotlight"?r.jsxs("div",{className:"lp-preview-spotlight",style:{background:`linear-gradient(135deg, ${t.accent_color||"#f59e0b"} 0%, ${t.accent_color||"#fbbf24"} 100%)`},children:["⭐ ",d.title]},d.id):r.jsxs("div",{style:s(),children:[p&&r.jsx("div",{style:{width:"32px",height:"32px",borderRadius:"8px",background:p.color,display:"flex",alignItems:"center",justifyContent:"center",marginRight:"10px",color:"white"},children:L.createElement(p.icon,{size:16})}),d.thumbnail_url&&!d.icon&&r.jsx("img",{src:d.thumbnail_url,style:{width:"32px",height:"32px",borderRadius:"6px",objectFit:"cover",marginRight:"10px"},alt:""}),r.jsx("span",{style:{flex:1,textAlign:"center"},children:d.title||"Sin título"})]},d.id)})}),r.jsxs("div",{className:"lp-preview-footer",children:[r.jsx(it,{size:10})," LinkPay"]})]})})});export{Ni as BioEditorPage};
