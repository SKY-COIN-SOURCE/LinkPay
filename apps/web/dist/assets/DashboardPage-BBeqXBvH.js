import{u as y,a as k,b as C,r as t,j as s,m as i,M as R,A as w,L as A}from"./index-lZa7Tgk6.js";import{P as I}from"./PremiumLoader-PHRqGvbV.js";import{D as E}from"./dollar-sign-BjH1xjIr.js";import{T as S}from"./trending-up-EYVkXU4D.js";import{C as F}from"./chart-column-htPS9c1g.js";function v(a,x=2e3,e=!1){const[p,n]=t.useState(e?a:0);return t.useEffect(()=>{if(e){n(a);return}let c,d;const r=l=>{c||(c=l);const o=Math.min((l-c)/x,1),u=o===1?1:1-Math.pow(2,-10*o);n(a*u),o<1&&(d=requestAnimationFrame(r))};return d=requestAnimationFrame(r),()=>cancelAnimationFrame(d)},[a,x,e]),p}function O(){const{t:a}=y(),x=k(),{data:e,links:p,loading:n}=C(),[c,d]=t.useState(!1),r=t.useMemo(()=>e!==null&&!c,[]);t.useEffect(()=>{!n&&e&&d(!0)},[n,e]);const l=t.useMemo(()=>({totalRevenue:(e==null?void 0:e.totalRevenue)??0,linkRevenue:(e==null?void 0:e.linkRevenue)??0,bioRevenue:(e==null?void 0:e.bioRevenue)??0,totalClicks:(e==null?void 0:e.totalClicks)??0,linkClicks:(e==null?void 0:e.linkClicks)??0,bioClicks:(e==null?void 0:e.bioClicks)??0}),[e]),o=v(l.totalRevenue,1500,r),u=v(l.totalClicks,1500,r),j=v(0,2e3,r),[N,T]=t.useState(!1),b=p.slice(0,5),g={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.05,delayChildren:.06}}},h={hidden:{opacity:0,y:20,scale:.97},visible:{opacity:1,y:0,scale:1,transition:{type:"spring",stiffness:180,damping:22}}};return n?s.jsx(I,{size:"medium",text:"LINKPAY",subtext:"Preparando tu dashboard..."}):s.jsx("div",{className:"lp-dashboard-shell",children:s.jsxs("div",{className:"lp-dashboard-inner",children:[s.jsxs(i.div,{className:"lp-dashboard-grid",variants:g,initial:"hidden",animate:"visible",children:[s.jsxs(i.div,{className:`lp-dashboard-card lp-card-green ${N?"pulse-green":""}`,variants:h,whileHover:{y:-5,boxShadow:"0 25px 50px -12px rgba(34, 197, 94, 0.25)"},children:[s.jsxs("div",{className:"lp-stat-header",children:[s.jsx("div",{className:"lp-stat-icon",children:s.jsx(E,{size:24})}),s.jsxs("div",{className:"lp-trend-badge",children:[s.jsx(S,{size:12})," LIVE"]})]}),s.jsxs("div",{children:[s.jsx("div",{className:"lp-stat-label",children:a("dashboard.stats.revenue.label")}),s.jsxs("div",{className:"lp-stat-value",children:["€",o.toFixed(4)]}),s.jsx("div",{className:"h-1 w-full bg-slate-800/50 rounded-full mt-2 mb-4 overflow-hidden",children:s.jsx(i.div,{className:"h-full bg-green-500",initial:{width:0},animate:{width:"100%"},transition:{duration:2,ease:"circOut"}})}),s.jsxs("div",{className:"lp-substats",style:{gridTemplateColumns:"1fr 1fr 1fr"},children:[s.jsxs("div",{className:"lp-substat-box",children:[s.jsx("span",{className:"lp-substat-label",children:a("dashboard.stats.revenue.links")}),s.jsxs("span",{className:"lp-substat-value",children:["€",l.linkRevenue.toFixed(4)]})]}),s.jsxs("div",{className:"lp-substat-box",children:[s.jsx("span",{className:"lp-substat-label",children:a("dashboard.stats.revenue.bio")}),s.jsxs("span",{className:"lp-substat-value",children:["€",l.bioRevenue.toFixed(4)]})]}),s.jsxs("div",{className:"lp-substat-box",children:[s.jsx("span",{className:"lp-substat-label",children:"REFERIDOS"}),s.jsxs("span",{className:"lp-substat-value",children:["€",j.toFixed(2)]})]})]})]})]}),s.jsxs(i.div,{className:"lp-dashboard-card lp-card-purple",variants:h,whileHover:{y:-5,boxShadow:"0 25px 50px -12px rgba(168, 85, 247, 0.25)"},children:[s.jsx("div",{className:"lp-stat-header",children:s.jsx("div",{className:"lp-stat-icon",children:s.jsx(R,{size:24})})}),s.jsxs("div",{children:[s.jsx("div",{className:"lp-stat-label",children:a("dashboard.stats.clicks.label")}),s.jsx("div",{className:"lp-stat-value",children:u.toFixed(0)}),s.jsx("div",{className:"lp-substat-label",style:{marginTop:"8px"},children:"LINKS + BIO PAGE"})]})]}),s.jsxs(i.div,{className:"lp-dashboard-card lp-card-orange",variants:h,whileHover:{y:-5,boxShadow:"0 25px 50px -12px rgba(249, 115, 22, 0.25)"},children:[s.jsx("div",{className:"lp-stat-header",children:s.jsx("div",{className:"lp-stat-icon",children:s.jsx(F,{size:24})})}),s.jsxs("div",{children:[s.jsx("div",{className:"lp-stat-label",children:"RPM MEDIO"}),s.jsx("div",{className:"lp-stat-value",children:"€1.22"}),s.jsx("div",{className:"lp-substat-label",style:{marginTop:"8px"},children:"POR 1000 VISITAS"})]})]})]}),s.jsxs(i.div,{className:"lp-dashboard-card lp-recent-card lp-card-blue",initial:{opacity:0,y:15},animate:{opacity:1,y:0},transition:{delay:.35,duration:.4},children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsx("div",{className:"lp-stat-label",children:"ACTIVIDAD RECIENTE"}),s.jsxs(i.button,{whileHover:{x:4,color:"#818cf8"},onClick:()=>x("/app/links"),className:"text-sm font-semibold text-indigo-400 flex items-center gap-1 transition-colors",style:{background:"none",border:"none",cursor:"pointer"},children:[a("dashboard.recent.view_all")," ",s.jsx(w,{size:14})]})]}),s.jsxs("div",{className:"lp-recent-list",children:[b.map((m,f)=>s.jsxs(i.div,{className:"lp-recent-item",initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{delay:.7+f*.05},whileHover:{backgroundColor:"rgba(255,255,255,0.06)",scale:1.005},children:[s.jsx("div",{className:"lp-link-icon-circle",children:s.jsx(A,{size:16})}),s.jsxs("div",{className:"lp-link-info",children:[s.jsxs("span",{className:"lp-link-alias",children:["/",m.slug]}),s.jsx("span",{className:"lp-link-url",children:m.original_url})]}),s.jsxs("div",{className:"text-right min-w-[80px]",children:[s.jsxs("div",{className:"lp-link-money",children:["€",(m.earnings||0).toFixed(4)]}),s.jsxs("div",{className:"text-xs text-slate-500",children:[m.views||0," clicks"]})]})]},m.id)),b.length===0&&s.jsx("div",{className:"text-center py-8 text-slate-500 text-sm italic",children:a("dashboard.recent.empty_desc")||"No links yet."})]})]})]})})}export{O as DashboardPage};
